(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var hl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ph(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mh={exports:{}},bo={},gh={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var is=Symbol.for("react.element"),vv=Symbol.for("react.portal"),yv=Symbol.for("react.fragment"),_v=Symbol.for("react.strict_mode"),xv=Symbol.for("react.profiler"),wv=Symbol.for("react.provider"),Sv=Symbol.for("react.context"),Cv=Symbol.for("react.forward_ref"),Ev=Symbol.for("react.suspense"),kv=Symbol.for("react.memo"),Tv=Symbol.for("react.lazy"),Zc=Symbol.iterator;function Iv(t){return t===null||typeof t!="object"?null:(t=Zc&&t[Zc]||t["@@iterator"],typeof t=="function"?t:null)}var vh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yh=Object.assign,_h={};function $r(t,e,n){this.props=t,this.context=e,this.refs=_h,this.updater=n||vh}$r.prototype.isReactComponent={};$r.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$r.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xh(){}xh.prototype=$r.prototype;function du(t,e,n){this.props=t,this.context=e,this.refs=_h,this.updater=n||vh}var hu=du.prototype=new xh;hu.constructor=du;yh(hu,$r.prototype);hu.isPureReactComponent=!0;var ef=Array.isArray,wh=Object.prototype.hasOwnProperty,pu={current:null},Sh={key:!0,ref:!0,__self:!0,__source:!0};function Ch(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)wh.call(e,r)&&!Sh.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:is,type:t,key:i,ref:o,props:s,_owner:pu.current}}function Pv(t,e){return{$$typeof:is,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mu(t){return typeof t=="object"&&t!==null&&t.$$typeof===is}function Nv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tf=/\/+/g;function pl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Nv(""+t.key):e.toString(36)}function Bs(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case is:case vv:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+pl(o,0):r,ef(s)?(n="",t!=null&&(n=t.replace(tf,"$&/")+"/"),Bs(s,e,n,"",function(c){return c})):s!=null&&(mu(s)&&(s=Pv(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(tf,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ef(t))for(var l=0;l<t.length;l++){i=t[l];var a=r+pl(i,l);o+=Bs(i,e,n,a,s)}else if(a=Iv(t),typeof a=="function")for(t=a.call(t),l=0;!(i=t.next()).done;)i=i.value,a=r+pl(i,l++),o+=Bs(i,e,n,a,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gs(t,e,n){if(t==null)return t;var r=[],s=0;return Bs(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Rv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xe={current:null},bs={transition:null},Av={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:bs,ReactCurrentOwner:pu};function Eh(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:gs,forEach:function(t,e,n){gs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gs(t,function(){e++}),e},toArray:function(t){return gs(t,function(e){return e})||[]},only:function(t){if(!mu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=$r;J.Fragment=yv;J.Profiler=xv;J.PureComponent=du;J.StrictMode=_v;J.Suspense=Ev;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Av;J.act=Eh;J.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yh({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=pu.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)wh.call(e,a)&&!Sh.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:is,type:t.type,key:s,ref:i,props:r,_owner:o}};J.createContext=function(t){return t={$$typeof:Sv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wv,_context:t},t.Consumer=t};J.createElement=Ch;J.createFactory=function(t){var e=Ch.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:Cv,render:t}};J.isValidElement=mu;J.lazy=function(t){return{$$typeof:Tv,_payload:{_status:-1,_result:t},_init:Rv}};J.memo=function(t,e){return{$$typeof:kv,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=bs.transition;bs.transition={};try{t()}finally{bs.transition=e}};J.unstable_act=Eh;J.useCallback=function(t,e){return Xe.current.useCallback(t,e)};J.useContext=function(t){return Xe.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return Xe.current.useDeferredValue(t)};J.useEffect=function(t,e){return Xe.current.useEffect(t,e)};J.useId=function(){return Xe.current.useId()};J.useImperativeHandle=function(t,e,n){return Xe.current.useImperativeHandle(t,e,n)};J.useInsertionEffect=function(t,e){return Xe.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return Xe.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return Xe.current.useMemo(t,e)};J.useReducer=function(t,e,n){return Xe.current.useReducer(t,e,n)};J.useRef=function(t){return Xe.current.useRef(t)};J.useState=function(t){return Xe.current.useState(t)};J.useSyncExternalStore=function(t,e,n){return Xe.current.useSyncExternalStore(t,e,n)};J.useTransition=function(){return Xe.current.useTransition()};J.version="18.3.1";gh.exports=J;var Z=gh.exports;const Mv=ph(Z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv=Z,Lv=Symbol.for("react.element"),Ov=Symbol.for("react.fragment"),Fv=Object.prototype.hasOwnProperty,Bv=Dv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bv={key:!0,ref:!0,__self:!0,__source:!0};function kh(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Fv.call(e,r)&&!bv.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Lv,type:t,key:i,ref:o,props:s,_owner:Bv.current}}bo.Fragment=Ov;bo.jsx=kh;bo.jsxs=kh;mh.exports=bo;var N=mh.exports,Zl={},Th={exports:{}},mt={},Ih={exports:{}},Ph={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,F){var B=A.length;A.push(F);e:for(;0<B;){var W=B-1>>>1,G=A[W];if(0<s(G,F))A[W]=F,A[B]=G,B=W;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var F=A[0],B=A.pop();if(B!==F){A[0]=B;e:for(var W=0,G=A.length,pe=G>>>1;W<pe;){var Re=2*(W+1)-1,Se=A[Re],H=Re+1,Ce=A[H];if(0>s(Se,B))H<G&&0>s(Ce,Se)?(A[W]=Ce,A[H]=B,W=H):(A[W]=Se,A[Re]=B,W=Re);else if(H<G&&0>s(Ce,B))A[W]=Ce,A[H]=B,W=H;else break e}}return F}function s(A,F){var B=A.sortIndex-F.sortIndex;return B!==0?B:A.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],d=1,h=null,f=3,u=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(A){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=A)r(c),F.sortIndex=F.expirationTime,e(a,F);else break;F=n(c)}}function E(A){if(m=!1,x(A),!p)if(n(a)!==null)p=!0,z(_);else{var F=n(c);F!==null&&b(E,F.startTime-A)}}function _(A,F){p=!1,m&&(m=!1,g(w),w=-1),u=!0;var B=f;try{for(x(F),h=n(a);h!==null&&(!(h.expirationTime>F)||A&&!I());){var W=h.callback;if(typeof W=="function"){h.callback=null,f=h.priorityLevel;var G=W(h.expirationTime<=F);F=t.unstable_now(),typeof G=="function"?h.callback=G:h===n(a)&&r(a),x(F)}else r(a);h=n(a)}if(h!==null)var pe=!0;else{var Re=n(c);Re!==null&&b(E,Re.startTime-F),pe=!1}return pe}finally{h=null,f=B,u=!1}}var S=!1,C=null,w=-1,T=5,k=-1;function I(){return!(t.unstable_now()-k<T)}function P(){if(C!==null){var A=t.unstable_now();k=A;var F=!0;try{F=C(!0,A)}finally{F?R():(S=!1,C=null)}}else S=!1}var R;if(typeof v=="function")R=function(){v(P)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,L=M.port2;M.port1.onmessage=P,R=function(){L.postMessage(null)}}else R=function(){y(P,0)};function z(A){C=A,S||(S=!0,R())}function b(A,F){w=y(function(){A(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){p||u||(p=!0,z(_))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var B=f;f=F;try{return A()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,F){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var B=f;f=A;try{return F()}finally{f=B}},t.unstable_scheduleCallback=function(A,F,B){var W=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?W+B:W):B=W,A){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=B+G,A={id:d++,callback:F,priorityLevel:A,startTime:B,expirationTime:G,sortIndex:-1},B>W?(A.sortIndex=B,e(c,A),n(a)===null&&A===n(c)&&(m?(g(w),w=-1):m=!0,b(E,B-W))):(A.sortIndex=G,e(a,A),p||u||(p=!0,z(_))),A},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(A){var F=f;return function(){var B=f;f=F;try{return A.apply(this,arguments)}finally{f=B}}}})(Ph);Ih.exports=Ph;var jv=Ih.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv=Z,pt=jv;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nh=new Set,Ai={};function or(t,e){Lr(t,e),Lr(t+"Capture",e)}function Lr(t,e){for(Ai[t]=e,t=0;t<e.length;t++)Nh.add(e[t])}var Xt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ea=Object.prototype.hasOwnProperty,Vv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nf={},rf={};function Uv(t){return ea.call(rf,t)?!0:ea.call(nf,t)?!1:Vv.test(t)?rf[t]=!0:(nf[t]=!0,!1)}function Hv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Wv(t,e,n,r){if(e===null||typeof e>"u"||Hv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qe(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ue={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ue[t]=new qe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ue[e]=new qe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ue[t]=new qe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ue[t]=new qe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ue[t]=new qe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ue[t]=new qe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ue[t]=new qe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ue[t]=new qe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ue[t]=new qe(t,5,!1,t.toLowerCase(),null,!1,!1)});var gu=/[\-:]([a-z])/g;function vu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gu,vu);Ue[e]=new qe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gu,vu);Ue[e]=new qe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gu,vu);Ue[e]=new qe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ue[t]=new qe(t,1,!1,t.toLowerCase(),null,!1,!1)});Ue.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ue[t]=new qe(t,1,!1,t.toLowerCase(),null,!0,!0)});function yu(t,e,n,r){var s=Ue.hasOwnProperty(e)?Ue[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Wv(e,n,s,r)&&(n=null),r||s===null?Uv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var rn=zv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vs=Symbol.for("react.element"),dr=Symbol.for("react.portal"),hr=Symbol.for("react.fragment"),_u=Symbol.for("react.strict_mode"),ta=Symbol.for("react.profiler"),Rh=Symbol.for("react.provider"),Ah=Symbol.for("react.context"),xu=Symbol.for("react.forward_ref"),na=Symbol.for("react.suspense"),ra=Symbol.for("react.suspense_list"),wu=Symbol.for("react.memo"),an=Symbol.for("react.lazy"),Mh=Symbol.for("react.offscreen"),sf=Symbol.iterator;function Zr(t){return t===null||typeof t!="object"?null:(t=sf&&t[sf]||t["@@iterator"],typeof t=="function"?t:null)}var ye=Object.assign,ml;function di(t){if(ml===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ml=e&&e[1]||""}return`
`+ml+t}var gl=!1;function vl(t,e){if(!t||gl)return"";gl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{gl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?di(t):""}function $v(t){switch(t.tag){case 5:return di(t.type);case 16:return di("Lazy");case 13:return di("Suspense");case 19:return di("SuspenseList");case 0:case 2:case 15:return t=vl(t.type,!1),t;case 11:return t=vl(t.type.render,!1),t;case 1:return t=vl(t.type,!0),t;default:return""}}function ia(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hr:return"Fragment";case dr:return"Portal";case ta:return"Profiler";case _u:return"StrictMode";case na:return"Suspense";case ra:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ah:return(t.displayName||"Context")+".Consumer";case Rh:return(t._context.displayName||"Context")+".Provider";case xu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wu:return e=t.displayName||null,e!==null?e:ia(t.type)||"Memo";case an:e=t._payload,t=t._init;try{return ia(t(e))}catch{}}return null}function Gv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ia(e);case 8:return e===_u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Kv(t){var e=Dh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ys(t){t._valueTracker||(t._valueTracker=Kv(t))}function Lh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Dh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sa(t,e){var n=e.checked;return ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function of(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Oh(t,e){e=e.checked,e!=null&&yu(t,"checked",e,!1)}function oa(t,e){Oh(t,e);var n=Tn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?la(t,e.type,n):e.hasOwnProperty("defaultValue")&&la(t,e.type,Tn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function la(t,e,n){(e!=="number"||Xs(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var hi=Array.isArray;function Tr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function aa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function af(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(hi(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tn(n)}}function Fh(t,e){var n=Tn(e.value),r=Tn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function uf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Bh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ua(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Bh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _s,bh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_s=_s||document.createElement("div"),_s.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_s.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Mi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qv=["Webkit","ms","Moz","O"];Object.keys(gi).forEach(function(t){Qv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gi[e]=gi[t]})});function jh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gi.hasOwnProperty(t)&&gi[t]?(""+e).trim():e+"px"}function zh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=jh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Yv=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ca(t,e){if(e){if(Yv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function fa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var da=null;function Su(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ha=null,Ir=null,Pr=null;function cf(t){if(t=ls(t)){if(typeof ha!="function")throw Error(D(280));var e=t.stateNode;e&&(e=Ho(e),ha(t.stateNode,t.type,e))}}function Vh(t){Ir?Pr?Pr.push(t):Pr=[t]:Ir=t}function Uh(){if(Ir){var t=Ir,e=Pr;if(Pr=Ir=null,cf(t),e)for(t=0;t<e.length;t++)cf(e[t])}}function Hh(t,e){return t(e)}function Wh(){}var yl=!1;function $h(t,e,n){if(yl)return t(e,n);yl=!0;try{return Hh(t,e,n)}finally{yl=!1,(Ir!==null||Pr!==null)&&(Wh(),Uh())}}function Di(t,e){var n=t.stateNode;if(n===null)return null;var r=Ho(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var pa=!1;if(Xt)try{var ei={};Object.defineProperty(ei,"passive",{get:function(){pa=!0}}),window.addEventListener("test",ei,ei),window.removeEventListener("test",ei,ei)}catch{pa=!1}function Xv(t,e,n,r,s,i,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var vi=!1,qs=null,Js=!1,ma=null,qv={onError:function(t){vi=!0,qs=t}};function Jv(t,e,n,r,s,i,o,l,a){vi=!1,qs=null,Xv.apply(qv,arguments)}function Zv(t,e,n,r,s,i,o,l,a){if(Jv.apply(this,arguments),vi){if(vi){var c=qs;vi=!1,qs=null}else throw Error(D(198));Js||(Js=!0,ma=c)}}function lr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ff(t){if(lr(t)!==t)throw Error(D(188))}function ey(t){var e=t.alternate;if(!e){if(e=lr(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ff(s),t;if(i===r)return ff(s),e;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function Kh(t){return t=ey(t),t!==null?Qh(t):null}function Qh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Qh(t);if(e!==null)return e;t=t.sibling}return null}var Yh=pt.unstable_scheduleCallback,df=pt.unstable_cancelCallback,ty=pt.unstable_shouldYield,ny=pt.unstable_requestPaint,we=pt.unstable_now,ry=pt.unstable_getCurrentPriorityLevel,Cu=pt.unstable_ImmediatePriority,Xh=pt.unstable_UserBlockingPriority,Zs=pt.unstable_NormalPriority,iy=pt.unstable_LowPriority,qh=pt.unstable_IdlePriority,jo=null,jt=null;function sy(t){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(jo,t,void 0,(t.current.flags&128)===128)}catch{}}var At=Math.clz32?Math.clz32:ay,oy=Math.log,ly=Math.LN2;function ay(t){return t>>>=0,t===0?32:31-(oy(t)/ly|0)|0}var xs=64,ws=4194304;function pi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function eo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=pi(l):(i&=o,i!==0&&(r=pi(i)))}else o=n&~s,o!==0?r=pi(o):i!==0&&(r=pi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-At(e),s=1<<n,r|=t[n],e&=~s;return r}function uy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cy(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-At(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=uy(l,e)):a<=e&&(t.expiredLanes|=l),i&=~l}}function ga(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jh(){var t=xs;return xs<<=1,!(xs&4194240)&&(xs=64),t}function _l(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ss(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-At(e),t[e]=n}function fy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-At(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Eu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-At(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ie=0;function Zh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ep,ku,tp,np,rp,va=!1,Ss=[],mn=null,gn=null,vn=null,Li=new Map,Oi=new Map,cn=[],dy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hf(t,e){switch(t){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":gn=null;break;case"mouseover":case"mouseout":vn=null;break;case"pointerover":case"pointerout":Li.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oi.delete(e.pointerId)}}function ti(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ls(e),e!==null&&ku(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function hy(t,e,n,r,s){switch(e){case"focusin":return mn=ti(mn,t,e,n,r,s),!0;case"dragenter":return gn=ti(gn,t,e,n,r,s),!0;case"mouseover":return vn=ti(vn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Li.set(i,ti(Li.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Oi.set(i,ti(Oi.get(i)||null,t,e,n,r,s)),!0}return!1}function ip(t){var e=Vn(t.target);if(e!==null){var n=lr(e);if(n!==null){if(e=n.tag,e===13){if(e=Gh(n),e!==null){t.blockedOn=e,rp(t.priority,function(){tp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function js(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ya(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);da=r,n.target.dispatchEvent(r),da=null}else return e=ls(n),e!==null&&ku(e),t.blockedOn=n,!1;e.shift()}return!0}function pf(t,e,n){js(t)&&n.delete(e)}function py(){va=!1,mn!==null&&js(mn)&&(mn=null),gn!==null&&js(gn)&&(gn=null),vn!==null&&js(vn)&&(vn=null),Li.forEach(pf),Oi.forEach(pf)}function ni(t,e){t.blockedOn===e&&(t.blockedOn=null,va||(va=!0,pt.unstable_scheduleCallback(pt.unstable_NormalPriority,py)))}function Fi(t){function e(s){return ni(s,t)}if(0<Ss.length){ni(Ss[0],t);for(var n=1;n<Ss.length;n++){var r=Ss[n];r.blockedOn===t&&(r.blockedOn=null)}}for(mn!==null&&ni(mn,t),gn!==null&&ni(gn,t),vn!==null&&ni(vn,t),Li.forEach(e),Oi.forEach(e),n=0;n<cn.length;n++)r=cn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<cn.length&&(n=cn[0],n.blockedOn===null);)ip(n),n.blockedOn===null&&cn.shift()}var Nr=rn.ReactCurrentBatchConfig,to=!0;function my(t,e,n,r){var s=ie,i=Nr.transition;Nr.transition=null;try{ie=1,Tu(t,e,n,r)}finally{ie=s,Nr.transition=i}}function gy(t,e,n,r){var s=ie,i=Nr.transition;Nr.transition=null;try{ie=4,Tu(t,e,n,r)}finally{ie=s,Nr.transition=i}}function Tu(t,e,n,r){if(to){var s=ya(t,e,n,r);if(s===null)Nl(t,e,r,no,n),hf(t,r);else if(hy(s,t,e,n,r))r.stopPropagation();else if(hf(t,r),e&4&&-1<dy.indexOf(t)){for(;s!==null;){var i=ls(s);if(i!==null&&ep(i),i=ya(t,e,n,r),i===null&&Nl(t,e,r,no,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Nl(t,e,r,null,n)}}var no=null;function ya(t,e,n,r){if(no=null,t=Su(r),t=Vn(t),t!==null)if(e=lr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Gh(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return no=t,null}function sp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ry()){case Cu:return 1;case Xh:return 4;case Zs:case iy:return 16;case qh:return 536870912;default:return 16}default:return 16}}var dn=null,Iu=null,zs=null;function op(){if(zs)return zs;var t,e=Iu,n=e.length,r,s="value"in dn?dn.value:dn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return zs=s.slice(t,1<r?1-r:void 0)}function Vs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cs(){return!0}function mf(){return!1}function gt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cs:mf,this.isPropagationStopped=mf,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cs)},persist:function(){},isPersistent:Cs}),e}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pu=gt(Gr),os=ye({},Gr,{view:0,detail:0}),vy=gt(os),xl,wl,ri,zo=ye({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ri&&(ri&&t.type==="mousemove"?(xl=t.screenX-ri.screenX,wl=t.screenY-ri.screenY):wl=xl=0,ri=t),xl)},movementY:function(t){return"movementY"in t?t.movementY:wl}}),gf=gt(zo),yy=ye({},zo,{dataTransfer:0}),_y=gt(yy),xy=ye({},os,{relatedTarget:0}),Sl=gt(xy),wy=ye({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Sy=gt(wy),Cy=ye({},Gr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ey=gt(Cy),ky=ye({},Gr,{data:0}),vf=gt(ky),Ty={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Py={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ny(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Py[t])?!!e[t]:!1}function Nu(){return Ny}var Ry=ye({},os,{key:function(t){if(t.key){var e=Ty[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Iy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nu,charCode:function(t){return t.type==="keypress"?Vs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ay=gt(Ry),My=ye({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yf=gt(My),Dy=ye({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nu}),Ly=gt(Dy),Oy=ye({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fy=gt(Oy),By=ye({},zo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),by=gt(By),jy=[9,13,27,32],Ru=Xt&&"CompositionEvent"in window,yi=null;Xt&&"documentMode"in document&&(yi=document.documentMode);var zy=Xt&&"TextEvent"in window&&!yi,lp=Xt&&(!Ru||yi&&8<yi&&11>=yi),_f=" ",xf=!1;function ap(t,e){switch(t){case"keyup":return jy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function up(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pr=!1;function Vy(t,e){switch(t){case"compositionend":return up(e);case"keypress":return e.which!==32?null:(xf=!0,_f);case"textInput":return t=e.data,t===_f&&xf?null:t;default:return null}}function Uy(t,e){if(pr)return t==="compositionend"||!Ru&&ap(t,e)?(t=op(),zs=Iu=dn=null,pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lp&&e.locale!=="ko"?null:e.data;default:return null}}var Hy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Hy[t.type]:e==="textarea"}function cp(t,e,n,r){Vh(r),e=ro(e,"onChange"),0<e.length&&(n=new Pu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _i=null,Bi=null;function Wy(t){wp(t,0)}function Vo(t){var e=vr(t);if(Lh(e))return t}function $y(t,e){if(t==="change")return e}var fp=!1;if(Xt){var Cl;if(Xt){var El="oninput"in document;if(!El){var Sf=document.createElement("div");Sf.setAttribute("oninput","return;"),El=typeof Sf.oninput=="function"}Cl=El}else Cl=!1;fp=Cl&&(!document.documentMode||9<document.documentMode)}function Cf(){_i&&(_i.detachEvent("onpropertychange",dp),Bi=_i=null)}function dp(t){if(t.propertyName==="value"&&Vo(Bi)){var e=[];cp(e,Bi,t,Su(t)),$h(Wy,e)}}function Gy(t,e,n){t==="focusin"?(Cf(),_i=e,Bi=n,_i.attachEvent("onpropertychange",dp)):t==="focusout"&&Cf()}function Ky(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vo(Bi)}function Qy(t,e){if(t==="click")return Vo(e)}function Yy(t,e){if(t==="input"||t==="change")return Vo(e)}function Xy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lt=typeof Object.is=="function"?Object.is:Xy;function bi(t,e){if(Lt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ea.call(e,s)||!Lt(t[s],e[s]))return!1}return!0}function Ef(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kf(t,e){var n=Ef(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ef(n)}}function hp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pp(){for(var t=window,e=Xs();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xs(t.document)}return e}function Au(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qy(t){var e=pp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hp(n.ownerDocument.documentElement,n)){if(r!==null&&Au(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=kf(n,i);var o=kf(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jy=Xt&&"documentMode"in document&&11>=document.documentMode,mr=null,_a=null,xi=null,xa=!1;function Tf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xa||mr==null||mr!==Xs(r)||(r=mr,"selectionStart"in r&&Au(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xi&&bi(xi,r)||(xi=r,r=ro(_a,"onSelect"),0<r.length&&(e=new Pu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mr)))}function Es(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gr={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionend:Es("Transition","TransitionEnd")},kl={},mp={};Xt&&(mp=document.createElement("div").style,"AnimationEvent"in window||(delete gr.animationend.animation,delete gr.animationiteration.animation,delete gr.animationstart.animation),"TransitionEvent"in window||delete gr.transitionend.transition);function Uo(t){if(kl[t])return kl[t];if(!gr[t])return t;var e=gr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mp)return kl[t]=e[n];return t}var gp=Uo("animationend"),vp=Uo("animationiteration"),yp=Uo("animationstart"),_p=Uo("transitionend"),xp=new Map,If="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mn(t,e){xp.set(t,e),or(e,[t])}for(var Tl=0;Tl<If.length;Tl++){var Il=If[Tl],Zy=Il.toLowerCase(),e0=Il[0].toUpperCase()+Il.slice(1);Mn(Zy,"on"+e0)}Mn(gp,"onAnimationEnd");Mn(vp,"onAnimationIteration");Mn(yp,"onAnimationStart");Mn("dblclick","onDoubleClick");Mn("focusin","onFocus");Mn("focusout","onBlur");Mn(_p,"onTransitionEnd");Lr("onMouseEnter",["mouseout","mouseover"]);Lr("onMouseLeave",["mouseout","mouseover"]);Lr("onPointerEnter",["pointerout","pointerover"]);Lr("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t0=new Set("cancel close invalid load scroll toggle".split(" ").concat(mi));function Pf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Zv(r,e,void 0,t),t.currentTarget=null}function wp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;Pf(s,l,c),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;Pf(s,l,c),i=a}}}if(Js)throw t=ma,Js=!1,ma=null,t}function ue(t,e){var n=e[ka];n===void 0&&(n=e[ka]=new Set);var r=t+"__bubble";n.has(r)||(Sp(e,t,2,!1),n.add(r))}function Pl(t,e,n){var r=0;e&&(r|=4),Sp(n,t,r,e)}var ks="_reactListening"+Math.random().toString(36).slice(2);function ji(t){if(!t[ks]){t[ks]=!0,Nh.forEach(function(n){n!=="selectionchange"&&(t0.has(n)||Pl(n,!1,t),Pl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ks]||(e[ks]=!0,Pl("selectionchange",!1,e))}}function Sp(t,e,n,r){switch(sp(e)){case 1:var s=my;break;case 4:s=gy;break;default:s=Tu}n=s.bind(null,e,n,t),s=void 0,!pa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Nl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Vn(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}$h(function(){var c=i,d=Su(n),h=[];e:{var f=xp.get(t);if(f!==void 0){var u=Pu,p=t;switch(t){case"keypress":if(Vs(n)===0)break e;case"keydown":case"keyup":u=Ay;break;case"focusin":p="focus",u=Sl;break;case"focusout":p="blur",u=Sl;break;case"beforeblur":case"afterblur":u=Sl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=_y;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Ly;break;case gp:case vp:case yp:u=Sy;break;case _p:u=Fy;break;case"scroll":u=vy;break;case"wheel":u=by;break;case"copy":case"cut":case"paste":u=Ey;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=yf}var m=(e&4)!==0,y=!m&&t==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var v=c,x;v!==null;){x=v;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,g!==null&&(E=Di(v,g),E!=null&&m.push(zi(v,E,x)))),y)break;v=v.return}0<m.length&&(f=new u(f,p,null,n,d),h.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",u=t==="mouseout"||t==="pointerout",f&&n!==da&&(p=n.relatedTarget||n.fromElement)&&(Vn(p)||p[qt]))break e;if((u||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,u?(p=n.relatedTarget||n.toElement,u=c,p=p?Vn(p):null,p!==null&&(y=lr(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(u=null,p=c),u!==p)){if(m=gf,E="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=yf,E="onPointerLeave",g="onPointerEnter",v="pointer"),y=u==null?f:vr(u),x=p==null?f:vr(p),f=new m(E,v+"leave",u,n,d),f.target=y,f.relatedTarget=x,E=null,Vn(d)===c&&(m=new m(g,v+"enter",p,n,d),m.target=x,m.relatedTarget=y,E=m),y=E,u&&p)t:{for(m=u,g=p,v=0,x=m;x;x=cr(x))v++;for(x=0,E=g;E;E=cr(E))x++;for(;0<v-x;)m=cr(m),v--;for(;0<x-v;)g=cr(g),x--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=cr(m),g=cr(g)}m=null}else m=null;u!==null&&Nf(h,f,u,m,!1),p!==null&&y!==null&&Nf(h,y,p,m,!0)}}e:{if(f=c?vr(c):window,u=f.nodeName&&f.nodeName.toLowerCase(),u==="select"||u==="input"&&f.type==="file")var _=$y;else if(wf(f))if(fp)_=Yy;else{_=Ky;var S=Gy}else(u=f.nodeName)&&u.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=Qy);if(_&&(_=_(t,c))){cp(h,_,n,d);break e}S&&S(t,f,c),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&la(f,"number",f.value)}switch(S=c?vr(c):window,t){case"focusin":(wf(S)||S.contentEditable==="true")&&(mr=S,_a=c,xi=null);break;case"focusout":xi=_a=mr=null;break;case"mousedown":xa=!0;break;case"contextmenu":case"mouseup":case"dragend":xa=!1,Tf(h,n,d);break;case"selectionchange":if(Jy)break;case"keydown":case"keyup":Tf(h,n,d)}var C;if(Ru)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else pr?ap(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(lp&&n.locale!=="ko"&&(pr||w!=="onCompositionStart"?w==="onCompositionEnd"&&pr&&(C=op()):(dn=d,Iu="value"in dn?dn.value:dn.textContent,pr=!0)),S=ro(c,w),0<S.length&&(w=new vf(w,t,null,n,d),h.push({event:w,listeners:S}),C?w.data=C:(C=up(n),C!==null&&(w.data=C)))),(C=zy?Vy(t,n):Uy(t,n))&&(c=ro(c,"onBeforeInput"),0<c.length&&(d=new vf("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=C))}wp(h,e)})}function zi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ro(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Di(t,n),i!=null&&r.unshift(zi(t,i,s)),i=Di(t,e),i!=null&&r.push(zi(t,i,s))),t=t.return}return r}function cr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nf(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,s?(a=Di(n,i),a!=null&&o.unshift(zi(n,a,l))):s||(a=Di(n,i),a!=null&&o.push(zi(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var n0=/\r\n?/g,r0=/\u0000|\uFFFD/g;function Rf(t){return(typeof t=="string"?t:""+t).replace(n0,`
`).replace(r0,"")}function Ts(t,e,n){if(e=Rf(e),Rf(t)!==e&&n)throw Error(D(425))}function io(){}var wa=null,Sa=null;function Ca(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ea=typeof setTimeout=="function"?setTimeout:void 0,i0=typeof clearTimeout=="function"?clearTimeout:void 0,Af=typeof Promise=="function"?Promise:void 0,s0=typeof queueMicrotask=="function"?queueMicrotask:typeof Af<"u"?function(t){return Af.resolve(null).then(t).catch(o0)}:Ea;function o0(t){setTimeout(function(){throw t})}function Rl(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Fi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fi(e)}function yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Kr=Math.random().toString(36).slice(2),bt="__reactFiber$"+Kr,Vi="__reactProps$"+Kr,qt="__reactContainer$"+Kr,ka="__reactEvents$"+Kr,l0="__reactListeners$"+Kr,a0="__reactHandles$"+Kr;function Vn(t){var e=t[bt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qt]||n[bt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Mf(t);t!==null;){if(n=t[bt])return n;t=Mf(t)}return e}t=n,n=t.parentNode}return null}function ls(t){return t=t[bt]||t[qt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function Ho(t){return t[Vi]||null}var Ta=[],yr=-1;function Dn(t){return{current:t}}function fe(t){0>yr||(t.current=Ta[yr],Ta[yr]=null,yr--)}function ae(t,e){yr++,Ta[yr]=t.current,t.current=e}var In={},Ke=Dn(In),rt=Dn(!1),Xn=In;function Or(t,e){var n=t.type.contextTypes;if(!n)return In;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function it(t){return t=t.childContextTypes,t!=null}function so(){fe(rt),fe(Ke)}function Df(t,e,n){if(Ke.current!==In)throw Error(D(168));ae(Ke,e),ae(rt,n)}function Cp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(D(108,Gv(t)||"Unknown",s));return ye({},n,r)}function oo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||In,Xn=Ke.current,ae(Ke,t),ae(rt,rt.current),!0}function Lf(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=Cp(t,e,Xn),r.__reactInternalMemoizedMergedChildContext=t,fe(rt),fe(Ke),ae(Ke,t)):fe(rt),ae(rt,n)}var Wt=null,Wo=!1,Al=!1;function Ep(t){Wt===null?Wt=[t]:Wt.push(t)}function u0(t){Wo=!0,Ep(t)}function Ln(){if(!Al&&Wt!==null){Al=!0;var t=0,e=ie;try{var n=Wt;for(ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wt=null,Wo=!1}catch(s){throw Wt!==null&&(Wt=Wt.slice(t+1)),Yh(Cu,Ln),s}finally{ie=e,Al=!1}}return null}var _r=[],xr=0,lo=null,ao=0,yt=[],_t=0,qn=null,$t=1,Gt="";function Bn(t,e){_r[xr++]=ao,_r[xr++]=lo,lo=t,ao=e}function kp(t,e,n){yt[_t++]=$t,yt[_t++]=Gt,yt[_t++]=qn,qn=t;var r=$t;t=Gt;var s=32-At(r)-1;r&=~(1<<s),n+=1;var i=32-At(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,$t=1<<32-At(e)+s|n<<s|r,Gt=i+t}else $t=1<<i|n<<s|r,Gt=t}function Mu(t){t.return!==null&&(Bn(t,1),kp(t,1,0))}function Du(t){for(;t===lo;)lo=_r[--xr],_r[xr]=null,ao=_r[--xr],_r[xr]=null;for(;t===qn;)qn=yt[--_t],yt[_t]=null,Gt=yt[--_t],yt[_t]=null,$t=yt[--_t],yt[_t]=null}var ht=null,dt=null,he=!1,It=null;function Tp(t,e){var n=xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Of(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ht=t,dt=yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ht=t,dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qn!==null?{id:$t,overflow:Gt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ht=t,dt=null,!0):!1;default:return!1}}function Ia(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pa(t){if(he){var e=dt;if(e){var n=e;if(!Of(t,e)){if(Ia(t))throw Error(D(418));e=yn(n.nextSibling);var r=ht;e&&Of(t,e)?Tp(r,n):(t.flags=t.flags&-4097|2,he=!1,ht=t)}}else{if(Ia(t))throw Error(D(418));t.flags=t.flags&-4097|2,he=!1,ht=t}}}function Ff(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ht=t}function Is(t){if(t!==ht)return!1;if(!he)return Ff(t),he=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ca(t.type,t.memoizedProps)),e&&(e=dt)){if(Ia(t))throw Ip(),Error(D(418));for(;e;)Tp(t,e),e=yn(e.nextSibling)}if(Ff(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dt=yn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dt=null}}else dt=ht?yn(t.stateNode.nextSibling):null;return!0}function Ip(){for(var t=dt;t;)t=yn(t.nextSibling)}function Fr(){dt=ht=null,he=!1}function Lu(t){It===null?It=[t]:It.push(t)}var c0=rn.ReactCurrentBatchConfig;function ii(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function Ps(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bf(t){var e=t._init;return e(t._payload)}function Pp(t){function e(g,v){if(t){var x=g.deletions;x===null?(g.deletions=[v],g.flags|=16):x.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function s(g,v){return g=Sn(g,v),g.index=0,g.sibling=null,g}function i(g,v,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<v?(g.flags|=2,v):x):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,v,x,E){return v===null||v.tag!==6?(v=bl(x,g.mode,E),v.return=g,v):(v=s(v,x),v.return=g,v)}function a(g,v,x,E){var _=x.type;return _===hr?d(g,v,x.props.children,E,x.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===an&&Bf(_)===v.type)?(E=s(v,x.props),E.ref=ii(g,v,x),E.return=g,E):(E=Qs(x.type,x.key,x.props,null,g.mode,E),E.ref=ii(g,v,x),E.return=g,E)}function c(g,v,x,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=jl(x,g.mode,E),v.return=g,v):(v=s(v,x.children||[]),v.return=g,v)}function d(g,v,x,E,_){return v===null||v.tag!==7?(v=Kn(x,g.mode,E,_),v.return=g,v):(v=s(v,x),v.return=g,v)}function h(g,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=bl(""+v,g.mode,x),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case vs:return x=Qs(v.type,v.key,v.props,null,g.mode,x),x.ref=ii(g,null,v),x.return=g,x;case dr:return v=jl(v,g.mode,x),v.return=g,v;case an:var E=v._init;return h(g,E(v._payload),x)}if(hi(v)||Zr(v))return v=Kn(v,g.mode,x,null),v.return=g,v;Ps(g,v)}return null}function f(g,v,x,E){var _=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:l(g,v,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case vs:return x.key===_?a(g,v,x,E):null;case dr:return x.key===_?c(g,v,x,E):null;case an:return _=x._init,f(g,v,_(x._payload),E)}if(hi(x)||Zr(x))return _!==null?null:d(g,v,x,E,null);Ps(g,x)}return null}function u(g,v,x,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(x)||null,l(v,g,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case vs:return g=g.get(E.key===null?x:E.key)||null,a(v,g,E,_);case dr:return g=g.get(E.key===null?x:E.key)||null,c(v,g,E,_);case an:var S=E._init;return u(g,v,x,S(E._payload),_)}if(hi(E)||Zr(E))return g=g.get(x)||null,d(v,g,E,_,null);Ps(v,E)}return null}function p(g,v,x,E){for(var _=null,S=null,C=v,w=v=0,T=null;C!==null&&w<x.length;w++){C.index>w?(T=C,C=null):T=C.sibling;var k=f(g,C,x[w],E);if(k===null){C===null&&(C=T);break}t&&C&&k.alternate===null&&e(g,C),v=i(k,v,w),S===null?_=k:S.sibling=k,S=k,C=T}if(w===x.length)return n(g,C),he&&Bn(g,w),_;if(C===null){for(;w<x.length;w++)C=h(g,x[w],E),C!==null&&(v=i(C,v,w),S===null?_=C:S.sibling=C,S=C);return he&&Bn(g,w),_}for(C=r(g,C);w<x.length;w++)T=u(C,g,w,x[w],E),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?w:T.key),v=i(T,v,w),S===null?_=T:S.sibling=T,S=T);return t&&C.forEach(function(I){return e(g,I)}),he&&Bn(g,w),_}function m(g,v,x,E){var _=Zr(x);if(typeof _!="function")throw Error(D(150));if(x=_.call(x),x==null)throw Error(D(151));for(var S=_=null,C=v,w=v=0,T=null,k=x.next();C!==null&&!k.done;w++,k=x.next()){C.index>w?(T=C,C=null):T=C.sibling;var I=f(g,C,k.value,E);if(I===null){C===null&&(C=T);break}t&&C&&I.alternate===null&&e(g,C),v=i(I,v,w),S===null?_=I:S.sibling=I,S=I,C=T}if(k.done)return n(g,C),he&&Bn(g,w),_;if(C===null){for(;!k.done;w++,k=x.next())k=h(g,k.value,E),k!==null&&(v=i(k,v,w),S===null?_=k:S.sibling=k,S=k);return he&&Bn(g,w),_}for(C=r(g,C);!k.done;w++,k=x.next())k=u(C,g,w,k.value,E),k!==null&&(t&&k.alternate!==null&&C.delete(k.key===null?w:k.key),v=i(k,v,w),S===null?_=k:S.sibling=k,S=k);return t&&C.forEach(function(P){return e(g,P)}),he&&Bn(g,w),_}function y(g,v,x,E){if(typeof x=="object"&&x!==null&&x.type===hr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case vs:e:{for(var _=x.key,S=v;S!==null;){if(S.key===_){if(_=x.type,_===hr){if(S.tag===7){n(g,S.sibling),v=s(S,x.props.children),v.return=g,g=v;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===an&&Bf(_)===S.type){n(g,S.sibling),v=s(S,x.props),v.ref=ii(g,S,x),v.return=g,g=v;break e}n(g,S);break}else e(g,S);S=S.sibling}x.type===hr?(v=Kn(x.props.children,g.mode,E,x.key),v.return=g,g=v):(E=Qs(x.type,x.key,x.props,null,g.mode,E),E.ref=ii(g,v,x),E.return=g,g=E)}return o(g);case dr:e:{for(S=x.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(g,v.sibling),v=s(v,x.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=jl(x,g.mode,E),v.return=g,g=v}return o(g);case an:return S=x._init,y(g,v,S(x._payload),E)}if(hi(x))return p(g,v,x,E);if(Zr(x))return m(g,v,x,E);Ps(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(g,v.sibling),v=s(v,x),v.return=g,g=v):(n(g,v),v=bl(x,g.mode,E),v.return=g,g=v),o(g)):n(g,v)}return y}var Br=Pp(!0),Np=Pp(!1),uo=Dn(null),co=null,wr=null,Ou=null;function Fu(){Ou=wr=co=null}function Bu(t){var e=uo.current;fe(uo),t._currentValue=e}function Na(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rr(t,e){co=t,Ou=wr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ze=!0),t.firstContext=null)}function St(t){var e=t._currentValue;if(Ou!==t)if(t={context:t,memoizedValue:e,next:null},wr===null){if(co===null)throw Error(D(308));wr=t,co.dependencies={lanes:0,firstContext:t}}else wr=wr.next=t;return e}var Un=null;function bu(t){Un===null?Un=[t]:Un.push(t)}function Rp(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,bu(e)):(n.next=s.next,s.next=n),e.interleaved=n,Jt(t,r)}function Jt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var un=!1;function ju(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ap(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _n(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,te&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Jt(t,n)}return s=r.interleaved,s===null?(e.next=e,bu(r)):(e.next=s.next,s.next=e),r.interleaved=e,Jt(t,n)}function Us(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eu(t,n)}}function bf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fo(t,e,n,r){var s=t.updateQueue;un=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?i=c:o.next=c,o=a;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=a))}if(i!==null){var h=s.baseState;o=0,d=c=a=null,l=i;do{var f=l.lane,u=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:u,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,m=l;switch(f=e,u=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){h=p.call(u,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(u,h,f):p,f==null)break e;h=ye({},h,f);break e;case 2:un=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else u={eventTime:u,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=u,a=h):d=d.next=u,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(a=h),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Zn|=o,t.lanes=o,t.memoizedState=h}}function jf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var as={},zt=Dn(as),Ui=Dn(as),Hi=Dn(as);function Hn(t){if(t===as)throw Error(D(174));return t}function zu(t,e){switch(ae(Hi,e),ae(Ui,t),ae(zt,as),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ua(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ua(e,t)}fe(zt),ae(zt,e)}function br(){fe(zt),fe(Ui),fe(Hi)}function Mp(t){Hn(Hi.current);var e=Hn(zt.current),n=ua(e,t.type);e!==n&&(ae(Ui,t),ae(zt,n))}function Vu(t){Ui.current===t&&(fe(zt),fe(Ui))}var me=Dn(0);function ho(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ml=[];function Uu(){for(var t=0;t<Ml.length;t++)Ml[t]._workInProgressVersionPrimary=null;Ml.length=0}var Hs=rn.ReactCurrentDispatcher,Dl=rn.ReactCurrentBatchConfig,Jn=0,ve=null,Te=null,De=null,po=!1,wi=!1,Wi=0,f0=0;function He(){throw Error(D(321))}function Hu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Lt(t[n],e[n]))return!1;return!0}function Wu(t,e,n,r,s,i){if(Jn=i,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hs.current=t===null||t.memoizedState===null?m0:g0,t=n(r,s),wi){i=0;do{if(wi=!1,Wi=0,25<=i)throw Error(D(301));i+=1,De=Te=null,e.updateQueue=null,Hs.current=v0,t=n(r,s)}while(wi)}if(Hs.current=mo,e=Te!==null&&Te.next!==null,Jn=0,De=Te=ve=null,po=!1,e)throw Error(D(300));return t}function $u(){var t=Wi!==0;return Wi=0,t}function Bt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?ve.memoizedState=De=t:De=De.next=t,De}function Ct(){if(Te===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=Te.next;var e=De===null?ve.memoizedState:De.next;if(e!==null)De=e,Te=t;else{if(t===null)throw Error(D(310));Te=t,t={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},De===null?ve.memoizedState=De=t:De=De.next=t}return De}function $i(t,e){return typeof e=="function"?e(t):e}function Ll(t){var e=Ct(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=Te,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,c=i;do{var d=c.lane;if((Jn&d)===d)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=h,o=r):a=a.next=h,ve.lanes|=d,Zn|=d}c=c.next}while(c!==null&&c!==i);a===null?o=r:a.next=l,Lt(r,e.memoizedState)||(Ze=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ve.lanes|=i,Zn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ol(t){var e=Ct(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Lt(i,e.memoizedState)||(Ze=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Dp(){}function Lp(t,e){var n=ve,r=Ct(),s=e(),i=!Lt(r.memoizedState,s);if(i&&(r.memoizedState=s,Ze=!0),r=r.queue,Gu(Bp.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||De!==null&&De.memoizedState.tag&1){if(n.flags|=2048,Gi(9,Fp.bind(null,n,r,s,e),void 0,null),Fe===null)throw Error(D(349));Jn&30||Op(n,e,s)}return s}function Op(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Fp(t,e,n,r){e.value=n,e.getSnapshot=r,bp(e)&&jp(t)}function Bp(t,e,n){return n(function(){bp(e)&&jp(t)})}function bp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Lt(t,n)}catch{return!0}}function jp(t){var e=Jt(t,1);e!==null&&Mt(e,t,1,-1)}function zf(t){var e=Bt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:t},e.queue=t,t=t.dispatch=p0.bind(null,ve,t),[e.memoizedState,t]}function Gi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zp(){return Ct().memoizedState}function Ws(t,e,n,r){var s=Bt();ve.flags|=t,s.memoizedState=Gi(1|e,n,void 0,r===void 0?null:r)}function $o(t,e,n,r){var s=Ct();r=r===void 0?null:r;var i=void 0;if(Te!==null){var o=Te.memoizedState;if(i=o.destroy,r!==null&&Hu(r,o.deps)){s.memoizedState=Gi(e,n,i,r);return}}ve.flags|=t,s.memoizedState=Gi(1|e,n,i,r)}function Vf(t,e){return Ws(8390656,8,t,e)}function Gu(t,e){return $o(2048,8,t,e)}function Vp(t,e){return $o(4,2,t,e)}function Up(t,e){return $o(4,4,t,e)}function Hp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wp(t,e,n){return n=n!=null?n.concat([t]):null,$o(4,4,Hp.bind(null,e,t),n)}function Ku(){}function $p(t,e){var n=Ct();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Gp(t,e){var n=Ct();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Kp(t,e,n){return Jn&21?(Lt(n,e)||(n=Jh(),ve.lanes|=n,Zn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ze=!0),t.memoizedState=n)}function d0(t,e){var n=ie;ie=n!==0&&4>n?n:4,t(!0);var r=Dl.transition;Dl.transition={};try{t(!1),e()}finally{ie=n,Dl.transition=r}}function Qp(){return Ct().memoizedState}function h0(t,e,n){var r=wn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yp(t))Xp(e,n);else if(n=Rp(t,e,n,r),n!==null){var s=Ye();Mt(n,t,r,s),qp(n,e,r)}}function p0(t,e,n){var r=wn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yp(t))Xp(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Lt(l,o)){var a=e.interleaved;a===null?(s.next=s,bu(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=Rp(t,e,s,r),n!==null&&(s=Ye(),Mt(n,t,r,s),qp(n,e,r))}}function Yp(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function Xp(t,e){wi=po=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Eu(t,n)}}var mo={readContext:St,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useInsertionEffect:He,useLayoutEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useMutableSource:He,useSyncExternalStore:He,useId:He,unstable_isNewReconciler:!1},m0={readContext:St,useCallback:function(t,e){return Bt().memoizedState=[t,e===void 0?null:e],t},useContext:St,useEffect:Vf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ws(4194308,4,Hp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ws(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ws(4,2,t,e)},useMemo:function(t,e){var n=Bt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Bt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=h0.bind(null,ve,t),[r.memoizedState,t]},useRef:function(t){var e=Bt();return t={current:t},e.memoizedState=t},useState:zf,useDebugValue:Ku,useDeferredValue:function(t){return Bt().memoizedState=t},useTransition:function(){var t=zf(!1),e=t[0];return t=d0.bind(null,t[1]),Bt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ve,s=Bt();if(he){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),Fe===null)throw Error(D(349));Jn&30||Op(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Vf(Bp.bind(null,r,i,t),[t]),r.flags|=2048,Gi(9,Fp.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Bt(),e=Fe.identifierPrefix;if(he){var n=Gt,r=$t;n=(r&~(1<<32-At(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=f0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},g0={readContext:St,useCallback:$p,useContext:St,useEffect:Gu,useImperativeHandle:Wp,useInsertionEffect:Vp,useLayoutEffect:Up,useMemo:Gp,useReducer:Ll,useRef:zp,useState:function(){return Ll($i)},useDebugValue:Ku,useDeferredValue:function(t){var e=Ct();return Kp(e,Te.memoizedState,t)},useTransition:function(){var t=Ll($i)[0],e=Ct().memoizedState;return[t,e]},useMutableSource:Dp,useSyncExternalStore:Lp,useId:Qp,unstable_isNewReconciler:!1},v0={readContext:St,useCallback:$p,useContext:St,useEffect:Gu,useImperativeHandle:Wp,useInsertionEffect:Vp,useLayoutEffect:Up,useMemo:Gp,useReducer:Ol,useRef:zp,useState:function(){return Ol($i)},useDebugValue:Ku,useDeferredValue:function(t){var e=Ct();return Te===null?e.memoizedState=t:Kp(e,Te.memoizedState,t)},useTransition:function(){var t=Ol($i)[0],e=Ct().memoizedState;return[t,e]},useMutableSource:Dp,useSyncExternalStore:Lp,useId:Qp,unstable_isNewReconciler:!1};function kt(t,e){if(t&&t.defaultProps){e=ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ra(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Go={isMounted:function(t){return(t=t._reactInternals)?lr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ye(),s=wn(t),i=Qt(r,s);i.payload=e,n!=null&&(i.callback=n),e=_n(t,i,s),e!==null&&(Mt(e,t,s,r),Us(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ye(),s=wn(t),i=Qt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=_n(t,i,s),e!==null&&(Mt(e,t,s,r),Us(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ye(),r=wn(t),s=Qt(n,r);s.tag=2,e!=null&&(s.callback=e),e=_n(t,s,r),e!==null&&(Mt(e,t,r,n),Us(e,t,r))}};function Uf(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!bi(n,r)||!bi(s,i):!0}function Jp(t,e,n){var r=!1,s=In,i=e.contextType;return typeof i=="object"&&i!==null?i=St(i):(s=it(e)?Xn:Ke.current,r=e.contextTypes,i=(r=r!=null)?Or(t,s):In),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Go,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Hf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Go.enqueueReplaceState(e,e.state,null)}function Aa(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ju(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=St(i):(i=it(e)?Xn:Ke.current,s.context=Or(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ra(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Go.enqueueReplaceState(s,s.state,null),fo(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function jr(t,e){try{var n="",r=e;do n+=$v(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Fl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ma(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var y0=typeof WeakMap=="function"?WeakMap:Map;function Zp(t,e,n){n=Qt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vo||(vo=!0,Ua=r),Ma(t,e)},n}function em(t,e,n){n=Qt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ma(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ma(t,e),typeof r!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Wf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new y0;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=M0.bind(null,t,e,n),e.then(t,t))}function $f(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gf(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qt(-1,1),e.tag=2,_n(n,e,1))),n.lanes|=1),t)}var _0=rn.ReactCurrentOwner,Ze=!1;function Qe(t,e,n,r){e.child=t===null?Np(e,null,n,r):Br(e,t.child,n,r)}function Kf(t,e,n,r,s){n=n.render;var i=e.ref;return Rr(e,s),r=Wu(t,e,n,r,i,s),n=$u(),t!==null&&!Ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zt(t,e,s)):(he&&n&&Mu(e),e.flags|=1,Qe(t,e,r,s),e.child)}function Qf(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!tc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,tm(t,e,i,r,s)):(t=Qs(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:bi,n(o,r)&&t.ref===e.ref)return Zt(t,e,s)}return e.flags|=1,t=Sn(i,r),t.ref=e.ref,t.return=e,e.child=t}function tm(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(bi(i,r)&&t.ref===e.ref)if(Ze=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ze=!0);else return e.lanes=t.lanes,Zt(t,e,s)}return Da(t,e,n,r,s)}function nm(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(Cr,ft),ft|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ae(Cr,ft),ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ae(Cr,ft),ft|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ae(Cr,ft),ft|=r;return Qe(t,e,s,n),e.child}function rm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Da(t,e,n,r,s){var i=it(n)?Xn:Ke.current;return i=Or(e,i),Rr(e,s),n=Wu(t,e,n,r,i,s),r=$u(),t!==null&&!Ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zt(t,e,s)):(he&&r&&Mu(e),e.flags|=1,Qe(t,e,n,s),e.child)}function Yf(t,e,n,r,s){if(it(n)){var i=!0;oo(e)}else i=!1;if(Rr(e,s),e.stateNode===null)$s(t,e),Jp(e,n,r),Aa(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=St(c):(c=it(n)?Xn:Ke.current,c=Or(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Hf(e,o,r,c),un=!1;var f=e.memoizedState;o.state=f,fo(e,r,o,s),a=e.memoizedState,l!==r||f!==a||rt.current||un?(typeof d=="function"&&(Ra(e,n,d,r),a=e.memoizedState),(l=un||Uf(e,n,l,r,f,a,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ap(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:kt(e.type,l),o.props=c,h=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=St(a):(a=it(n)?Xn:Ke.current,a=Or(e,a));var u=n.getDerivedStateFromProps;(d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==a)&&Hf(e,o,r,a),un=!1,f=e.memoizedState,o.state=f,fo(e,r,o,s);var p=e.memoizedState;l!==h||f!==p||rt.current||un?(typeof u=="function"&&(Ra(e,n,u,r),p=e.memoizedState),(c=un||Uf(e,n,c,r,f,p,a)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return La(t,e,n,r,i,s)}function La(t,e,n,r,s,i){rm(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Lf(e,n,!1),Zt(t,e,i);r=e.stateNode,_0.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Br(e,t.child,null,i),e.child=Br(e,null,l,i)):Qe(t,e,l,i),e.memoizedState=r.state,s&&Lf(e,n,!0),e.child}function im(t){var e=t.stateNode;e.pendingContext?Df(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Df(t,e.context,!1),zu(t,e.containerInfo)}function Xf(t,e,n,r,s){return Fr(),Lu(s),e.flags|=256,Qe(t,e,n,r),e.child}var Oa={dehydrated:null,treeContext:null,retryLane:0};function Fa(t){return{baseLanes:t,cachePool:null,transitions:null}}function sm(t,e,n){var r=e.pendingProps,s=me.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ae(me,s&1),t===null)return Pa(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Yo(o,r,0,null),t=Kn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Fa(n),e.memoizedState=Oa,t):Qu(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return x0(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Sn(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Sn(l,i):(i=Kn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Fa(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Oa,r}return i=t.child,t=i.sibling,r=Sn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Qu(t,e){return e=Yo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ns(t,e,n,r){return r!==null&&Lu(r),Br(e,t.child,null,n),t=Qu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function x0(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Fl(Error(D(422))),Ns(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Yo({mode:"visible",children:r.children},s,0,null),i=Kn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Br(e,t.child,null,o),e.child.memoizedState=Fa(o),e.memoizedState=Oa,i);if(!(e.mode&1))return Ns(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(D(419)),r=Fl(i,r,void 0),Ns(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ze||l){if(r=Fe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Jt(t,s),Mt(r,t,s,-1))}return ec(),r=Fl(Error(D(421))),Ns(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=D0.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,dt=yn(s.nextSibling),ht=e,he=!0,It=null,t!==null&&(yt[_t++]=$t,yt[_t++]=Gt,yt[_t++]=qn,$t=t.id,Gt=t.overflow,qn=e),e=Qu(e,r.children),e.flags|=4096,e)}function qf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Na(t.return,e,n)}function Bl(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function om(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Qe(t,e,r.children,n),r=me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qf(t,n,e);else if(t.tag===19)qf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ae(me,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ho(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bl(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ho(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bl(e,!0,n,null,i);break;case"together":Bl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $s(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=Sn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Sn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function w0(t,e,n){switch(e.tag){case 3:im(e),Fr();break;case 5:Mp(e);break;case 1:it(e.type)&&oo(e);break;case 4:zu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ae(uo,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ae(me,me.current&1),e.flags|=128,null):n&e.child.childLanes?sm(t,e,n):(ae(me,me.current&1),t=Zt(t,e,n),t!==null?t.sibling:null);ae(me,me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return om(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ae(me,me.current),r)break;return null;case 22:case 23:return e.lanes=0,nm(t,e,n)}return Zt(t,e,n)}var lm,Ba,am,um;lm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ba=function(){};am=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Hn(zt.current);var i=null;switch(n){case"input":s=sa(t,s),r=sa(t,r),i=[];break;case"select":s=ye({},s,{value:void 0}),r=ye({},r,{value:void 0}),i=[];break;case"textarea":s=aa(t,s),r=aa(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=io)}ca(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ai.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var a=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ai.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&ue("scroll",t),i||l===a||(i=[])):(i=i||[]).push(c,a))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};um=function(t,e,n,r){n!==r&&(e.flags|=4)};function si(t,e){if(!he)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function We(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function S0(t,e,n){var r=e.pendingProps;switch(Du(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(e),null;case 1:return it(e.type)&&so(),We(e),null;case 3:return r=e.stateNode,br(),fe(rt),fe(Ke),Uu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Is(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,It!==null&&($a(It),It=null))),Ba(t,e),We(e),null;case 5:Vu(e);var s=Hn(Hi.current);if(n=e.type,t!==null&&e.stateNode!=null)am(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return We(e),null}if(t=Hn(zt.current),Is(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[bt]=e,r[Vi]=i,t=(e.mode&1)!==0,n){case"dialog":ue("cancel",r),ue("close",r);break;case"iframe":case"object":case"embed":ue("load",r);break;case"video":case"audio":for(s=0;s<mi.length;s++)ue(mi[s],r);break;case"source":ue("error",r);break;case"img":case"image":case"link":ue("error",r),ue("load",r);break;case"details":ue("toggle",r);break;case"input":of(r,i),ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ue("invalid",r);break;case"textarea":af(r,i),ue("invalid",r)}ca(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ts(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ts(r.textContent,l,t),s=["children",""+l]):Ai.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ue("scroll",r)}switch(n){case"input":ys(r),lf(r,i,!0);break;case"textarea":ys(r),uf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=io)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Bh(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bt]=e,t[Vi]=r,lm(t,e,!1,!1),e.stateNode=t;e:{switch(o=fa(n,r),n){case"dialog":ue("cancel",t),ue("close",t),s=r;break;case"iframe":case"object":case"embed":ue("load",t),s=r;break;case"video":case"audio":for(s=0;s<mi.length;s++)ue(mi[s],t);s=r;break;case"source":ue("error",t),s=r;break;case"img":case"image":case"link":ue("error",t),ue("load",t),s=r;break;case"details":ue("toggle",t),s=r;break;case"input":of(t,r),s=sa(t,r),ue("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ye({},r,{value:void 0}),ue("invalid",t);break;case"textarea":af(t,r),s=aa(t,r),ue("invalid",t);break;default:s=r}ca(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?zh(t,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&bh(t,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Mi(t,a):typeof a=="number"&&Mi(t,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ai.hasOwnProperty(i)?a!=null&&i==="onScroll"&&ue("scroll",t):a!=null&&yu(t,i,a,o))}switch(n){case"input":ys(t),lf(t,r,!1);break;case"textarea":ys(t),uf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Tr(t,!!r.multiple,i,!1):r.defaultValue!=null&&Tr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=io)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return We(e),null;case 6:if(t&&e.stateNode!=null)um(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=Hn(Hi.current),Hn(zt.current),Is(e)){if(r=e.stateNode,n=e.memoizedProps,r[bt]=e,(i=r.nodeValue!==n)&&(t=ht,t!==null))switch(t.tag){case 3:Ts(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ts(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bt]=e,e.stateNode=r}return We(e),null;case 13:if(fe(me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(he&&dt!==null&&e.mode&1&&!(e.flags&128))Ip(),Fr(),e.flags|=98560,i=!1;else if(i=Is(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(D(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[bt]=e}else Fr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;We(e),i=!1}else It!==null&&($a(It),It=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||me.current&1?Pe===0&&(Pe=3):ec())),e.updateQueue!==null&&(e.flags|=4),We(e),null);case 4:return br(),Ba(t,e),t===null&&ji(e.stateNode.containerInfo),We(e),null;case 10:return Bu(e.type._context),We(e),null;case 17:return it(e.type)&&so(),We(e),null;case 19:if(fe(me),i=e.memoizedState,i===null)return We(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)si(i,!1);else{if(Pe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ho(t),o!==null){for(e.flags|=128,si(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ae(me,me.current&1|2),e.child}t=t.sibling}i.tail!==null&&we()>zr&&(e.flags|=128,r=!0,si(i,!1),e.lanes=4194304)}else{if(!r)if(t=ho(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),si(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!he)return We(e),null}else 2*we()-i.renderingStartTime>zr&&n!==1073741824&&(e.flags|=128,r=!0,si(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=we(),e.sibling=null,n=me.current,ae(me,r?n&1|2:n&1),e):(We(e),null);case 22:case 23:return Zu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ft&1073741824&&(We(e),e.subtreeFlags&6&&(e.flags|=8192)):We(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function C0(t,e){switch(Du(e),e.tag){case 1:return it(e.type)&&so(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return br(),fe(rt),fe(Ke),Uu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vu(e),null;case 13:if(fe(me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));Fr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fe(me),null;case 4:return br(),null;case 10:return Bu(e.type._context),null;case 22:case 23:return Zu(),null;case 24:return null;default:return null}}var Rs=!1,$e=!1,E0=typeof WeakSet=="function"?WeakSet:Set,j=null;function Sr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_e(t,e,r)}else n.current=null}function ba(t,e,n){try{n()}catch(r){_e(t,e,r)}}var Jf=!1;function k0(t,e){if(wa=to,t=pp(),Au(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var u;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(a=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(u=h.firstChild)!==null;)f=h,h=u;for(;;){if(h===t)break t;if(f===n&&++c===s&&(l=o),f===i&&++d===r&&(a=o),(u=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=u}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sa={focusedElem:t,selectionRange:n},to=!1,j=e;j!==null;)if(e=j,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,j=t;else for(;j!==null;){e=j;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:kt(e.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(E){_e(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,j=t;break}j=e.return}return p=Jf,Jf=!1,p}function Si(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ba(e,n,i)}s=s.next}while(s!==r)}}function Ko(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ja(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cm(t){var e=t.alternate;e!==null&&(t.alternate=null,cm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bt],delete e[Vi],delete e[ka],delete e[l0],delete e[a0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fm(t){return t.tag===5||t.tag===3||t.tag===4}function Zf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function za(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=io));else if(r!==4&&(t=t.child,t!==null))for(za(t,e,n),t=t.sibling;t!==null;)za(t,e,n),t=t.sibling}function Va(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Va(t,e,n),t=t.sibling;t!==null;)Va(t,e,n),t=t.sibling}var je=null,Tt=!1;function ln(t,e,n){for(n=n.child;n!==null;)dm(t,e,n),n=n.sibling}function dm(t,e,n){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(jo,n)}catch{}switch(n.tag){case 5:$e||Sr(n,e);case 6:var r=je,s=Tt;je=null,ln(t,e,n),je=r,Tt=s,je!==null&&(Tt?(t=je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):je.removeChild(n.stateNode));break;case 18:je!==null&&(Tt?(t=je,n=n.stateNode,t.nodeType===8?Rl(t.parentNode,n):t.nodeType===1&&Rl(t,n),Fi(t)):Rl(je,n.stateNode));break;case 4:r=je,s=Tt,je=n.stateNode.containerInfo,Tt=!0,ln(t,e,n),je=r,Tt=s;break;case 0:case 11:case 14:case 15:if(!$e&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ba(n,e,o),s=s.next}while(s!==r)}ln(t,e,n);break;case 1:if(!$e&&(Sr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){_e(n,e,l)}ln(t,e,n);break;case 21:ln(t,e,n);break;case 22:n.mode&1?($e=(r=$e)||n.memoizedState!==null,ln(t,e,n),$e=r):ln(t,e,n);break;default:ln(t,e,n)}}function ed(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new E0),e.forEach(function(r){var s=L0.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Et(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:je=l.stateNode,Tt=!1;break e;case 3:je=l.stateNode.containerInfo,Tt=!0;break e;case 4:je=l.stateNode.containerInfo,Tt=!0;break e}l=l.return}if(je===null)throw Error(D(160));dm(i,o,s),je=null,Tt=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){_e(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hm(e,t),e=e.sibling}function hm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Et(e,t),Ft(t),r&4){try{Si(3,t,t.return),Ko(3,t)}catch(m){_e(t,t.return,m)}try{Si(5,t,t.return)}catch(m){_e(t,t.return,m)}}break;case 1:Et(e,t),Ft(t),r&512&&n!==null&&Sr(n,n.return);break;case 5:if(Et(e,t),Ft(t),r&512&&n!==null&&Sr(n,n.return),t.flags&32){var s=t.stateNode;try{Mi(s,"")}catch(m){_e(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Oh(s,i),fa(l,o);var c=fa(l,i);for(o=0;o<a.length;o+=2){var d=a[o],h=a[o+1];d==="style"?zh(s,h):d==="dangerouslySetInnerHTML"?bh(s,h):d==="children"?Mi(s,h):yu(s,d,h,c)}switch(l){case"input":oa(s,i);break;case"textarea":Fh(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var u=i.value;u!=null?Tr(s,!!i.multiple,u,!1):f!==!!i.multiple&&(i.defaultValue!=null?Tr(s,!!i.multiple,i.defaultValue,!0):Tr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Vi]=i}catch(m){_e(t,t.return,m)}}break;case 6:if(Et(e,t),Ft(t),r&4){if(t.stateNode===null)throw Error(D(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){_e(t,t.return,m)}}break;case 3:if(Et(e,t),Ft(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fi(e.containerInfo)}catch(m){_e(t,t.return,m)}break;case 4:Et(e,t),Ft(t);break;case 13:Et(e,t),Ft(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qu=we())),r&4&&ed(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?($e=(c=$e)||d,Et(e,t),$e=c):Et(e,t),Ft(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(j=t,d=t.child;d!==null;){for(h=j=d;j!==null;){switch(f=j,u=f.child,f.tag){case 0:case 11:case 14:case 15:Si(4,f,f.return);break;case 1:Sr(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){_e(r,n,m)}}break;case 5:Sr(f,f.return);break;case 22:if(f.memoizedState!==null){nd(h);continue}}u!==null?(u.return=f,j=u):nd(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=jh("display",o))}catch(m){_e(t,t.return,m)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){_e(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Et(e,t),Ft(t),r&4&&ed(t);break;case 21:break;default:Et(e,t),Ft(t)}}function Ft(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fm(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Mi(s,""),r.flags&=-33);var i=Zf(t);Va(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Zf(t);za(t,l,o);break;default:throw Error(D(161))}}catch(a){_e(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function T0(t,e,n){j=t,pm(t)}function pm(t,e,n){for(var r=(t.mode&1)!==0;j!==null;){var s=j,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Rs;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||$e;l=Rs;var c=$e;if(Rs=o,($e=a)&&!c)for(j=s;j!==null;)o=j,a=o.child,o.tag===22&&o.memoizedState!==null?rd(s):a!==null?(a.return=o,j=a):rd(s);for(;i!==null;)j=i,pm(i),i=i.sibling;j=s,Rs=l,$e=c}td(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,j=i):td(t)}}function td(t){for(;j!==null;){var e=j;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$e||Ko(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$e)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:kt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&jf(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}jf(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Fi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}$e||e.flags&512&&ja(e)}catch(f){_e(e,e.return,f)}}if(e===t){j=null;break}if(n=e.sibling,n!==null){n.return=e.return,j=n;break}j=e.return}}function nd(t){for(;j!==null;){var e=j;if(e===t){j=null;break}var n=e.sibling;if(n!==null){n.return=e.return,j=n;break}j=e.return}}function rd(t){for(;j!==null;){var e=j;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ko(4,e)}catch(a){_e(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(a){_e(e,s,a)}}var i=e.return;try{ja(e)}catch(a){_e(e,i,a)}break;case 5:var o=e.return;try{ja(e)}catch(a){_e(e,o,a)}}}catch(a){_e(e,e.return,a)}if(e===t){j=null;break}var l=e.sibling;if(l!==null){l.return=e.return,j=l;break}j=e.return}}var I0=Math.ceil,go=rn.ReactCurrentDispatcher,Yu=rn.ReactCurrentOwner,wt=rn.ReactCurrentBatchConfig,te=0,Fe=null,Ee=null,Ve=0,ft=0,Cr=Dn(0),Pe=0,Ki=null,Zn=0,Qo=0,Xu=0,Ci=null,Je=null,qu=0,zr=1/0,Ht=null,vo=!1,Ua=null,xn=null,As=!1,hn=null,yo=0,Ei=0,Ha=null,Gs=-1,Ks=0;function Ye(){return te&6?we():Gs!==-1?Gs:Gs=we()}function wn(t){return t.mode&1?te&2&&Ve!==0?Ve&-Ve:c0.transition!==null?(Ks===0&&(Ks=Jh()),Ks):(t=ie,t!==0||(t=window.event,t=t===void 0?16:sp(t.type)),t):1}function Mt(t,e,n,r){if(50<Ei)throw Ei=0,Ha=null,Error(D(185));ss(t,n,r),(!(te&2)||t!==Fe)&&(t===Fe&&(!(te&2)&&(Qo|=n),Pe===4&&fn(t,Ve)),st(t,r),n===1&&te===0&&!(e.mode&1)&&(zr=we()+500,Wo&&Ln()))}function st(t,e){var n=t.callbackNode;cy(t,e);var r=eo(t,t===Fe?Ve:0);if(r===0)n!==null&&df(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&df(n),e===1)t.tag===0?u0(id.bind(null,t)):Ep(id.bind(null,t)),s0(function(){!(te&6)&&Ln()}),n=null;else{switch(Zh(r)){case 1:n=Cu;break;case 4:n=Xh;break;case 16:n=Zs;break;case 536870912:n=qh;break;default:n=Zs}n=Sm(n,mm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mm(t,e){if(Gs=-1,Ks=0,te&6)throw Error(D(327));var n=t.callbackNode;if(Ar()&&t.callbackNode!==n)return null;var r=eo(t,t===Fe?Ve:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=_o(t,r);else{e=r;var s=te;te|=2;var i=vm();(Fe!==t||Ve!==e)&&(Ht=null,zr=we()+500,Gn(t,e));do try{R0();break}catch(l){gm(t,l)}while(!0);Fu(),go.current=i,te=s,Ee!==null?e=0:(Fe=null,Ve=0,e=Pe)}if(e!==0){if(e===2&&(s=ga(t),s!==0&&(r=s,e=Wa(t,s))),e===1)throw n=Ki,Gn(t,0),fn(t,r),st(t,we()),n;if(e===6)fn(t,r);else{if(s=t.current.alternate,!(r&30)&&!P0(s)&&(e=_o(t,r),e===2&&(i=ga(t),i!==0&&(r=i,e=Wa(t,i))),e===1))throw n=Ki,Gn(t,0),fn(t,r),st(t,we()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:bn(t,Je,Ht);break;case 3:if(fn(t,r),(r&130023424)===r&&(e=qu+500-we(),10<e)){if(eo(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ye(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ea(bn.bind(null,t,Je,Ht),e);break}bn(t,Je,Ht);break;case 4:if(fn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-At(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=we()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*I0(r/1960))-r,10<r){t.timeoutHandle=Ea(bn.bind(null,t,Je,Ht),r);break}bn(t,Je,Ht);break;case 5:bn(t,Je,Ht);break;default:throw Error(D(329))}}}return st(t,we()),t.callbackNode===n?mm.bind(null,t):null}function Wa(t,e){var n=Ci;return t.current.memoizedState.isDehydrated&&(Gn(t,e).flags|=256),t=_o(t,e),t!==2&&(e=Je,Je=n,e!==null&&$a(e)),t}function $a(t){Je===null?Je=t:Je.push.apply(Je,t)}function P0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Lt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fn(t,e){for(e&=~Xu,e&=~Qo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-At(e),r=1<<n;t[n]=-1,e&=~r}}function id(t){if(te&6)throw Error(D(327));Ar();var e=eo(t,0);if(!(e&1))return st(t,we()),null;var n=_o(t,e);if(t.tag!==0&&n===2){var r=ga(t);r!==0&&(e=r,n=Wa(t,r))}if(n===1)throw n=Ki,Gn(t,0),fn(t,e),st(t,we()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bn(t,Je,Ht),st(t,we()),null}function Ju(t,e){var n=te;te|=1;try{return t(e)}finally{te=n,te===0&&(zr=we()+500,Wo&&Ln())}}function er(t){hn!==null&&hn.tag===0&&!(te&6)&&Ar();var e=te;te|=1;var n=wt.transition,r=ie;try{if(wt.transition=null,ie=1,t)return t()}finally{ie=r,wt.transition=n,te=e,!(te&6)&&Ln()}}function Zu(){ft=Cr.current,fe(Cr)}function Gn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,i0(n)),Ee!==null)for(n=Ee.return;n!==null;){var r=n;switch(Du(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&so();break;case 3:br(),fe(rt),fe(Ke),Uu();break;case 5:Vu(r);break;case 4:br();break;case 13:fe(me);break;case 19:fe(me);break;case 10:Bu(r.type._context);break;case 22:case 23:Zu()}n=n.return}if(Fe=t,Ee=t=Sn(t.current,null),Ve=ft=e,Pe=0,Ki=null,Xu=Qo=Zn=0,Je=Ci=null,Un!==null){for(e=0;e<Un.length;e++)if(n=Un[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Un=null}return t}function gm(t,e){do{var n=Ee;try{if(Fu(),Hs.current=mo,po){for(var r=ve.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}po=!1}if(Jn=0,De=Te=ve=null,wi=!1,Wi=0,Yu.current=null,n===null||n.return===null){Pe=1,Ki=e,Ee=null;break}e:{var i=t,o=n.return,l=n,a=e;if(e=Ve,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var u=$f(o);if(u!==null){u.flags&=-257,Gf(u,o,l,i,e),u.mode&1&&Wf(i,c,e),e=u,a=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(a),e.updateQueue=m}else p.add(a);break e}else{if(!(e&1)){Wf(i,c,e),ec();break e}a=Error(D(426))}}else if(he&&l.mode&1){var y=$f(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Gf(y,o,l,i,e),Lu(jr(a,l));break e}}i=a=jr(a,l),Pe!==4&&(Pe=2),Ci===null?Ci=[i]:Ci.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Zp(i,a,e);bf(i,g);break e;case 1:l=a;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(xn===null||!xn.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=em(i,l,e);bf(i,E);break e}}i=i.return}while(i!==null)}_m(n)}catch(_){e=_,Ee===n&&n!==null&&(Ee=n=n.return);continue}break}while(!0)}function vm(){var t=go.current;return go.current=mo,t===null?mo:t}function ec(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),Fe===null||!(Zn&268435455)&&!(Qo&268435455)||fn(Fe,Ve)}function _o(t,e){var n=te;te|=2;var r=vm();(Fe!==t||Ve!==e)&&(Ht=null,Gn(t,e));do try{N0();break}catch(s){gm(t,s)}while(!0);if(Fu(),te=n,go.current=r,Ee!==null)throw Error(D(261));return Fe=null,Ve=0,Pe}function N0(){for(;Ee!==null;)ym(Ee)}function R0(){for(;Ee!==null&&!ty();)ym(Ee)}function ym(t){var e=wm(t.alternate,t,ft);t.memoizedProps=t.pendingProps,e===null?_m(t):Ee=e,Yu.current=null}function _m(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=C0(n,e),n!==null){n.flags&=32767,Ee=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pe=6,Ee=null;return}}else if(n=S0(n,e,ft),n!==null){Ee=n;return}if(e=e.sibling,e!==null){Ee=e;return}Ee=e=t}while(e!==null);Pe===0&&(Pe=5)}function bn(t,e,n){var r=ie,s=wt.transition;try{wt.transition=null,ie=1,A0(t,e,n,r)}finally{wt.transition=s,ie=r}return null}function A0(t,e,n,r){do Ar();while(hn!==null);if(te&6)throw Error(D(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(fy(t,i),t===Fe&&(Ee=Fe=null,Ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||As||(As=!0,Sm(Zs,function(){return Ar(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=wt.transition,wt.transition=null;var o=ie;ie=1;var l=te;te|=4,Yu.current=null,k0(t,n),hm(n,t),qy(Sa),to=!!wa,Sa=wa=null,t.current=n,T0(n),ny(),te=l,ie=o,wt.transition=i}else t.current=n;if(As&&(As=!1,hn=t,yo=s),i=t.pendingLanes,i===0&&(xn=null),sy(n.stateNode),st(t,we()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(vo)throw vo=!1,t=Ua,Ua=null,t;return yo&1&&t.tag!==0&&Ar(),i=t.pendingLanes,i&1?t===Ha?Ei++:(Ei=0,Ha=t):Ei=0,Ln(),null}function Ar(){if(hn!==null){var t=Zh(yo),e=wt.transition,n=ie;try{if(wt.transition=null,ie=16>t?16:t,hn===null)var r=!1;else{if(t=hn,hn=null,yo=0,te&6)throw Error(D(331));var s=te;for(te|=4,j=t.current;j!==null;){var i=j,o=i.child;if(j.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(j=c;j!==null;){var d=j;switch(d.tag){case 0:case 11:case 15:Si(8,d,i)}var h=d.child;if(h!==null)h.return=d,j=h;else for(;j!==null;){d=j;var f=d.sibling,u=d.return;if(cm(d),d===c){j=null;break}if(f!==null){f.return=u,j=f;break}j=u}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}j=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,j=o;else e:for(;j!==null;){if(i=j,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Si(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,j=g;break e}j=i.return}}var v=t.current;for(j=v;j!==null;){o=j;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,j=x;else e:for(o=v;j!==null;){if(l=j,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ko(9,l)}}catch(_){_e(l,l.return,_)}if(l===o){j=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,j=E;break e}j=l.return}}if(te=s,Ln(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(jo,t)}catch{}r=!0}return r}finally{ie=n,wt.transition=e}}return!1}function sd(t,e,n){e=jr(n,e),e=Zp(t,e,1),t=_n(t,e,1),e=Ye(),t!==null&&(ss(t,1,e),st(t,e))}function _e(t,e,n){if(t.tag===3)sd(t,t,n);else for(;e!==null;){if(e.tag===3){sd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xn===null||!xn.has(r))){t=jr(n,t),t=em(e,t,1),e=_n(e,t,1),t=Ye(),e!==null&&(ss(e,1,t),st(e,t));break}}e=e.return}}function M0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ye(),t.pingedLanes|=t.suspendedLanes&n,Fe===t&&(Ve&n)===n&&(Pe===4||Pe===3&&(Ve&130023424)===Ve&&500>we()-qu?Gn(t,0):Xu|=n),st(t,e)}function xm(t,e){e===0&&(t.mode&1?(e=ws,ws<<=1,!(ws&130023424)&&(ws=4194304)):e=1);var n=Ye();t=Jt(t,e),t!==null&&(ss(t,e,n),st(t,n))}function D0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xm(t,n)}function L0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),xm(t,n)}var wm;wm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rt.current)Ze=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ze=!1,w0(t,e,n);Ze=!!(t.flags&131072)}else Ze=!1,he&&e.flags&1048576&&kp(e,ao,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$s(t,e),t=e.pendingProps;var s=Or(e,Ke.current);Rr(e,n),s=Wu(null,e,r,t,s,n);var i=$u();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,it(r)?(i=!0,oo(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ju(e),s.updater=Go,e.stateNode=s,s._reactInternals=e,Aa(e,r,t,n),e=La(null,e,r,!0,i,n)):(e.tag=0,he&&i&&Mu(e),Qe(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch($s(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=F0(r),t=kt(r,t),s){case 0:e=Da(null,e,r,t,n);break e;case 1:e=Yf(null,e,r,t,n);break e;case 11:e=Kf(null,e,r,t,n);break e;case 14:e=Qf(null,e,r,kt(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),Da(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),Yf(t,e,r,s,n);case 3:e:{if(im(e),t===null)throw Error(D(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Ap(t,e),fo(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=jr(Error(D(423)),e),e=Xf(t,e,r,n,s);break e}else if(r!==s){s=jr(Error(D(424)),e),e=Xf(t,e,r,n,s);break e}else for(dt=yn(e.stateNode.containerInfo.firstChild),ht=e,he=!0,It=null,n=Np(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fr(),r===s){e=Zt(t,e,n);break e}Qe(t,e,r,n)}e=e.child}return e;case 5:return Mp(e),t===null&&Pa(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ca(r,s)?o=null:i!==null&&Ca(r,i)&&(e.flags|=32),rm(t,e),Qe(t,e,o,n),e.child;case 6:return t===null&&Pa(e),null;case 13:return sm(t,e,n);case 4:return zu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Br(e,null,r,n):Qe(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),Kf(t,e,r,s,n);case 7:return Qe(t,e,e.pendingProps,n),e.child;case 8:return Qe(t,e,e.pendingProps.children,n),e.child;case 12:return Qe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ae(uo,r._currentValue),r._currentValue=o,i!==null)if(Lt(i.value,o)){if(i.children===s.children&&!rt.current){e=Zt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=Qt(-1,n&-n),a.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Na(i.return,n,e),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Na(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Qe(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Rr(e,n),s=St(s),r=r(s),e.flags|=1,Qe(t,e,r,n),e.child;case 14:return r=e.type,s=kt(r,e.pendingProps),s=kt(r.type,s),Qf(t,e,r,s,n);case 15:return tm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),$s(t,e),e.tag=1,it(r)?(t=!0,oo(e)):t=!1,Rr(e,n),Jp(e,r,s),Aa(e,r,s,n),La(null,e,r,!0,t,n);case 19:return om(t,e,n);case 22:return nm(t,e,n)}throw Error(D(156,e.tag))};function Sm(t,e){return Yh(t,e)}function O0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(t,e,n,r){return new O0(t,e,n,r)}function tc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function F0(t){if(typeof t=="function")return tc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xu)return 11;if(t===wu)return 14}return 2}function Sn(t,e){var n=t.alternate;return n===null?(n=xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qs(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")tc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hr:return Kn(n.children,s,i,e);case _u:o=8,s|=8;break;case ta:return t=xt(12,n,e,s|2),t.elementType=ta,t.lanes=i,t;case na:return t=xt(13,n,e,s),t.elementType=na,t.lanes=i,t;case ra:return t=xt(19,n,e,s),t.elementType=ra,t.lanes=i,t;case Mh:return Yo(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rh:o=10;break e;case Ah:o=9;break e;case xu:o=11;break e;case wu:o=14;break e;case an:o=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=xt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Kn(t,e,n,r){return t=xt(7,t,r,e),t.lanes=n,t}function Yo(t,e,n,r){return t=xt(22,t,r,e),t.elementType=Mh,t.lanes=n,t.stateNode={isHidden:!1},t}function bl(t,e,n){return t=xt(6,t,null,e),t.lanes=n,t}function jl(t,e,n){return e=xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function B0(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_l(0),this.expirationTimes=_l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_l(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function nc(t,e,n,r,s,i,o,l,a){return t=new B0(t,e,n,l,a),e===1?(e=1,i===!0&&(e|=8)):e=0,i=xt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ju(i),t}function b0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Cm(t){if(!t)return In;t=t._reactInternals;e:{if(lr(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(it(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(it(n))return Cp(t,n,e)}return e}function Em(t,e,n,r,s,i,o,l,a){return t=nc(n,r,!0,t,s,i,o,l,a),t.context=Cm(null),n=t.current,r=Ye(),s=wn(n),i=Qt(r,s),i.callback=e??null,_n(n,i,s),t.current.lanes=s,ss(t,s,r),st(t,r),t}function Xo(t,e,n,r){var s=e.current,i=Ye(),o=wn(s);return n=Cm(n),e.context===null?e.context=n:e.pendingContext=n,e=Qt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_n(s,e,o),t!==null&&(Mt(t,s,o,i),Us(t,s,o)),o}function xo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function od(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rc(t,e){od(t,e),(t=t.alternate)&&od(t,e)}function j0(){return null}var km=typeof reportError=="function"?reportError:function(t){console.error(t)};function ic(t){this._internalRoot=t}qo.prototype.render=ic.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));Xo(t,e,null,null)};qo.prototype.unmount=ic.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;er(function(){Xo(null,t,null,null)}),e[qt]=null}};function qo(t){this._internalRoot=t}qo.prototype.unstable_scheduleHydration=function(t){if(t){var e=np();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cn.length&&e!==0&&e<cn[n].priority;n++);cn.splice(n,0,t),n===0&&ip(t)}};function sc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ld(){}function z0(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=xo(o);i.call(c)}}var o=Em(e,r,t,0,null,!1,!1,"",ld);return t._reactRootContainer=o,t[qt]=o.current,ji(t.nodeType===8?t.parentNode:t),er(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=xo(a);l.call(c)}}var a=nc(t,0,!1,null,null,!1,!1,"",ld);return t._reactRootContainer=a,t[qt]=a.current,ji(t.nodeType===8?t.parentNode:t),er(function(){Xo(e,a,n,r)}),a}function Zo(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=xo(o);l.call(a)}}Xo(e,o,t,s)}else o=z0(n,e,t,s,r);return xo(o)}ep=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pi(e.pendingLanes);n!==0&&(Eu(e,n|1),st(e,we()),!(te&6)&&(zr=we()+500,Ln()))}break;case 13:er(function(){var r=Jt(t,1);if(r!==null){var s=Ye();Mt(r,t,1,s)}}),rc(t,1)}};ku=function(t){if(t.tag===13){var e=Jt(t,134217728);if(e!==null){var n=Ye();Mt(e,t,134217728,n)}rc(t,134217728)}};tp=function(t){if(t.tag===13){var e=wn(t),n=Jt(t,e);if(n!==null){var r=Ye();Mt(n,t,e,r)}rc(t,e)}};np=function(){return ie};rp=function(t,e){var n=ie;try{return ie=t,e()}finally{ie=n}};ha=function(t,e,n){switch(e){case"input":if(oa(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ho(r);if(!s)throw Error(D(90));Lh(r),oa(r,s)}}}break;case"textarea":Fh(t,n);break;case"select":e=n.value,e!=null&&Tr(t,!!n.multiple,e,!1)}};Hh=Ju;Wh=er;var V0={usingClientEntryPoint:!1,Events:[ls,vr,Ho,Vh,Uh,Ju]},oi={findFiberByHostInstance:Vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},U0={bundleType:oi.bundleType,version:oi.version,rendererPackageName:oi.rendererPackageName,rendererConfig:oi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Kh(t),t===null?null:t.stateNode},findFiberByHostInstance:oi.findFiberByHostInstance||j0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ms=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ms.isDisabled&&Ms.supportsFiber)try{jo=Ms.inject(U0),jt=Ms}catch{}}mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V0;mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sc(e))throw Error(D(200));return b0(t,e,null,n)};mt.createRoot=function(t,e){if(!sc(t))throw Error(D(299));var n=!1,r="",s=km;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=nc(t,1,!1,null,null,n,!1,r,s),t[qt]=e.current,ji(t.nodeType===8?t.parentNode:t),new ic(e)};mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=Kh(e),t=t===null?null:t.stateNode,t};mt.flushSync=function(t){return er(t)};mt.hydrate=function(t,e,n){if(!Jo(e))throw Error(D(200));return Zo(null,t,e,!0,n)};mt.hydrateRoot=function(t,e,n){if(!sc(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=km;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Em(e,null,t,1,n??null,s,!1,i,o),t[qt]=e.current,ji(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new qo(e)};mt.render=function(t,e,n){if(!Jo(e))throw Error(D(200));return Zo(null,t,e,!1,n)};mt.unmountComponentAtNode=function(t){if(!Jo(t))throw Error(D(40));return t._reactRootContainer?(er(function(){Zo(null,null,t,!1,function(){t._reactRootContainer=null,t[qt]=null})}),!0):!1};mt.unstable_batchedUpdates=Ju;mt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jo(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return Zo(t,e,n,!1,r)};mt.version="18.3.1-next-f1338f8080-20240426";function Tm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tm)}catch(t){console.error(t)}}Tm(),Th.exports=mt;var H0=Th.exports,ad=H0;Zl.createRoot=ad.createRoot,Zl.hydrateRoot=ad.hydrateRoot;const W0="modulepreload",$0=function(t){return"/"+t},ud={},ne=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(a=>{if(a=$0(a),a in ud)return;ud[a]=!0;const c=a.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":W0,c||(h.as="script"),h.crossOrigin="",h.href=a,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((f,u)=>{h.addEventListener("load",f),h.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${a}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function G0(){return Object.keys(Object.assign({"/public/videos/Climbing10.mp4":()=>ne(()=>import("./Climbing10-B-n82qxB.js"),[]).then(n=>n.default),"/public/videos/Climbing11.mp4":()=>ne(()=>import("./Climbing11-Bmwz4XX5.js"),[]).then(n=>n.default),"/public/videos/Climbing13.mp4":()=>ne(()=>import("./Climbing13-CHeAh02h.js"),[]).then(n=>n.default),"/public/videos/Climbing14.mp4":()=>ne(()=>import("./Climbing14-Ba2DaYBh.js"),[]).then(n=>n.default),"/public/videos/Climbing16.mp4":()=>ne(()=>import("./Climbing16-qoL-dlWx.js"),[]).then(n=>n.default),"/public/videos/Climbing22.mp4":()=>ne(()=>import("./Climbing22-BN_G1cdp.js"),[]).then(n=>n.default),"/public/videos/Climbing23.mp4":()=>ne(()=>import("./Climbing23-C-w8eRLU.js"),[]).then(n=>n.default),"/public/videos/Climbing24.mp4":()=>ne(()=>import("./Climbing24-CzQEYZ_7.js"),[]).then(n=>n.default),"/public/videos/Climbing28.mp4":()=>ne(()=>import("./Climbing28-B80Yh1fW.js"),[]).then(n=>n.default),"/public/videos/Climbing29.mp4":()=>ne(()=>import("./Climbing29-Dy7IhDm0.js"),[]).then(n=>n.default),"/public/videos/Climbing4.mp4":()=>ne(()=>import("./Climbing4-CfBdcWiG.js"),[]).then(n=>n.default),"/public/videos/Climbing6.mp4":()=>ne(()=>import("./Climbing6-C3B-CfM1.js"),[]).then(n=>n.default),"/public/videos/Climbing7.mp4":()=>ne(()=>import("./Climbing7-B1mb5z2s.js"),[]).then(n=>n.default),"/public/videos/Climbing8.mp4":()=>ne(()=>import("./Climbing8-Cf2kU-Ay.js"),[]).then(n=>n.default),"/public/videos/Climbing9.mp4":()=>ne(()=>import("./Climbing9-DQueWqyH.js"),[]).then(n=>n.default),"/public/videos/Climbingggg.mp4":()=>ne(()=>import("./Climbingggg-wt7PthUj.js"),[]).then(n=>n.default),"/public/videos/climbing.mp4":()=>ne(()=>import("./climbing-Id12KmI9.js"),[]).then(n=>n.default),"/public/videos/climbing445.mp4":()=>ne(()=>import("./climbing445-DPqkAXKR.js"),[]).then(n=>n.default),"/public/videos/climbing_111.mp4":()=>ne(()=>import("./climbing_111-F85L1fM0.js"),[]).then(n=>n.default),"/public/videos/climbing___.mp4":()=>ne(()=>import("./climbing___-DswGoeqy.js"),[]).then(n=>n.default),"/public/videos/climbingbercy.mp4":()=>ne(()=>import("./climbingbercy-DUsWW204.js"),[]).then(n=>n.default),"/public/videos/climbingcc.mp4":()=>ne(()=>import("./climbingcc-gusDE7m-.js"),[]).then(n=>n.default),"/public/videos/climbingdistrict.mp4":()=>ne(()=>import("./climbingdistrict-CfEVCLD7.js"),[]).then(n=>n.default),"/public/videos/climbingescala.mp4":()=>ne(()=>import("./climbingescala-CNqvIMqI.js"),[]).then(n=>n.default),"/public/videos/climbingharr.mp4":()=>ne(()=>import("./climbingharr-Qoqg49GG.js"),[]).then(n=>n.default),"/public/videos/climbingmouais.mp4":()=>ne(()=>import("./climbingmouais-DrhY5mH2.js"),[]).then(n=>n.default),"/public/videos/climbingos.mp4":()=>ne(()=>import("./climbingos-cWxEVsrf.js"),[]).then(n=>n.default),"/public/videos/climbingouais.mp4":()=>ne(()=>import("./climbingouais-BSlJODfW.js"),[]).then(n=>n.default),"/public/videos/climbingout.mp4":()=>ne(()=>import("./climbingout-BSl_q3mG.js"),[]).then(n=>n.default),"/public/videos/climbinguuuu.mp4":()=>ne(()=>import("./climbinguuuu-BrAmN3Q9.js"),[]).then(n=>n.default),"/public/videos/theclimbing.mp4":()=>ne(()=>import("./theclimbing-ChjRwIIp.js"),[]).then(n=>n.default)})).map(n=>n.replace("/public",""))}function K0(t,e){if(!e||!t||t.length===0)return[];const n=e.toLowerCase().split(" ");return t.filter(r=>{const s=r.split("/").pop().toLowerCase();return n.some(i=>s.includes(i))})}function cd(t,e=[],n=4){if(!t||t.length===0)return null;if(t.length>n&&e.length>0){const s=t.filter(i=>!e.includes(i));if(s.length>0){const i=Math.floor(Math.random()*s.length);return s[i]}}const r=Math.floor(Math.random()*t.length);return t[r]}const Q0=({videos:t,hobbyName:e,videoHistoryRef:n,onMouseEnter:r,onMouseLeave:s})=>{const i=Z.useRef(null),[o,l]=Z.useState(()=>cd(t,n.current,10)),a=()=>{o&&!n.current.includes(o)&&(n.current=[o,...n.current].slice(0,10));const c=cd(t,n.current,10);c&&l(c)};return Z.useEffect(()=>{const c=i.current;if(c&&o){n.current.includes(o)||(n.current=[o,...n.current].slice(0,10));const d=c.play();d!==void 0&&d.catch(()=>{});const h=()=>{a()};return c.addEventListener("ended",h),()=>{c.removeEventListener("ended",h),c.pause(),c.currentTime=0}}},[o]),o?N.jsx("div",{className:"hobby-overlay",onMouseEnter:r,onMouseLeave:s,children:N.jsx("div",{className:"hobby-overlay-content",children:N.jsx("video",{ref:i,className:"hobby-video",src:o,muted:!0,playsInline:!0,preload:"metadata"})})}):null},Y0=({skill:t})=>{const e=()=>{const n=t.name.toLowerCase(),s={java:{icon:"",color:"#f89820",desc:"Enterprise Backend"},spring:{icon:"",color:"#6db33f",desc:"Spring Framework"},"spring boot":{icon:"",color:"#6db33f",desc:"Microservices"},kotlin:{icon:"",color:"#7f52ff",desc:"Modern JVM"},react:{icon:"",color:"#61dafb",desc:"UI Library"},angular:{icon:"",color:"#dd0031",desc:"Full Framework"},"node.js":{icon:"",color:"#339933",desc:"JavaScript Runtime"},typescript:{icon:"",color:"#3178c6",desc:"Typed JavaScript"},python:{icon:"",color:"#3776ab",desc:"Data & AI"},docker:{icon:"",color:"#2496ed",desc:"Containers"},kubernetes:{icon:"",color:"#326ce5",desc:"Orchestration"},kafka:{icon:"",color:"#231f20",desc:"Event Streaming"},postgresql:{icon:"",color:"#336791",desc:"SQL Database"},mongodb:{icon:"",color:"#47a248",desc:"NoSQL Database"},git:{icon:"",color:"#f05032",desc:"Version Control"},jenkins:{icon:"",color:"#d24939",desc:"CI/CD"},elasticsearch:{icon:"",color:"#005571",desc:"Search Engine"},redis:{icon:"",color:"#dc382d",desc:"In-Memory DB"}}[n]||{icon:"",color:"#0395DE",desc:t.category||"Technology"};return N.jsxs("div",{className:"demo-content",children:[N.jsx("div",{className:"demo-icon",style:{color:s.color},children:s.icon}),N.jsxs("div",{className:"demo-info",children:[N.jsx("h5",{className:"demo-skill-name",children:t.name}),N.jsx("p",{className:"demo-description",children:s.desc}),t.category&&N.jsx("span",{className:"demo-category",children:t.category})]}),N.jsx("div",{className:"demo-level-indicator",children:N.jsx("div",{className:"level-dots",children:[...Array(5)].map((i,o)=>N.jsx("div",{className:`level-dot ${o<t.level/20?"active":""}`},o))})})]})};return N.jsx("div",{className:"skill-demo",children:e()})},X0=({experience:t})=>{var s;const e=i=>{if(!i)return null;const o=i.match(/(\w+\.?\s*\d{4})\s*--\s*(\w+\.?\s*\d{4}|Present)/i);return o?(o[1],o[2].toLowerCase().includes("present")?"En cours":i):i},n=((s=t.technologies)==null?void 0:s.slice(0,3))||[],r=i=>i.toLowerCase().includes("full-time")||i.toLowerCase().includes("developer")&&!i.toLowerCase().includes("intern")?"CDI":i.toLowerCase().includes("intern")?"Stage":"Mission";return N.jsx("div",{className:"experience-demo",children:N.jsxs("div",{className:"experience-demo-content",children:[N.jsxs("div",{className:"demo-header",children:[N.jsx("h4",{className:"demo-title",children:t.role}),N.jsx("span",{className:"demo-company",children:t.company})]}),N.jsxs("div",{className:"demo-highlights",children:[N.jsxs("div",{className:"highlight-item",children:[N.jsx("div",{className:"highlight-icon",children:""}),N.jsxs("div",{className:"highlight-text",children:[N.jsx("span",{className:"highlight-label",children:"Type"}),N.jsx("span",{className:"highlight-value",children:r(t.role)})]})]}),N.jsxs("div",{className:"highlight-item",children:[N.jsx("div",{className:"highlight-icon",children:""}),N.jsxs("div",{className:"highlight-text",children:[N.jsx("span",{className:"highlight-label",children:"Dure"}),N.jsx("span",{className:"highlight-value",children:e(t.period)})]})]}),n.length>0&&N.jsxs("div",{className:"highlight-item",children:[N.jsx("div",{className:"highlight-icon",children:""}),N.jsxs("div",{className:"highlight-text",children:[N.jsx("span",{className:"highlight-label",children:"Stack principale"}),N.jsx("span",{className:"highlight-value",children:n.join("  ")})]})]})]})]})})};var Im={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(t,e){(function(r,s){t.exports=s()})(hl,function(){return function(n){var r={};function s(i){if(r[i])return r[i].exports;var o=r[i]={i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=n,s.c=r,s.d=function(i,o,l){s.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:l})},s.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.t=function(i,o){if(o&1&&(i=s(i)),o&8||o&4&&typeof i=="object"&&i&&i.__esModule)return i;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:i}),o&2&&typeof i!="string")for(var a in i)s.d(l,a,(function(c){return i[c]}).bind(null,a));return l},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=20)}([function(n,r){var s={};n.exports=s,function(){s._baseDelta=1e3/60,s._nextId=0,s._seed=0,s._nowStartTime=+new Date,s._warnedOnce={},s._decomp=null,s.extend=function(o,l){var a,c;typeof l=="boolean"?(a=2,c=l):(a=1,c=!0);for(var d=a;d<arguments.length;d++){var h=arguments[d];if(h)for(var f in h)c&&h[f]&&h[f].constructor===Object&&(!o[f]||o[f].constructor===Object)?(o[f]=o[f]||{},s.extend(o[f],c,h[f])):o[f]=h[f]}return o},s.clone=function(o,l){return s.extend({},l,o)},s.keys=function(o){if(Object.keys)return Object.keys(o);var l=[];for(var a in o)l.push(a);return l},s.values=function(o){var l=[];if(Object.keys){for(var a=Object.keys(o),c=0;c<a.length;c++)l.push(o[a[c]]);return l}for(var d in o)l.push(o[d]);return l},s.get=function(o,l,a,c){l=l.split(".").slice(a,c);for(var d=0;d<l.length;d+=1)o=o[l[d]];return o},s.set=function(o,l,a,c,d){var h=l.split(".").slice(c,d);return s.get(o,l,0,-1)[h[h.length-1]]=a,a},s.shuffle=function(o){for(var l=o.length-1;l>0;l--){var a=Math.floor(s.random()*(l+1)),c=o[l];o[l]=o[a],o[a]=c}return o},s.choose=function(o){return o[Math.floor(s.random()*o.length)]},s.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},s.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},s.isFunction=function(o){return typeof o=="function"},s.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},s.isString=function(o){return toString.call(o)==="[object String]"},s.clamp=function(o,l,a){return o<l?l:o>a?a:o},s.sign=function(o){return o<0?-1:1},s.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-s._nowStartTime},s.random=function(o,l){return o=typeof o<"u"?o:0,l=typeof l<"u"?l:1,o+i()*(l-o)};var i=function(){return s._seed=(s._seed*9301+49297)%233280,s._seed/233280};s.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},s.logLevel=1,s.log=function(){console&&s.logLevel>0&&s.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.info=function(){console&&s.logLevel>0&&s.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.warn=function(){console&&s.logLevel>0&&s.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");s._warnedOnce[o]||(s.warn(o),s._warnedOnce[o]=!0)},s.deprecated=function(o,l,a){o[l]=s.chain(function(){s.warnOnce(" deprecated ",a)},o[l])},s.nextId=function(){return s._nextId++},s.indexOf=function(o,l){if(o.indexOf)return o.indexOf(l);for(var a=0;a<o.length;a++)if(o[a]===l)return a;return-1},s.map=function(o,l){if(o.map)return o.map(l);for(var a=[],c=0;c<o.length;c+=1)a.push(l(o[c]));return a},s.topologicalSort=function(o){var l=[],a=[],c=[];for(var d in o)!a[d]&&!c[d]&&s._topologicalSort(d,a,c,o,l);return l},s._topologicalSort=function(o,l,a,c,d){var h=c[o]||[];a[o]=!0;for(var f=0;f<h.length;f+=1){var u=h[f];a[u]||l[u]||s._topologicalSort(u,l,a,c,d)}a[o]=!1,l[o]=!0,d.push(o)},s.chain=function(){for(var o=[],l=0;l<arguments.length;l+=1){var a=arguments[l];a._chained?o.push.apply(o,a._chained):o.push(a)}var c=function(){for(var d,h=new Array(arguments.length),f=0,u=arguments.length;f<u;f++)h[f]=arguments[f];for(f=0;f<o.length;f+=1){var p=o[f].apply(d,h);typeof p<"u"&&(d=p)}return d};return c._chained=o,c},s.chainPathBefore=function(o,l,a){return s.set(o,l,s.chain(a,s.get(o,l)))},s.chainPathAfter=function(o,l,a){return s.set(o,l,s.chain(s.get(o,l),a))},s.setDecomp=function(o){s._decomp=o},s.getDecomp=function(){var o=s._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof hl<"u"&&(o=hl.decomp)}catch{o=null}return o}}()},function(n,r){var s={};n.exports=s,function(){s.create=function(i){var o={min:{x:0,y:0},max:{x:0,y:0}};return i&&s.update(o,i),o},s.update=function(i,o,l){i.min.x=1/0,i.max.x=-1/0,i.min.y=1/0,i.max.y=-1/0;for(var a=0;a<o.length;a++){var c=o[a];c.x>i.max.x&&(i.max.x=c.x),c.x<i.min.x&&(i.min.x=c.x),c.y>i.max.y&&(i.max.y=c.y),c.y<i.min.y&&(i.min.y=c.y)}l&&(l.x>0?i.max.x+=l.x:i.min.x+=l.x,l.y>0?i.max.y+=l.y:i.min.y+=l.y)},s.contains=function(i,o){return o.x>=i.min.x&&o.x<=i.max.x&&o.y>=i.min.y&&o.y<=i.max.y},s.overlaps=function(i,o){return i.min.x<=o.max.x&&i.max.x>=o.min.x&&i.max.y>=o.min.y&&i.min.y<=o.max.y},s.translate=function(i,o){i.min.x+=o.x,i.max.x+=o.x,i.min.y+=o.y,i.max.y+=o.y},s.shift=function(i,o){var l=i.max.x-i.min.x,a=i.max.y-i.min.y;i.min.x=o.x,i.max.x=o.x+l,i.min.y=o.y,i.max.y=o.y+a}}()},function(n,r){var s={};n.exports=s,function(){s.create=function(i,o){return{x:i||0,y:o||0}},s.clone=function(i){return{x:i.x,y:i.y}},s.magnitude=function(i){return Math.sqrt(i.x*i.x+i.y*i.y)},s.magnitudeSquared=function(i){return i.x*i.x+i.y*i.y},s.rotate=function(i,o,l){var a=Math.cos(o),c=Math.sin(o);l||(l={});var d=i.x*a-i.y*c;return l.y=i.x*c+i.y*a,l.x=d,l},s.rotateAbout=function(i,o,l,a){var c=Math.cos(o),d=Math.sin(o);a||(a={});var h=l.x+((i.x-l.x)*c-(i.y-l.y)*d);return a.y=l.y+((i.x-l.x)*d+(i.y-l.y)*c),a.x=h,a},s.normalise=function(i){var o=s.magnitude(i);return o===0?{x:0,y:0}:{x:i.x/o,y:i.y/o}},s.dot=function(i,o){return i.x*o.x+i.y*o.y},s.cross=function(i,o){return i.x*o.y-i.y*o.x},s.cross3=function(i,o,l){return(o.x-i.x)*(l.y-i.y)-(o.y-i.y)*(l.x-i.x)},s.add=function(i,o,l){return l||(l={}),l.x=i.x+o.x,l.y=i.y+o.y,l},s.sub=function(i,o,l){return l||(l={}),l.x=i.x-o.x,l.y=i.y-o.y,l},s.mult=function(i,o){return{x:i.x*o,y:i.y*o}},s.div=function(i,o){return{x:i.x/o,y:i.y/o}},s.perp=function(i,o){return o=o===!0?-1:1,{x:o*-i.y,y:o*i.x}},s.neg=function(i){return{x:-i.x,y:-i.y}},s.angle=function(i,o){return Math.atan2(o.y-i.y,o.x-i.x)},s._temp=[s.create(),s.create(),s.create(),s.create(),s.create(),s.create()]}()},function(n,r,s){var i={};n.exports=i;var o=s(2),l=s(0);(function(){i.create=function(a,c){for(var d=[],h=0;h<a.length;h++){var f=a[h],u={x:f.x,y:f.y,index:h,body:c,isInternal:!1};d.push(u)}return d},i.fromPath=function(a,c){var d=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,h=[];return a.replace(d,function(f,u,p){h.push({x:parseFloat(u),y:parseFloat(p)})}),i.create(h,c)},i.centre=function(a){for(var c=i.area(a,!0),d={x:0,y:0},h,f,u,p=0;p<a.length;p++)u=(p+1)%a.length,h=o.cross(a[p],a[u]),f=o.mult(o.add(a[p],a[u]),h),d=o.add(d,f);return o.div(d,6*c)},i.mean=function(a){for(var c={x:0,y:0},d=0;d<a.length;d++)c.x+=a[d].x,c.y+=a[d].y;return o.div(c,a.length)},i.area=function(a,c){for(var d=0,h=a.length-1,f=0;f<a.length;f++)d+=(a[h].x-a[f].x)*(a[h].y+a[f].y),h=f;return c?d/2:Math.abs(d)/2},i.inertia=function(a,c){for(var d=0,h=0,f=a,u,p,m=0;m<f.length;m++)p=(m+1)%f.length,u=Math.abs(o.cross(f[p],f[m])),d+=u*(o.dot(f[p],f[p])+o.dot(f[p],f[m])+o.dot(f[m],f[m])),h+=u;return c/6*(d/h)},i.translate=function(a,c,d){d=typeof d<"u"?d:1;var h=a.length,f=c.x*d,u=c.y*d,p;for(p=0;p<h;p++)a[p].x+=f,a[p].y+=u;return a},i.rotate=function(a,c,d){if(c!==0){var h=Math.cos(c),f=Math.sin(c),u=d.x,p=d.y,m=a.length,y,g,v,x;for(x=0;x<m;x++)y=a[x],g=y.x-u,v=y.y-p,y.x=u+(g*h-v*f),y.y=p+(g*f+v*h);return a}},i.contains=function(a,c){for(var d=c.x,h=c.y,f=a.length,u=a[f-1],p,m=0;m<f;m++){if(p=a[m],(d-u.x)*(p.y-u.y)+(h-u.y)*(u.x-p.x)>0)return!1;u=p}return!0},i.scale=function(a,c,d,h){if(c===1&&d===1)return a;h=h||i.centre(a);for(var f,u,p=0;p<a.length;p++)f=a[p],u=o.sub(f,h),a[p].x=h.x+u.x*c,a[p].y=h.y+u.y*d;return a},i.chamfer=function(a,c,d,h,f){typeof c=="number"?c=[c]:c=c||[8],d=typeof d<"u"?d:-1,h=h||2,f=f||14;for(var u=[],p=0;p<a.length;p++){var m=a[p-1>=0?p-1:a.length-1],y=a[p],g=a[(p+1)%a.length],v=c[p<c.length?p:c.length-1];if(v===0){u.push(y);continue}var x=o.normalise({x:y.y-m.y,y:m.x-y.x}),E=o.normalise({x:g.y-y.y,y:y.x-g.x}),_=Math.sqrt(2*Math.pow(v,2)),S=o.mult(l.clone(x),v),C=o.normalise(o.mult(o.add(x,E),.5)),w=o.sub(y,o.mult(C,_)),T=d;d===-1&&(T=Math.pow(v,.32)*1.75),T=l.clamp(T,h,f),T%2===1&&(T+=1);for(var k=Math.acos(o.dot(x,E)),I=k/T,P=0;P<T;P++)u.push(o.add(o.rotate(S,I*P),w))}return u},i.clockwiseSort=function(a){var c=i.mean(a);return a.sort(function(d,h){return o.angle(c,d)-o.angle(c,h)}),a},i.isConvex=function(a){var c=0,d=a.length,h,f,u,p;if(d<3)return null;for(h=0;h<d;h++)if(f=(h+1)%d,u=(h+2)%d,p=(a[f].x-a[h].x)*(a[u].y-a[f].y),p-=(a[f].y-a[h].y)*(a[u].x-a[f].x),p<0?c|=1:p>0&&(c|=2),c===3)return!1;return c!==0?!0:null},i.hull=function(a){var c=[],d=[],h,f;for(a=a.slice(0),a.sort(function(u,p){var m=u.x-p.x;return m!==0?m:u.y-p.y}),f=0;f<a.length;f+=1){for(h=a[f];d.length>=2&&o.cross3(d[d.length-2],d[d.length-1],h)<=0;)d.pop();d.push(h)}for(f=a.length-1;f>=0;f-=1){for(h=a[f];c.length>=2&&o.cross3(c[c.length-2],c[c.length-1],h)<=0;)c.pop();c.push(h)}return c.pop(),d.pop(),c.concat(d)}})()},function(n,r,s){var i={};n.exports=i;var o=s(3),l=s(2),a=s(7),c=s(0),d=s(1),h=s(11);(function(){i._timeCorrection=!0,i._inertiaScale=4,i._nextCollidingGroupId=1,i._nextNonCollidingGroupId=-1,i._nextCategory=1,i._baseDelta=1e3/60,i.create=function(u){var p={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},m=c.extend(p,u);return f(m,u),m},i.nextGroup=function(u){return u?i._nextNonCollidingGroupId--:i._nextCollidingGroupId++},i.nextCategory=function(){return i._nextCategory=i._nextCategory<<1,i._nextCategory};var f=function(u,p){p=p||{},i.set(u,{bounds:u.bounds||d.create(u.vertices),positionPrev:u.positionPrev||l.clone(u.position),anglePrev:u.anglePrev||u.angle,vertices:u.vertices,parts:u.parts||[u],isStatic:u.isStatic,isSleeping:u.isSleeping,parent:u.parent||u}),o.rotate(u.vertices,u.angle,u.position),h.rotate(u.axes,u.angle),d.update(u.bounds,u.vertices,u.velocity),i.set(u,{axes:p.axes||u.axes,area:p.area||u.area,mass:p.mass||u.mass,inertia:p.inertia||u.inertia});var m=u.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),y=u.isStatic?"#555":"#ccc",g=u.isStatic&&u.render.fillStyle===null?1:0;u.render.fillStyle=u.render.fillStyle||m,u.render.strokeStyle=u.render.strokeStyle||y,u.render.lineWidth=u.render.lineWidth||g,u.render.sprite.xOffset+=-(u.bounds.min.x-u.position.x)/(u.bounds.max.x-u.bounds.min.x),u.render.sprite.yOffset+=-(u.bounds.min.y-u.position.y)/(u.bounds.max.y-u.bounds.min.y)};i.set=function(u,p,m){var y;typeof p=="string"&&(y=p,p={},p[y]=m);for(y in p)if(Object.prototype.hasOwnProperty.call(p,y))switch(m=p[y],y){case"isStatic":i.setStatic(u,m);break;case"isSleeping":a.set(u,m);break;case"mass":i.setMass(u,m);break;case"density":i.setDensity(u,m);break;case"inertia":i.setInertia(u,m);break;case"vertices":i.setVertices(u,m);break;case"position":i.setPosition(u,m);break;case"angle":i.setAngle(u,m);break;case"velocity":i.setVelocity(u,m);break;case"angularVelocity":i.setAngularVelocity(u,m);break;case"speed":i.setSpeed(u,m);break;case"angularSpeed":i.setAngularSpeed(u,m);break;case"parts":i.setParts(u,m);break;case"centre":i.setCentre(u,m);break;default:u[y]=m}},i.setStatic=function(u,p){for(var m=0;m<u.parts.length;m++){var y=u.parts[m];p?(y.isStatic||(y._original={restitution:y.restitution,friction:y.friction,mass:y.mass,inertia:y.inertia,density:y.density,inverseMass:y.inverseMass,inverseInertia:y.inverseInertia}),y.restitution=0,y.friction=1,y.mass=y.inertia=y.density=1/0,y.inverseMass=y.inverseInertia=0,y.positionPrev.x=y.position.x,y.positionPrev.y=y.position.y,y.anglePrev=y.angle,y.angularVelocity=0,y.speed=0,y.angularSpeed=0,y.motion=0):y._original&&(y.restitution=y._original.restitution,y.friction=y._original.friction,y.mass=y._original.mass,y.inertia=y._original.inertia,y.density=y._original.density,y.inverseMass=y._original.inverseMass,y.inverseInertia=y._original.inverseInertia,y._original=null),y.isStatic=p}},i.setMass=function(u,p){var m=u.inertia/(u.mass/6);u.inertia=m*(p/6),u.inverseInertia=1/u.inertia,u.mass=p,u.inverseMass=1/u.mass,u.density=u.mass/u.area},i.setDensity=function(u,p){i.setMass(u,p*u.area),u.density=p},i.setInertia=function(u,p){u.inertia=p,u.inverseInertia=1/u.inertia},i.setVertices=function(u,p){p[0].body===u?u.vertices=p:u.vertices=o.create(p,u),u.axes=h.fromVertices(u.vertices),u.area=o.area(u.vertices),i.setMass(u,u.density*u.area);var m=o.centre(u.vertices);o.translate(u.vertices,m,-1),i.setInertia(u,i._inertiaScale*o.inertia(u.vertices,u.mass)),o.translate(u.vertices,u.position),d.update(u.bounds,u.vertices,u.velocity)},i.setParts=function(u,p,m){var y;for(p=p.slice(0),u.parts.length=0,u.parts.push(u),u.parent=u,y=0;y<p.length;y++){var g=p[y];g!==u&&(g.parent=u,u.parts.push(g))}if(u.parts.length!==1){if(m=typeof m<"u"?m:!0,m){var v=[];for(y=0;y<p.length;y++)v=v.concat(p[y].vertices);o.clockwiseSort(v);var x=o.hull(v),E=o.centre(x);i.setVertices(u,x),o.translate(u.vertices,E)}var _=i._totalProperties(u);u.area=_.area,u.parent=u,u.position.x=_.centre.x,u.position.y=_.centre.y,u.positionPrev.x=_.centre.x,u.positionPrev.y=_.centre.y,i.setMass(u,_.mass),i.setInertia(u,_.inertia),i.setPosition(u,_.centre)}},i.setCentre=function(u,p,m){m?(u.positionPrev.x+=p.x,u.positionPrev.y+=p.y,u.position.x+=p.x,u.position.y+=p.y):(u.positionPrev.x=p.x-(u.position.x-u.positionPrev.x),u.positionPrev.y=p.y-(u.position.y-u.positionPrev.y),u.position.x=p.x,u.position.y=p.y)},i.setPosition=function(u,p,m){var y=l.sub(p,u.position);m?(u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.velocity.x=y.x,u.velocity.y=y.y,u.speed=l.magnitude(y)):(u.positionPrev.x+=y.x,u.positionPrev.y+=y.y);for(var g=0;g<u.parts.length;g++){var v=u.parts[g];v.position.x+=y.x,v.position.y+=y.y,o.translate(v.vertices,y),d.update(v.bounds,v.vertices,u.velocity)}},i.setAngle=function(u,p,m){var y=p-u.angle;m?(u.anglePrev=u.angle,u.angularVelocity=y,u.angularSpeed=Math.abs(y)):u.anglePrev+=y;for(var g=0;g<u.parts.length;g++){var v=u.parts[g];v.angle+=y,o.rotate(v.vertices,y,u.position),h.rotate(v.axes,y),d.update(v.bounds,v.vertices,u.velocity),g>0&&l.rotateAbout(v.position,y,u.position,v.position)}},i.setVelocity=function(u,p){var m=u.deltaTime/i._baseDelta;u.positionPrev.x=u.position.x-p.x*m,u.positionPrev.y=u.position.y-p.y*m,u.velocity.x=(u.position.x-u.positionPrev.x)/m,u.velocity.y=(u.position.y-u.positionPrev.y)/m,u.speed=l.magnitude(u.velocity)},i.getVelocity=function(u){var p=i._baseDelta/u.deltaTime;return{x:(u.position.x-u.positionPrev.x)*p,y:(u.position.y-u.positionPrev.y)*p}},i.getSpeed=function(u){return l.magnitude(i.getVelocity(u))},i.setSpeed=function(u,p){i.setVelocity(u,l.mult(l.normalise(i.getVelocity(u)),p))},i.setAngularVelocity=function(u,p){var m=u.deltaTime/i._baseDelta;u.anglePrev=u.angle-p*m,u.angularVelocity=(u.angle-u.anglePrev)/m,u.angularSpeed=Math.abs(u.angularVelocity)},i.getAngularVelocity=function(u){return(u.angle-u.anglePrev)*i._baseDelta/u.deltaTime},i.getAngularSpeed=function(u){return Math.abs(i.getAngularVelocity(u))},i.setAngularSpeed=function(u,p){i.setAngularVelocity(u,c.sign(i.getAngularVelocity(u))*p)},i.translate=function(u,p,m){i.setPosition(u,l.add(u.position,p),m)},i.rotate=function(u,p,m,y){if(!m)i.setAngle(u,u.angle+p,y);else{var g=Math.cos(p),v=Math.sin(p),x=u.position.x-m.x,E=u.position.y-m.y;i.setPosition(u,{x:m.x+(x*g-E*v),y:m.y+(x*v+E*g)},y),i.setAngle(u,u.angle+p,y)}},i.scale=function(u,p,m,y){var g=0,v=0;y=y||u.position;for(var x=0;x<u.parts.length;x++){var E=u.parts[x];o.scale(E.vertices,p,m,y),E.axes=h.fromVertices(E.vertices),E.area=o.area(E.vertices),i.setMass(E,u.density*E.area),o.translate(E.vertices,{x:-E.position.x,y:-E.position.y}),i.setInertia(E,i._inertiaScale*o.inertia(E.vertices,E.mass)),o.translate(E.vertices,{x:E.position.x,y:E.position.y}),x>0&&(g+=E.area,v+=E.inertia),E.position.x=y.x+(E.position.x-y.x)*p,E.position.y=y.y+(E.position.y-y.y)*m,d.update(E.bounds,E.vertices,u.velocity)}u.parts.length>1&&(u.area=g,u.isStatic||(i.setMass(u,u.density*g),i.setInertia(u,v))),u.circleRadius&&(p===m?u.circleRadius*=p:u.circleRadius=null)},i.update=function(u,p){p=(typeof p<"u"?p:1e3/60)*u.timeScale;var m=p*p,y=i._timeCorrection?p/(u.deltaTime||p):1,g=1-u.frictionAir*(p/c._baseDelta),v=(u.position.x-u.positionPrev.x)*y,x=(u.position.y-u.positionPrev.y)*y;u.velocity.x=v*g+u.force.x/u.mass*m,u.velocity.y=x*g+u.force.y/u.mass*m,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.position.x+=u.velocity.x,u.position.y+=u.velocity.y,u.deltaTime=p,u.angularVelocity=(u.angle-u.anglePrev)*g*y+u.torque/u.inertia*m,u.anglePrev=u.angle,u.angle+=u.angularVelocity;for(var E=0;E<u.parts.length;E++){var _=u.parts[E];o.translate(_.vertices,u.velocity),E>0&&(_.position.x+=u.velocity.x,_.position.y+=u.velocity.y),u.angularVelocity!==0&&(o.rotate(_.vertices,u.angularVelocity,u.position),h.rotate(_.axes,u.angularVelocity),E>0&&l.rotateAbout(_.position,u.angularVelocity,u.position,_.position)),d.update(_.bounds,_.vertices,u.velocity)}},i.updateVelocities=function(u){var p=i._baseDelta/u.deltaTime,m=u.velocity;m.x=(u.position.x-u.positionPrev.x)*p,m.y=(u.position.y-u.positionPrev.y)*p,u.speed=Math.sqrt(m.x*m.x+m.y*m.y),u.angularVelocity=(u.angle-u.anglePrev)*p,u.angularSpeed=Math.abs(u.angularVelocity)},i.applyForce=function(u,p,m){var y={x:p.x-u.position.x,y:p.y-u.position.y};u.force.x+=m.x,u.force.y+=m.y,u.torque+=y.x*m.y-y.y*m.x},i._totalProperties=function(u){for(var p={mass:0,area:0,inertia:0,centre:{x:0,y:0}},m=u.parts.length===1?0:1;m<u.parts.length;m++){var y=u.parts[m],g=y.mass!==1/0?y.mass:1;p.mass+=g,p.area+=y.area,p.inertia+=y.inertia,p.centre=l.add(p.centre,l.mult(y.position,g))}return p.centre=l.div(p.centre,p.mass),p}})()},function(n,r,s){var i={};n.exports=i;var o=s(0);(function(){i.on=function(l,a,c){for(var d=a.split(" "),h,f=0;f<d.length;f++)h=d[f],l.events=l.events||{},l.events[h]=l.events[h]||[],l.events[h].push(c);return c},i.off=function(l,a,c){if(!a){l.events={};return}typeof a=="function"&&(c=a,a=o.keys(l.events).join(" "));for(var d=a.split(" "),h=0;h<d.length;h++){var f=l.events[d[h]],u=[];if(c&&f)for(var p=0;p<f.length;p++)f[p]!==c&&u.push(f[p]);l.events[d[h]]=u}},i.trigger=function(l,a,c){var d,h,f,u,p=l.events;if(p&&o.keys(p).length>0){c||(c={}),d=a.split(" ");for(var m=0;m<d.length;m++)if(h=d[m],f=p[h],f){u=o.clone(c,!1),u.name=h,u.source=l;for(var y=0;y<f.length;y++)f[y].apply(l,[u])}}}})()},function(n,r,s){var i={};n.exports=i;var o=s(5),l=s(0),a=s(1),c=s(4);(function(){i.create=function(d){return l.extend({id:l.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},d)},i.setModified=function(d,h,f,u){if(d.isModified=h,h&&d.cache&&(d.cache.allBodies=null,d.cache.allConstraints=null,d.cache.allComposites=null),f&&d.parent&&i.setModified(d.parent,h,f,u),u)for(var p=0;p<d.composites.length;p++){var m=d.composites[p];i.setModified(m,h,f,u)}},i.add=function(d,h){var f=[].concat(h);o.trigger(d,"beforeAdd",{object:h});for(var u=0;u<f.length;u++){var p=f[u];switch(p.type){case"body":if(p.parent!==p){l.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}i.addBody(d,p);break;case"constraint":i.addConstraint(d,p);break;case"composite":i.addComposite(d,p);break;case"mouseConstraint":i.addConstraint(d,p.constraint);break}}return o.trigger(d,"afterAdd",{object:h}),d},i.remove=function(d,h,f){var u=[].concat(h);o.trigger(d,"beforeRemove",{object:h});for(var p=0;p<u.length;p++){var m=u[p];switch(m.type){case"body":i.removeBody(d,m,f);break;case"constraint":i.removeConstraint(d,m,f);break;case"composite":i.removeComposite(d,m,f);break;case"mouseConstraint":i.removeConstraint(d,m.constraint);break}}return o.trigger(d,"afterRemove",{object:h}),d},i.addComposite=function(d,h){return d.composites.push(h),h.parent=d,i.setModified(d,!0,!0,!1),d},i.removeComposite=function(d,h,f){var u=l.indexOf(d.composites,h);if(u!==-1){var p=i.allBodies(h);i.removeCompositeAt(d,u);for(var m=0;m<p.length;m++)p[m].sleepCounter=0}if(f)for(var m=0;m<d.composites.length;m++)i.removeComposite(d.composites[m],h,!0);return d},i.removeCompositeAt=function(d,h){return d.composites.splice(h,1),i.setModified(d,!0,!0,!1),d},i.addBody=function(d,h){return d.bodies.push(h),i.setModified(d,!0,!0,!1),d},i.removeBody=function(d,h,f){var u=l.indexOf(d.bodies,h);if(u!==-1&&(i.removeBodyAt(d,u),h.sleepCounter=0),f)for(var p=0;p<d.composites.length;p++)i.removeBody(d.composites[p],h,!0);return d},i.removeBodyAt=function(d,h){return d.bodies.splice(h,1),i.setModified(d,!0,!0,!1),d},i.addConstraint=function(d,h){return d.constraints.push(h),i.setModified(d,!0,!0,!1),d},i.removeConstraint=function(d,h,f){var u=l.indexOf(d.constraints,h);if(u!==-1&&i.removeConstraintAt(d,u),f)for(var p=0;p<d.composites.length;p++)i.removeConstraint(d.composites[p],h,!0);return d},i.removeConstraintAt=function(d,h){return d.constraints.splice(h,1),i.setModified(d,!0,!0,!1),d},i.clear=function(d,h,f){if(f)for(var u=0;u<d.composites.length;u++)i.clear(d.composites[u],h,!0);return h?d.bodies=d.bodies.filter(function(p){return p.isStatic}):d.bodies.length=0,d.constraints.length=0,d.composites.length=0,i.setModified(d,!0,!0,!1),d},i.allBodies=function(d){if(d.cache&&d.cache.allBodies)return d.cache.allBodies;for(var h=[].concat(d.bodies),f=0;f<d.composites.length;f++)h=h.concat(i.allBodies(d.composites[f]));return d.cache&&(d.cache.allBodies=h),h},i.allConstraints=function(d){if(d.cache&&d.cache.allConstraints)return d.cache.allConstraints;for(var h=[].concat(d.constraints),f=0;f<d.composites.length;f++)h=h.concat(i.allConstraints(d.composites[f]));return d.cache&&(d.cache.allConstraints=h),h},i.allComposites=function(d){if(d.cache&&d.cache.allComposites)return d.cache.allComposites;for(var h=[].concat(d.composites),f=0;f<d.composites.length;f++)h=h.concat(i.allComposites(d.composites[f]));return d.cache&&(d.cache.allComposites=h),h},i.get=function(d,h,f){var u,p;switch(f){case"body":u=i.allBodies(d);break;case"constraint":u=i.allConstraints(d);break;case"composite":u=i.allComposites(d).concat(d);break}return u?(p=u.filter(function(m){return m.id.toString()===h.toString()}),p.length===0?null:p[0]):null},i.move=function(d,h,f){return i.remove(d,h),i.add(f,h),d},i.rebase=function(d){for(var h=i.allBodies(d).concat(i.allConstraints(d)).concat(i.allComposites(d)),f=0;f<h.length;f++)h[f].id=l.nextId();return d},i.translate=function(d,h,f){for(var u=f?i.allBodies(d):d.bodies,p=0;p<u.length;p++)c.translate(u[p],h);return d},i.rotate=function(d,h,f,u){for(var p=Math.cos(h),m=Math.sin(h),y=u?i.allBodies(d):d.bodies,g=0;g<y.length;g++){var v=y[g],x=v.position.x-f.x,E=v.position.y-f.y;c.setPosition(v,{x:f.x+(x*p-E*m),y:f.y+(x*m+E*p)}),c.rotate(v,h)}return d},i.scale=function(d,h,f,u,p){for(var m=p?i.allBodies(d):d.bodies,y=0;y<m.length;y++){var g=m[y],v=g.position.x-u.x,x=g.position.y-u.y;c.setPosition(g,{x:u.x+v*h,y:u.y+x*f}),c.scale(g,h,f)}return d},i.bounds=function(d){for(var h=i.allBodies(d),f=[],u=0;u<h.length;u+=1){var p=h[u];f.push(p.bounds.min,p.bounds.max)}return a.create(f)}})()},function(n,r,s){var i={};n.exports=i;var o=s(4),l=s(5),a=s(0);(function(){i._motionWakeThreshold=.18,i._motionSleepThreshold=.08,i._minBias=.9,i.update=function(c,d){for(var h=d/a._baseDelta,f=i._motionSleepThreshold,u=0;u<c.length;u++){var p=c[u],m=o.getSpeed(p),y=o.getAngularSpeed(p),g=m*m+y*y;if(p.force.x!==0||p.force.y!==0){i.set(p,!1);continue}var v=Math.min(p.motion,g),x=Math.max(p.motion,g);p.motion=i._minBias*v+(1-i._minBias)*x,p.sleepThreshold>0&&p.motion<f?(p.sleepCounter+=1,p.sleepCounter>=p.sleepThreshold/h&&i.set(p,!0)):p.sleepCounter>0&&(p.sleepCounter-=1)}},i.afterCollisions=function(c){for(var d=i._motionSleepThreshold,h=0;h<c.length;h++){var f=c[h];if(f.isActive){var u=f.collision,p=u.bodyA.parent,m=u.bodyB.parent;if(!(p.isSleeping&&m.isSleeping||p.isStatic||m.isStatic)&&(p.isSleeping||m.isSleeping)){var y=p.isSleeping&&!p.isStatic?p:m,g=y===p?m:p;!y.isStatic&&g.motion>d&&i.set(y,!1)}}}},i.set=function(c,d){var h=c.isSleeping;d?(c.isSleeping=!0,c.sleepCounter=c.sleepThreshold,c.positionImpulse.x=0,c.positionImpulse.y=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.speed=0,c.angularSpeed=0,c.motion=0,h||l.trigger(c,"sleepStart")):(c.isSleeping=!1,c.sleepCounter=0,h&&l.trigger(c,"sleepEnd"))}})()},function(n,r,s){var i={};n.exports=i;var o=s(3),l=s(9);(function(){var a=[],c={overlap:0,axis:null},d={overlap:0,axis:null};i.create=function(h,f){return{pair:null,collided:!1,bodyA:h,bodyB:f,parentA:h.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},i.collides=function(h,f,u){if(i._overlapAxes(c,h.vertices,f.vertices,h.axes),c.overlap<=0||(i._overlapAxes(d,f.vertices,h.vertices,f.axes),d.overlap<=0))return null;var p=u&&u.table[l.id(h,f)],m;p?m=p.collision:(m=i.create(h,f),m.collided=!0,m.bodyA=h.id<f.id?h:f,m.bodyB=h.id<f.id?f:h,m.parentA=m.bodyA.parent,m.parentB=m.bodyB.parent),h=m.bodyA,f=m.bodyB;var y;c.overlap<d.overlap?y=c:y=d;var g=m.normal,v=m.tangent,x=m.penetration,E=m.supports,_=y.overlap,S=y.axis,C=S.x,w=S.y,T=f.position.x-h.position.x,k=f.position.y-h.position.y;C*T+w*k>=0&&(C=-C,w=-w),g.x=C,g.y=w,v.x=-w,v.y=C,x.x=C*_,x.y=w*_,m.depth=_;var I=i._findSupports(h,f,g,1),P=0;if(o.contains(h.vertices,I[0])&&(E[P++]=I[0]),o.contains(h.vertices,I[1])&&(E[P++]=I[1]),P<2){var R=i._findSupports(f,h,g,-1);o.contains(f.vertices,R[0])&&(E[P++]=R[0]),P<2&&o.contains(f.vertices,R[1])&&(E[P++]=R[1])}return P===0&&(E[P++]=I[0]),m.supportCount=P,m},i._overlapAxes=function(h,f,u,p){var m=f.length,y=u.length,g=f[0].x,v=f[0].y,x=u[0].x,E=u[0].y,_=p.length,S=Number.MAX_VALUE,C=0,w,T,k,I,P,R;for(P=0;P<_;P++){var M=p[P],L=M.x,z=M.y,b=g*L+v*z,A=x*L+E*z,F=b,B=A;for(R=1;R<m;R+=1)I=f[R].x*L+f[R].y*z,I>F?F=I:I<b&&(b=I);for(R=1;R<y;R+=1)I=u[R].x*L+u[R].y*z,I>B?B=I:I<A&&(A=I);if(T=F-A,k=B-b,w=T<k?T:k,w<S&&(S=w,C=P,w<=0))break}h.axis=p[C],h.overlap=S},i._findSupports=function(h,f,u,p){var m=f.vertices,y=m.length,g=h.position.x,v=h.position.y,x=u.x*p,E=u.y*p,_=m[0],S=_,C=x*(g-S.x)+E*(v-S.y),w,T,k;for(k=1;k<y;k+=1)S=m[k],T=x*(g-S.x)+E*(v-S.y),T<C&&(C=T,_=S);return w=m[(y+_.index-1)%y],C=x*(g-w.x)+E*(v-w.y),S=m[(_.index+1)%y],x*(g-S.x)+E*(v-S.y)<C?(a[0]=_,a[1]=S,a):(a[0]=_,a[1]=w,a)}})()},function(n,r,s){var i={};n.exports=i;var o=s(16);(function(){i.create=function(l,a){var c=l.bodyA,d=l.bodyB,h={id:i.id(c,d),bodyA:c,bodyB:d,collision:l,contacts:[o.create(),o.create()],contactCount:0,separation:0,isActive:!0,isSensor:c.isSensor||d.isSensor,timeCreated:a,timeUpdated:a,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(h,l,a),h},i.update=function(l,a,c){var d=a.supports,h=a.supportCount,f=l.contacts,u=a.parentA,p=a.parentB;l.isActive=!0,l.timeUpdated=c,l.collision=a,l.separation=a.depth,l.inverseMass=u.inverseMass+p.inverseMass,l.friction=u.friction<p.friction?u.friction:p.friction,l.frictionStatic=u.frictionStatic>p.frictionStatic?u.frictionStatic:p.frictionStatic,l.restitution=u.restitution>p.restitution?u.restitution:p.restitution,l.slop=u.slop>p.slop?u.slop:p.slop,l.contactCount=h,a.pair=l;var m=d[0],y=f[0],g=d[1],v=f[1];(v.vertex===m||y.vertex===g)&&(f[1]=y,f[0]=y=v,v=f[1]),y.vertex=m,v.vertex=g},i.setActive=function(l,a,c){a?(l.isActive=!0,l.timeUpdated=c):(l.isActive=!1,l.contactCount=0)},i.id=function(l,a){return l.id<a.id?l.id.toString(36)+":"+a.id.toString(36):a.id.toString(36)+":"+l.id.toString(36)}})()},function(n,r,s){var i={};n.exports=i;var o=s(3),l=s(2),a=s(7),c=s(1),d=s(11),h=s(0);(function(){i._warming=.4,i._torqueDampen=1,i._minLength=1e-6,i.create=function(f){var u=f;u.bodyA&&!u.pointA&&(u.pointA={x:0,y:0}),u.bodyB&&!u.pointB&&(u.pointB={x:0,y:0});var p=u.bodyA?l.add(u.bodyA.position,u.pointA):u.pointA,m=u.bodyB?l.add(u.bodyB.position,u.pointB):u.pointB,y=l.magnitude(l.sub(p,m));u.length=typeof u.length<"u"?u.length:y,u.id=u.id||h.nextId(),u.label=u.label||"Constraint",u.type="constraint",u.stiffness=u.stiffness||(u.length>0?1:.7),u.damping=u.damping||0,u.angularStiffness=u.angularStiffness||0,u.angleA=u.bodyA?u.bodyA.angle:u.angleA,u.angleB=u.bodyB?u.bodyB.angle:u.angleB,u.plugin={};var g={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return u.length===0&&u.stiffness>.1?(g.type="pin",g.anchors=!1):u.stiffness<.9&&(g.type="spring"),u.render=h.extend(g,u.render),u},i.preSolveAll=function(f){for(var u=0;u<f.length;u+=1){var p=f[u],m=p.constraintImpulse;p.isStatic||m.x===0&&m.y===0&&m.angle===0||(p.position.x+=m.x,p.position.y+=m.y,p.angle+=m.angle)}},i.solveAll=function(f,u){for(var p=h.clamp(u/h._baseDelta,0,1),m=0;m<f.length;m+=1){var y=f[m],g=!y.bodyA||y.bodyA&&y.bodyA.isStatic,v=!y.bodyB||y.bodyB&&y.bodyB.isStatic;(g||v)&&i.solve(f[m],p)}for(m=0;m<f.length;m+=1)y=f[m],g=!y.bodyA||y.bodyA&&y.bodyA.isStatic,v=!y.bodyB||y.bodyB&&y.bodyB.isStatic,!g&&!v&&i.solve(f[m],p)},i.solve=function(f,u){var p=f.bodyA,m=f.bodyB,y=f.pointA,g=f.pointB;if(!(!p&&!m)){p&&!p.isStatic&&(l.rotate(y,p.angle-f.angleA,y),f.angleA=p.angle),m&&!m.isStatic&&(l.rotate(g,m.angle-f.angleB,g),f.angleB=m.angle);var v=y,x=g;if(p&&(v=l.add(p.position,y)),m&&(x=l.add(m.position,g)),!(!v||!x)){var E=l.sub(v,x),_=l.magnitude(E);_<i._minLength&&(_=i._minLength);var S=(_-f.length)/_,C=f.stiffness>=1||f.length===0,w=C?f.stiffness*u:f.stiffness*u*u,T=f.damping*u,k=l.mult(E,S*w),I=(p?p.inverseMass:0)+(m?m.inverseMass:0),P=(p?p.inverseInertia:0)+(m?m.inverseInertia:0),R=I+P,M,L,z,b,A;if(T>0){var F=l.create();z=l.div(E,_),A=l.sub(m&&l.sub(m.position,m.positionPrev)||F,p&&l.sub(p.position,p.positionPrev)||F),b=l.dot(z,A)}p&&!p.isStatic&&(L=p.inverseMass/I,p.constraintImpulse.x-=k.x*L,p.constraintImpulse.y-=k.y*L,p.position.x-=k.x*L,p.position.y-=k.y*L,T>0&&(p.positionPrev.x-=T*z.x*b*L,p.positionPrev.y-=T*z.y*b*L),M=l.cross(y,k)/R*i._torqueDampen*p.inverseInertia*(1-f.angularStiffness),p.constraintImpulse.angle-=M,p.angle-=M),m&&!m.isStatic&&(L=m.inverseMass/I,m.constraintImpulse.x+=k.x*L,m.constraintImpulse.y+=k.y*L,m.position.x+=k.x*L,m.position.y+=k.y*L,T>0&&(m.positionPrev.x+=T*z.x*b*L,m.positionPrev.y+=T*z.y*b*L),M=l.cross(g,k)/R*i._torqueDampen*m.inverseInertia*(1-f.angularStiffness),m.constraintImpulse.angle+=M,m.angle+=M)}}},i.postSolveAll=function(f){for(var u=0;u<f.length;u++){var p=f[u],m=p.constraintImpulse;if(!(p.isStatic||m.x===0&&m.y===0&&m.angle===0)){a.set(p,!1);for(var y=0;y<p.parts.length;y++){var g=p.parts[y];o.translate(g.vertices,m),y>0&&(g.position.x+=m.x,g.position.y+=m.y),m.angle!==0&&(o.rotate(g.vertices,m.angle,p.position),d.rotate(g.axes,m.angle),y>0&&l.rotateAbout(g.position,m.angle,p.position,g.position)),c.update(g.bounds,g.vertices,p.velocity)}m.angle*=i._warming,m.x*=i._warming,m.y*=i._warming}}},i.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),y:(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0)}},i.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y:(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0)}},i.currentLength=function(f){var u=(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),p=(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0),m=(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y=(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0),g=u-m,v=p-y;return Math.sqrt(g*g+v*v)}})()},function(n,r,s){var i={};n.exports=i;var o=s(2),l=s(0);(function(){i.fromVertices=function(a){for(var c={},d=0;d<a.length;d++){var h=(d+1)%a.length,f=o.normalise({x:a[h].y-a[d].y,y:a[d].x-a[h].x}),u=f.y===0?1/0:f.x/f.y;u=u.toFixed(3).toString(),c[u]=f}return l.values(c)},i.rotate=function(a,c){if(c!==0)for(var d=Math.cos(c),h=Math.sin(c),f=0;f<a.length;f++){var u=a[f],p;p=u.x*d-u.y*h,u.y=u.x*h+u.y*d,u.x=p}}})()},function(n,r,s){var i={};n.exports=i;var o=s(3),l=s(0),a=s(4),c=s(1),d=s(2);(function(){i.rectangle=function(h,f,u,p,m){m=m||{};var y={label:"Rectangle Body",position:{x:h,y:f},vertices:o.fromPath("L 0 0 L "+u+" 0 L "+u+" "+p+" L 0 "+p)};if(m.chamfer){var g=m.chamfer;y.vertices=o.chamfer(y.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete m.chamfer}return a.create(l.extend({},y,m))},i.trapezoid=function(h,f,u,p,m,y){y=y||{},m>=1&&l.warn("Bodies.trapezoid: slope parameter must be < 1."),m*=.5;var g=(1-m*2)*u,v=u*m,x=v+g,E=x+v,_;m<.5?_="L 0 0 L "+v+" "+-p+" L "+x+" "+-p+" L "+E+" 0":_="L 0 0 L "+x+" "+-p+" L "+E+" 0";var S={label:"Trapezoid Body",position:{x:h,y:f},vertices:o.fromPath(_)};if(y.chamfer){var C=y.chamfer;S.vertices=o.chamfer(S.vertices,C.radius,C.quality,C.qualityMin,C.qualityMax),delete y.chamfer}return a.create(l.extend({},S,y))},i.circle=function(h,f,u,p,m){p=p||{};var y={label:"Circle Body",circleRadius:u};m=m||25;var g=Math.ceil(Math.max(10,Math.min(m,u)));return g%2===1&&(g+=1),i.polygon(h,f,g,u,l.extend({},y,p))},i.polygon=function(h,f,u,p,m){if(m=m||{},u<3)return i.circle(h,f,p,m);for(var y=2*Math.PI/u,g="",v=y*.5,x=0;x<u;x+=1){var E=v+x*y,_=Math.cos(E)*p,S=Math.sin(E)*p;g+="L "+_.toFixed(3)+" "+S.toFixed(3)+" "}var C={label:"Polygon Body",position:{x:h,y:f},vertices:o.fromPath(g)};if(m.chamfer){var w=m.chamfer;C.vertices=o.chamfer(C.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete m.chamfer}return a.create(l.extend({},C,m))},i.fromVertices=function(h,f,u,p,m,y,g,v){var x=l.getDecomp(),E,_,S,C,w,T,k,I,P,R,M;for(E=!!(x&&x.quickDecomp),p=p||{},S=[],m=typeof m<"u"?m:!1,y=typeof y<"u"?y:.01,g=typeof g<"u"?g:10,v=typeof v<"u"?v:.01,l.isArray(u[0])||(u=[u]),R=0;R<u.length;R+=1)if(T=u[R],C=o.isConvex(T),w=!C,w&&!E&&l.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),C||!E)C?T=o.clockwiseSort(T):T=o.hull(T),S.push({position:{x:h,y:f},vertices:T});else{var L=T.map(function(H){return[H.x,H.y]});x.makeCCW(L),y!==!1&&x.removeCollinearPoints(L,y),v!==!1&&x.removeDuplicatePoints&&x.removeDuplicatePoints(L,v);var z=x.quickDecomp(L);for(k=0;k<z.length;k++){var b=z[k],A=b.map(function(H){return{x:H[0],y:H[1]}});g>0&&o.area(A)<g||S.push({position:o.centre(A),vertices:A})}}for(k=0;k<S.length;k++)S[k]=a.create(l.extend(S[k],p));if(m){var F=5;for(k=0;k<S.length;k++){var B=S[k];for(I=k+1;I<S.length;I++){var W=S[I];if(c.overlaps(B.bounds,W.bounds)){var G=B.vertices,pe=W.vertices;for(P=0;P<B.vertices.length;P++)for(M=0;M<W.vertices.length;M++){var Re=d.magnitudeSquared(d.sub(G[(P+1)%G.length],pe[M])),Se=d.magnitudeSquared(d.sub(G[P],pe[(M+1)%pe.length]));Re<F&&Se<F&&(G[P].isInternal=!0,pe[M].isInternal=!0)}}}}}return S.length>1?(_=a.create(l.extend({parts:S.slice(0)},p)),a.setPosition(_,{x:h,y:f}),_):S[0]}})()},function(n,r,s){var i={};n.exports=i;var o=s(0),l=s(8);(function(){i.create=function(a){var c={bodies:[],collisions:[],pairs:null};return o.extend(c,a)},i.setBodies=function(a,c){a.bodies=c.slice(0)},i.clear=function(a){a.bodies=[],a.collisions=[]},i.collisions=function(a){var c=a.pairs,d=a.bodies,h=d.length,f=i.canCollide,u=l.collides,p=a.collisions,m=0,y,g;for(d.sort(i._compareBoundsX),y=0;y<h;y++){var v=d[y],x=v.bounds,E=v.bounds.max.x,_=v.bounds.max.y,S=v.bounds.min.y,C=v.isStatic||v.isSleeping,w=v.parts.length,T=w===1;for(g=y+1;g<h;g++){var k=d[g],I=k.bounds;if(I.min.x>E)break;if(!(_<I.min.y||S>I.max.y)&&!(C&&(k.isStatic||k.isSleeping))&&f(v.collisionFilter,k.collisionFilter)){var P=k.parts.length;if(T&&P===1){var R=u(v,k,c);R&&(p[m++]=R)}else for(var M=w>1?1:0,L=P>1?1:0,z=M;z<w;z++)for(var b=v.parts[z],x=b.bounds,A=L;A<P;A++){var F=k.parts[A],I=F.bounds;if(!(x.min.x>I.max.x||x.max.x<I.min.x||x.max.y<I.min.y||x.min.y>I.max.y)){var R=u(b,F,c);R&&(p[m++]=R)}}}}}return p.length!==m&&(p.length=m),p},i.canCollide=function(a,c){return a.group===c.group&&a.group!==0?a.group>0:(a.mask&c.category)!==0&&(c.mask&a.category)!==0},i._compareBoundsX=function(a,c){return a.bounds.min.x-c.bounds.min.x}})()},function(n,r,s){var i={};n.exports=i;var o=s(0);(function(){i.create=function(l){var a={};return l||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),a.element=l||document.body,a.absolute={x:0,y:0},a.position={x:0,y:0},a.mousedownPosition={x:0,y:0},a.mouseupPosition={x:0,y:0},a.offset={x:0,y:0},a.scale={x:1,y:1},a.wheelDelta=0,a.button=-1,a.pixelRatio=parseInt(a.element.getAttribute("data-pixel-ratio"),10)||1,a.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},a.mousemove=function(c){var d=i._getRelativeMousePosition(c,a.element,a.pixelRatio),h=c.changedTouches;h&&(a.button=0,c.preventDefault()),a.absolute.x=d.x,a.absolute.y=d.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.sourceEvents.mousemove=c},a.mousedown=function(c){var d=i._getRelativeMousePosition(c,a.element,a.pixelRatio),h=c.changedTouches;h?(a.button=0,c.preventDefault()):a.button=c.button,a.absolute.x=d.x,a.absolute.y=d.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.mousedownPosition.x=a.position.x,a.mousedownPosition.y=a.position.y,a.sourceEvents.mousedown=c},a.mouseup=function(c){var d=i._getRelativeMousePosition(c,a.element,a.pixelRatio),h=c.changedTouches;h&&c.preventDefault(),a.button=-1,a.absolute.x=d.x,a.absolute.y=d.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y,a.mouseupPosition.x=a.position.x,a.mouseupPosition.y=a.position.y,a.sourceEvents.mouseup=c},a.mousewheel=function(c){a.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault(),a.sourceEvents.mousewheel=c},i.setElement(a,a.element),a},i.setElement=function(l,a){l.element=a,a.addEventListener("mousemove",l.mousemove,{passive:!0}),a.addEventListener("mousedown",l.mousedown,{passive:!0}),a.addEventListener("mouseup",l.mouseup,{passive:!0}),a.addEventListener("wheel",l.mousewheel,{passive:!1}),a.addEventListener("touchmove",l.mousemove,{passive:!1}),a.addEventListener("touchstart",l.mousedown,{passive:!1}),a.addEventListener("touchend",l.mouseup,{passive:!1})},i.clearSourceEvents=function(l){l.sourceEvents.mousemove=null,l.sourceEvents.mousedown=null,l.sourceEvents.mouseup=null,l.sourceEvents.mousewheel=null,l.wheelDelta=0},i.setOffset=function(l,a){l.offset.x=a.x,l.offset.y=a.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y},i.setScale=function(l,a){l.scale.x=a.x,l.scale.y=a.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y},i._getRelativeMousePosition=function(l,a,c){var d=a.getBoundingClientRect(),h=document.documentElement||document.body.parentNode||document.body,f=window.pageXOffset!==void 0?window.pageXOffset:h.scrollLeft,u=window.pageYOffset!==void 0?window.pageYOffset:h.scrollTop,p=l.changedTouches,m,y;return p?(m=p[0].pageX-d.left-f,y=p[0].pageY-d.top-u):(m=l.pageX-d.left-f,y=l.pageY-d.top-u),{x:m/(a.clientWidth/(a.width||a.clientWidth)*c),y:y/(a.clientHeight/(a.height||a.clientHeight)*c)}}})()},function(n,r,s){var i={};n.exports=i;var o=s(0);(function(){i._registry={},i.register=function(l){if(i.isPlugin(l)||o.warn("Plugin.register:",i.toString(l),"does not implement all required fields."),l.name in i._registry){var a=i._registry[l.name],c=i.versionParse(l.version).number,d=i.versionParse(a.version).number;c>d?(o.warn("Plugin.register:",i.toString(a),"was upgraded to",i.toString(l)),i._registry[l.name]=l):c<d?o.warn("Plugin.register:",i.toString(a),"can not be downgraded to",i.toString(l)):l!==a&&o.warn("Plugin.register:",i.toString(l),"is already registered to different plugin object")}else i._registry[l.name]=l;return l},i.resolve=function(l){return i._registry[i.dependencyParse(l).name]},i.toString=function(l){return typeof l=="string"?l:(l.name||"anonymous")+"@"+(l.version||l.range||"0.0.0")},i.isPlugin=function(l){return l&&l.name&&l.version&&l.install},i.isUsed=function(l,a){return l.used.indexOf(a)>-1},i.isFor=function(l,a){var c=l.for&&i.dependencyParse(l.for);return!l.for||a.name===c.name&&i.versionSatisfies(a.version,c.range)},i.use=function(l,a){if(l.uses=(l.uses||[]).concat(a||[]),l.uses.length===0){o.warn("Plugin.use:",i.toString(l),"does not specify any dependencies to install.");return}for(var c=i.dependencies(l),d=o.topologicalSort(c),h=[],f=0;f<d.length;f+=1)if(d[f]!==l.name){var u=i.resolve(d[f]);if(!u){h.push(" "+d[f]);continue}i.isUsed(l,u.name)||(i.isFor(u,l)||(o.warn("Plugin.use:",i.toString(u),"is for",u.for,"but installed on",i.toString(l)+"."),u._warned=!0),u.install?u.install(l):(o.warn("Plugin.use:",i.toString(u),"does not specify an install function."),u._warned=!0),u._warned?(h.push(" "+i.toString(u)),delete u._warned):h.push(" "+i.toString(u)),l.used.push(u.name))}h.length>0&&o.info(h.join("  "))},i.dependencies=function(l,a){var c=i.dependencyParse(l),d=c.name;if(a=a||{},!(d in a)){l=i.resolve(l)||l,a[d]=o.map(l.uses||[],function(f){i.isPlugin(f)&&i.register(f);var u=i.dependencyParse(f),p=i.resolve(f);return p&&!i.versionSatisfies(p.version,u.range)?(o.warn("Plugin.dependencies:",i.toString(p),"does not satisfy",i.toString(u),"used by",i.toString(c)+"."),p._warned=!0,l._warned=!0):p||(o.warn("Plugin.dependencies:",i.toString(f),"used by",i.toString(c),"could not be resolved."),l._warned=!0),u.name});for(var h=0;h<a[d].length;h+=1)i.dependencies(a[d][h],a);return a}},i.dependencyParse=function(l){if(o.isString(l)){var a=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return a.test(l)||o.warn("Plugin.dependencyParse:",l,"is not a valid dependency string."),{name:l.split("@")[0],range:l.split("@")[1]||"*"}}return{name:l.name,range:l.range||l.version}},i.versionParse=function(l){var a=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;a.test(l)||o.warn("Plugin.versionParse:",l,"is not a valid version or range.");var c=a.exec(l),d=Number(c[4]),h=Number(c[5]),f=Number(c[6]);return{isRange:!!(c[1]||c[2]),version:c[3],range:l,operator:c[1]||c[2]||"",major:d,minor:h,patch:f,parts:[d,h,f],prerelease:c[7],number:d*1e8+h*1e4+f}},i.versionSatisfies=function(l,a){a=a||"*";var c=i.versionParse(a),d=i.versionParse(l);if(c.isRange){if(c.operator==="*"||l==="*")return!0;if(c.operator===">")return d.number>c.number;if(c.operator===">=")return d.number>=c.number;if(c.operator==="~")return d.major===c.major&&d.minor===c.minor&&d.patch>=c.patch;if(c.operator==="^")return c.major>0?d.major===c.major&&d.number>=c.number:c.minor>0?d.minor===c.minor&&d.patch>=c.patch:d.patch===c.patch}return l===a||l==="*"}})()},function(n,r){var s={};n.exports=s,function(){s.create=function(i){return{vertex:i,normalImpulse:0,tangentImpulse:0}}}()},function(n,r,s){var i={};n.exports=i;var o=s(7),l=s(18),a=s(13),c=s(19),d=s(5),h=s(6),f=s(10),u=s(0),p=s(4);(function(){i._deltaMax=1e3/60,i.create=function(m){m=m||{};var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},g=u.extend(y,m);return g.world=m.world||h.create({label:"World"}),g.pairs=m.pairs||c.create(),g.detector=m.detector||a.create(),g.detector.pairs=g.pairs,g.grid={buckets:[]},g.world.gravity=g.gravity,g.broadphase=g.grid,g.metrics={},g},i.update=function(m,y){var g=u.now(),v=m.world,x=m.detector,E=m.pairs,_=m.timing,S=_.timestamp,C;y>i._deltaMax&&u.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",i._deltaMax.toFixed(3),"ms."),y=typeof y<"u"?y:u._baseDelta,y*=_.timeScale,_.timestamp+=y,_.lastDelta=y;var w={timestamp:_.timestamp,delta:y};d.trigger(m,"beforeUpdate",w);var T=h.allBodies(v),k=h.allConstraints(v);for(v.isModified&&(a.setBodies(x,T),h.setModified(v,!1,!1,!0)),m.enableSleeping&&o.update(T,y),i._bodiesApplyGravity(T,m.gravity),y>0&&i._bodiesUpdate(T,y),d.trigger(m,"beforeSolve",w),f.preSolveAll(T),C=0;C<m.constraintIterations;C++)f.solveAll(k,y);f.postSolveAll(T);var I=a.collisions(x);c.update(E,I,S),m.enableSleeping&&o.afterCollisions(E.list),E.collisionStart.length>0&&d.trigger(m,"collisionStart",{pairs:E.collisionStart,timestamp:_.timestamp,delta:y});var P=u.clamp(20/m.positionIterations,0,1);for(l.preSolvePosition(E.list),C=0;C<m.positionIterations;C++)l.solvePosition(E.list,y,P);for(l.postSolvePosition(T),f.preSolveAll(T),C=0;C<m.constraintIterations;C++)f.solveAll(k,y);for(f.postSolveAll(T),l.preSolveVelocity(E.list),C=0;C<m.velocityIterations;C++)l.solveVelocity(E.list,y);return i._bodiesUpdateVelocities(T),E.collisionActive.length>0&&d.trigger(m,"collisionActive",{pairs:E.collisionActive,timestamp:_.timestamp,delta:y}),E.collisionEnd.length>0&&d.trigger(m,"collisionEnd",{pairs:E.collisionEnd,timestamp:_.timestamp,delta:y}),i._bodiesClearForces(T),d.trigger(m,"afterUpdate",w),m.timing.lastElapsed=u.now()-g,m},i.merge=function(m,y){if(u.extend(m,y),y.world){m.world=y.world,i.clear(m);for(var g=h.allBodies(m.world),v=0;v<g.length;v++){var x=g[v];o.set(x,!1),x.id=u.nextId()}}},i.clear=function(m){c.clear(m.pairs),a.clear(m.detector)},i._bodiesClearForces=function(m){for(var y=m.length,g=0;g<y;g++){var v=m[g];v.force.x=0,v.force.y=0,v.torque=0}},i._bodiesApplyGravity=function(m,y){var g=typeof y.scale<"u"?y.scale:.001,v=m.length;if(!(y.x===0&&y.y===0||g===0))for(var x=0;x<v;x++){var E=m[x];E.isStatic||E.isSleeping||(E.force.y+=E.mass*y.y*g,E.force.x+=E.mass*y.x*g)}},i._bodiesUpdate=function(m,y){for(var g=m.length,v=0;v<g;v++){var x=m[v];x.isStatic||x.isSleeping||p.update(x,y)}},i._bodiesUpdateVelocities=function(m){for(var y=m.length,g=0;g<y;g++)p.updateVelocities(m[g])}})()},function(n,r,s){var i={};n.exports=i;var o=s(3),l=s(0),a=s(1);(function(){i._restingThresh=2,i._restingThreshTangent=Math.sqrt(6),i._positionDampen=.9,i._positionWarming=.8,i._frictionNormalMultiplier=5,i._frictionMaxStatic=Number.MAX_VALUE,i.preSolvePosition=function(c){var d,h,f,u=c.length;for(d=0;d<u;d++)h=c[d],h.isActive&&(f=h.contactCount,h.collision.parentA.totalContacts+=f,h.collision.parentB.totalContacts+=f)},i.solvePosition=function(c,d,h){var f,u,p,m,y,g,v,x,E=i._positionDampen*(h||1),_=l.clamp(d/l._baseDelta,0,1),S=c.length;for(f=0;f<S;f++)u=c[f],!(!u.isActive||u.isSensor)&&(p=u.collision,m=p.parentA,y=p.parentB,g=p.normal,u.separation=p.depth+g.x*(y.positionImpulse.x-m.positionImpulse.x)+g.y*(y.positionImpulse.y-m.positionImpulse.y));for(f=0;f<S;f++)u=c[f],!(!u.isActive||u.isSensor)&&(p=u.collision,m=p.parentA,y=p.parentB,g=p.normal,x=u.separation-u.slop*_,(m.isStatic||y.isStatic)&&(x*=2),m.isStatic||m.isSleeping||(v=E/m.totalContacts,m.positionImpulse.x+=g.x*x*v,m.positionImpulse.y+=g.y*x*v),y.isStatic||y.isSleeping||(v=E/y.totalContacts,y.positionImpulse.x-=g.x*x*v,y.positionImpulse.y-=g.y*x*v))},i.postSolvePosition=function(c){for(var d=i._positionWarming,h=c.length,f=o.translate,u=a.update,p=0;p<h;p++){var m=c[p],y=m.positionImpulse,g=y.x,v=y.y,x=m.velocity;if(m.totalContacts=0,g!==0||v!==0){for(var E=0;E<m.parts.length;E++){var _=m.parts[E];f(_.vertices,y),u(_.bounds,_.vertices,x),_.position.x+=g,_.position.y+=v}m.positionPrev.x+=g,m.positionPrev.y+=v,g*x.x+v*x.y<0?(y.x=0,y.y=0):(y.x*=d,y.y*=d)}}},i.preSolveVelocity=function(c){var d=c.length,h,f;for(h=0;h<d;h++){var u=c[h];if(!(!u.isActive||u.isSensor)){var p=u.contacts,m=u.contactCount,y=u.collision,g=y.parentA,v=y.parentB,x=y.normal,E=y.tangent;for(f=0;f<m;f++){var _=p[f],S=_.vertex,C=_.normalImpulse,w=_.tangentImpulse;if(C!==0||w!==0){var T=x.x*C+E.x*w,k=x.y*C+E.y*w;g.isStatic||g.isSleeping||(g.positionPrev.x+=T*g.inverseMass,g.positionPrev.y+=k*g.inverseMass,g.anglePrev+=g.inverseInertia*((S.x-g.position.x)*k-(S.y-g.position.y)*T)),v.isStatic||v.isSleeping||(v.positionPrev.x-=T*v.inverseMass,v.positionPrev.y-=k*v.inverseMass,v.anglePrev-=v.inverseInertia*((S.x-v.position.x)*k-(S.y-v.position.y)*T))}}}}},i.solveVelocity=function(c,d){var h=d/l._baseDelta,f=h*h,u=f*h,p=-i._restingThresh*h,m=i._restingThreshTangent,y=i._frictionNormalMultiplier*h,g=i._frictionMaxStatic,v=c.length,x,E,_,S;for(_=0;_<v;_++){var C=c[_];if(!(!C.isActive||C.isSensor)){var w=C.collision,T=w.parentA,k=w.parentB,I=w.normal.x,P=w.normal.y,R=w.tangent.x,M=w.tangent.y,L=C.inverseMass,z=C.friction*C.frictionStatic*y,b=C.contacts,A=C.contactCount,F=1/A,B=T.position.x-T.positionPrev.x,W=T.position.y-T.positionPrev.y,G=T.angle-T.anglePrev,pe=k.position.x-k.positionPrev.x,Re=k.position.y-k.positionPrev.y,Se=k.angle-k.anglePrev;for(S=0;S<A;S++){var H=b[S],Ce=H.vertex,ke=Ce.x-T.position.x,V=Ce.y-T.position.y,ee=Ce.x-k.position.x,Q=Ce.y-k.position.y,$=B-V*G,Ae=W+ke*G,Ut=pe-Q*Se,sn=Re+ee*Se,Be=$-Ut,vt=Ae-sn,at=I*Be+P*vt,xe=R*Be+M*vt,ut=C.separation+at,ct=Math.min(ut,1);ct=ut<0?0:ct;var Ot=ct*z;xe<-Ot||xe>Ot?(E=xe>0?xe:-xe,x=C.friction*(xe>0?1:-1)*u,x<-E?x=-E:x>E&&(x=E)):(x=xe,E=g);var K=ke*P-V*I,de=ee*P-Q*I,be=F/(L+T.inverseInertia*K*K+k.inverseInertia*de*de),on=(1+C.restitution)*at*be;if(x*=be,at<p)H.normalImpulse=0;else{var Jr=H.normalImpulse;H.normalImpulse+=on,H.normalImpulse>0&&(H.normalImpulse=0),on=H.normalImpulse-Jr}if(xe<-m||xe>m)H.tangentImpulse=0;else{var dl=H.tangentImpulse;H.tangentImpulse+=x,H.tangentImpulse<-E&&(H.tangentImpulse=-E),H.tangentImpulse>E&&(H.tangentImpulse=E),x=H.tangentImpulse-dl}var ur=I*on+R*x,ms=P*on+M*x;T.isStatic||T.isSleeping||(T.positionPrev.x+=ur*T.inverseMass,T.positionPrev.y+=ms*T.inverseMass,T.anglePrev+=(ke*ms-V*ur)*T.inverseInertia),k.isStatic||k.isSleeping||(k.positionPrev.x-=ur*k.inverseMass,k.positionPrev.y-=ms*k.inverseMass,k.anglePrev-=(ee*ms-Q*ur)*k.inverseInertia)}}}}})()},function(n,r,s){var i={};n.exports=i;var o=s(9),l=s(0);(function(){i.create=function(a){return l.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)},i.update=function(a,c,d){var h=o.update,f=o.create,u=o.setActive,p=a.table,m=a.list,y=m.length,g=y,v=a.collisionStart,x=a.collisionEnd,E=a.collisionActive,_=c.length,S=0,C=0,w=0,T,k,I;for(I=0;I<_;I++)T=c[I],k=T.pair,k?(k.isActive&&(E[w++]=k),h(k,T,d)):(k=f(T,d),p[k.id]=k,v[S++]=k,m[g++]=k);for(g=0,y=m.length,I=0;I<y;I++)k=m[I],k.timeUpdated>=d?m[g++]=k:(u(k,!1,d),k.collision.bodyA.sleepCounter>0&&k.collision.bodyB.sleepCounter>0?m[g++]=k:(x[C++]=k,delete p[k.id]));m.length!==g&&(m.length=g),v.length!==S&&(v.length=S),x.length!==C&&(x.length=C),E.length!==w&&(E.length=w)},i.clear=function(a){return a.table={},a.list.length=0,a.collisionStart.length=0,a.collisionActive.length=0,a.collisionEnd.length=0,a}})()},function(n,r,s){var i=n.exports=s(21);i.Axes=s(11),i.Bodies=s(12),i.Body=s(4),i.Bounds=s(1),i.Collision=s(8),i.Common=s(0),i.Composite=s(6),i.Composites=s(22),i.Constraint=s(10),i.Contact=s(16),i.Detector=s(13),i.Engine=s(17),i.Events=s(5),i.Grid=s(23),i.Mouse=s(14),i.MouseConstraint=s(24),i.Pair=s(9),i.Pairs=s(19),i.Plugin=s(15),i.Query=s(25),i.Render=s(26),i.Resolver=s(18),i.Runner=s(27),i.SAT=s(28),i.Sleeping=s(7),i.Svg=s(29),i.Vector=s(2),i.Vertices=s(3),i.World=s(30),i.Engine.run=i.Runner.run,i.Common.deprecated(i.Engine,"run","Engine.run  use Matter.Runner.run(engine) instead")},function(n,r,s){var i={};n.exports=i;var o=s(15),l=s(0);(function(){i.name="matter-js",i.version="0.20.0",i.uses=[],i.used=[],i.use=function(){o.use(i,Array.prototype.slice.call(arguments))},i.before=function(a,c){return a=a.replace(/^Matter./,""),l.chainPathBefore(i,a,c)},i.after=function(a,c){return a=a.replace(/^Matter./,""),l.chainPathAfter(i,a,c)}})()},function(n,r,s){var i={};n.exports=i;var o=s(6),l=s(10),a=s(0),c=s(4),d=s(12),h=a.deprecated;(function(){i.stack=function(f,u,p,m,y,g,v){for(var x=o.create({label:"Stack"}),E=f,_=u,S,C=0,w=0;w<m;w++){for(var T=0,k=0;k<p;k++){var I=v(E,_,k,w,S,C);if(I){var P=I.bounds.max.y-I.bounds.min.y,R=I.bounds.max.x-I.bounds.min.x;P>T&&(T=P),c.translate(I,{x:R*.5,y:P*.5}),E=I.bounds.max.x+y,o.addBody(x,I),S=I,C+=1}else E+=y}_+=T+g,E=f}return x},i.chain=function(f,u,p,m,y,g){for(var v=f.bodies,x=1;x<v.length;x++){var E=v[x-1],_=v[x],S=E.bounds.max.y-E.bounds.min.y,C=E.bounds.max.x-E.bounds.min.x,w=_.bounds.max.y-_.bounds.min.y,T=_.bounds.max.x-_.bounds.min.x,k={bodyA:E,pointA:{x:C*u,y:S*p},bodyB:_,pointB:{x:T*m,y:w*y}},I=a.extend(k,g);o.addConstraint(f,l.create(I))}return f.label+=" Chain",f},i.mesh=function(f,u,p,m,y){var g=f.bodies,v,x,E,_,S;for(v=0;v<p;v++){for(x=1;x<u;x++)E=g[x-1+v*u],_=g[x+v*u],o.addConstraint(f,l.create(a.extend({bodyA:E,bodyB:_},y)));if(v>0)for(x=0;x<u;x++)E=g[x+(v-1)*u],_=g[x+v*u],o.addConstraint(f,l.create(a.extend({bodyA:E,bodyB:_},y))),m&&x>0&&(S=g[x-1+(v-1)*u],o.addConstraint(f,l.create(a.extend({bodyA:S,bodyB:_},y)))),m&&x<u-1&&(S=g[x+1+(v-1)*u],o.addConstraint(f,l.create(a.extend({bodyA:S,bodyB:_},y))))}return f.label+=" Mesh",f},i.pyramid=function(f,u,p,m,y,g,v){return i.stack(f,u,p,m,y,g,function(x,E,_,S,C,w){var T=Math.min(m,Math.ceil(p/2)),k=C?C.bounds.max.x-C.bounds.min.x:0;if(!(S>T)){S=T-S;var I=S,P=p-1-S;if(!(_<I||_>P)){w===1&&c.translate(C,{x:(_+(p%2===1?1:-1))*k,y:0});var R=C?_*k:0;return v(f+R+_*y,E,_,S,C,w)}}})},i.newtonsCradle=function(f,u,p,m,y){for(var g=o.create({label:"Newtons Cradle"}),v=0;v<p;v++){var x=1.9,E=d.circle(f+v*(m*x),u+y,m,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),_=l.create({pointA:{x:f+v*(m*x),y:u},bodyB:E});o.addBody(g,E),o.addConstraint(g,_)}return g},h(i,"newtonsCradle","Composites.newtonsCradle  moved to newtonsCradle example"),i.car=function(f,u,p,m,y){var g=c.nextGroup(!0),v=20,x=-p*.5+v,E=p*.5-v,_=0,S=o.create({label:"Car"}),C=d.rectangle(f,u,p,m,{collisionFilter:{group:g},chamfer:{radius:m*.5},density:2e-4}),w=d.circle(f+x,u+_,y,{collisionFilter:{group:g},friction:.8}),T=d.circle(f+E,u+_,y,{collisionFilter:{group:g},friction:.8}),k=l.create({bodyB:C,pointB:{x,y:_},bodyA:w,stiffness:1,length:0}),I=l.create({bodyB:C,pointB:{x:E,y:_},bodyA:T,stiffness:1,length:0});return o.addBody(S,C),o.addBody(S,w),o.addBody(S,T),o.addConstraint(S,k),o.addConstraint(S,I),S},h(i,"car","Composites.car  moved to car example"),i.softBody=function(f,u,p,m,y,g,v,x,E,_){E=a.extend({inertia:1/0},E),_=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},_);var S=i.stack(f,u,p,m,y,g,function(C,w){return d.circle(C,w,x,E)});return i.mesh(S,p,m,v,_),S.label="Soft Body",S},h(i,"softBody","Composites.softBody  moved to softBody and cloth examples")})()},function(n,r,s){var i={};n.exports=i;var o=s(9),l=s(0),a=l.deprecated;(function(){i.create=function(c){var d={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return l.extend(d,c)},i.update=function(c,d,h,f){var u,p,m,y=h.world,g=c.buckets,v,x,E=!1;for(u=0;u<d.length;u++){var _=d[u];if(!(_.isSleeping&&!f)&&!(y.bounds&&(_.bounds.max.x<y.bounds.min.x||_.bounds.min.x>y.bounds.max.x||_.bounds.max.y<y.bounds.min.y||_.bounds.min.y>y.bounds.max.y))){var S=i._getRegion(c,_);if(!_.region||S.id!==_.region.id||f){(!_.region||f)&&(_.region=S);var C=i._regionUnion(S,_.region);for(p=C.startCol;p<=C.endCol;p++)for(m=C.startRow;m<=C.endRow;m++){x=i._getBucketId(p,m),v=g[x];var w=p>=S.startCol&&p<=S.endCol&&m>=S.startRow&&m<=S.endRow,T=p>=_.region.startCol&&p<=_.region.endCol&&m>=_.region.startRow&&m<=_.region.endRow;!w&&T&&T&&v&&i._bucketRemoveBody(c,v,_),(_.region===S||w&&!T||f)&&(v||(v=i._createBucket(g,x)),i._bucketAddBody(c,v,_))}_.region=S,E=!0}}}E&&(c.pairsList=i._createActivePairsList(c))},a(i,"update","Grid.update  replaced by Matter.Detector"),i.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},a(i,"clear","Grid.clear  replaced by Matter.Detector"),i._regionUnion=function(c,d){var h=Math.min(c.startCol,d.startCol),f=Math.max(c.endCol,d.endCol),u=Math.min(c.startRow,d.startRow),p=Math.max(c.endRow,d.endRow);return i._createRegion(h,f,u,p)},i._getRegion=function(c,d){var h=d.bounds,f=Math.floor(h.min.x/c.bucketWidth),u=Math.floor(h.max.x/c.bucketWidth),p=Math.floor(h.min.y/c.bucketHeight),m=Math.floor(h.max.y/c.bucketHeight);return i._createRegion(f,u,p,m)},i._createRegion=function(c,d,h,f){return{id:c+","+d+","+h+","+f,startCol:c,endCol:d,startRow:h,endRow:f}},i._getBucketId=function(c,d){return"C"+c+"R"+d},i._createBucket=function(c,d){var h=c[d]=[];return h},i._bucketAddBody=function(c,d,h){var f=c.pairs,u=o.id,p=d.length,m;for(m=0;m<p;m++){var y=d[m];if(!(h.id===y.id||h.isStatic&&y.isStatic)){var g=u(h,y),v=f[g];v?v[2]+=1:f[g]=[h,y,1]}}d.push(h)},i._bucketRemoveBody=function(c,d,h){var f=c.pairs,u=o.id,p;d.splice(l.indexOf(d,h),1);var m=d.length;for(p=0;p<m;p++){var y=f[u(h,d[p])];y&&(y[2]-=1)}},i._createActivePairsList=function(c){var d,h=c.pairs,f=l.keys(h),u=f.length,p=[],m;for(m=0;m<u;m++)d=h[f[m]],d[2]>0?p.push(d):delete h[f[m]];return p}})()},function(n,r,s){var i={};n.exports=i;var o=s(3),l=s(7),a=s(14),c=s(5),d=s(13),h=s(10),f=s(6),u=s(0),p=s(1);(function(){i.create=function(m,y){var g=(m?m.mouse:null)||(y?y.mouse:null);g||(m&&m.render&&m.render.canvas?g=a.create(m.render.canvas):y&&y.element?g=a.create(y.element):(g=a.create(),u.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var v=h.create({label:"Mouse Constraint",pointA:g.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),x={type:"mouseConstraint",mouse:g,element:null,body:null,constraint:v,collisionFilter:{category:1,mask:4294967295,group:0}},E=u.extend(x,y);return c.on(m,"beforeUpdate",function(){var _=f.allBodies(m.world);i.update(E,_),i._triggerEvents(E)}),E},i.update=function(m,y){var g=m.mouse,v=m.constraint,x=m.body;if(g.button===0){if(v.bodyB)l.set(v.bodyB,!1),v.pointA=g.position;else for(var E=0;E<y.length;E++)if(x=y[E],p.contains(x.bounds,g.position)&&d.canCollide(x.collisionFilter,m.collisionFilter))for(var _=x.parts.length>1?1:0;_<x.parts.length;_++){var S=x.parts[_];if(o.contains(S.vertices,g.position)){v.pointA=g.position,v.bodyB=m.body=x,v.pointB={x:g.position.x-x.position.x,y:g.position.y-x.position.y},v.angleB=x.angle,l.set(x,!1),c.trigger(m,"startdrag",{mouse:g,body:x});break}}}else v.bodyB=m.body=null,v.pointB=null,x&&c.trigger(m,"enddrag",{mouse:g,body:x})},i._triggerEvents=function(m){var y=m.mouse,g=y.sourceEvents;g.mousemove&&c.trigger(m,"mousemove",{mouse:y}),g.mousedown&&c.trigger(m,"mousedown",{mouse:y}),g.mouseup&&c.trigger(m,"mouseup",{mouse:y}),a.clearSourceEvents(y)}})()},function(n,r,s){var i={};n.exports=i;var o=s(2),l=s(8),a=s(1),c=s(12),d=s(3);(function(){i.collides=function(h,f){for(var u=[],p=f.length,m=h.bounds,y=l.collides,g=a.overlaps,v=0;v<p;v++){var x=f[v],E=x.parts.length,_=E===1?0:1;if(g(x.bounds,m))for(var S=_;S<E;S++){var C=x.parts[S];if(g(C.bounds,m)){var w=y(C,h);if(w){u.push(w);break}}}}return u},i.ray=function(h,f,u,p){p=p||1e-100;for(var m=o.angle(f,u),y=o.magnitude(o.sub(f,u)),g=(u.x+f.x)*.5,v=(u.y+f.y)*.5,x=c.rectangle(g,v,y,p,{angle:m}),E=i.collides(x,h),_=0;_<E.length;_+=1){var S=E[_];S.body=S.bodyB=S.bodyA}return E},i.region=function(h,f,u){for(var p=[],m=0;m<h.length;m++){var y=h[m],g=a.overlaps(y.bounds,f);(g&&!u||!g&&u)&&p.push(y)}return p},i.point=function(h,f){for(var u=[],p=0;p<h.length;p++){var m=h[p];if(a.contains(m.bounds,f))for(var y=m.parts.length===1?0:1;y<m.parts.length;y++){var g=m.parts[y];if(a.contains(g.bounds,f)&&d.contains(g.vertices,f)){u.push(m);break}}}return u}})()},function(n,r,s){var i={};n.exports=i;var o=s(4),l=s(0),a=s(6),c=s(1),d=s(5),h=s(2),f=s(14);(function(){var u,p;typeof window<"u"&&(u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(_){window.setTimeout(function(){_(l.now())},1e3/60)},p=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),i._goodFps=30,i._goodDelta=1e3/60,i.create=function(_){var S={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!_.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},C=l.extend(S,_);return C.canvas&&(C.canvas.width=C.options.width||C.canvas.width,C.canvas.height=C.options.height||C.canvas.height),C.mouse=_.mouse,C.engine=_.engine,C.canvas=C.canvas||g(C.options.width,C.options.height),C.context=C.canvas.getContext("2d"),C.textures={},C.bounds=C.bounds||{min:{x:0,y:0},max:{x:C.canvas.width,y:C.canvas.height}},C.controller=i,C.options.showBroadphase=!1,C.options.pixelRatio!==1&&i.setPixelRatio(C,C.options.pixelRatio),l.isElement(C.element)&&C.element.appendChild(C.canvas),C},i.run=function(_){(function S(C){_.frameRequestId=u(S),m(_,C),i.world(_,C),_.context.setTransform(_.options.pixelRatio,0,0,_.options.pixelRatio,0,0),(_.options.showStats||_.options.showDebug)&&i.stats(_,_.context,C),(_.options.showPerformance||_.options.showDebug)&&i.performance(_,_.context,C),_.context.setTransform(1,0,0,1,0,0)})()},i.stop=function(_){p(_.frameRequestId)},i.setPixelRatio=function(_,S){var C=_.options,w=_.canvas;S==="auto"&&(S=v(w)),C.pixelRatio=S,w.setAttribute("data-pixel-ratio",S),w.width=C.width*S,w.height=C.height*S,w.style.width=C.width+"px",w.style.height=C.height+"px"},i.setSize=function(_,S,C){_.options.width=S,_.options.height=C,_.bounds.max.x=_.bounds.min.x+S,_.bounds.max.y=_.bounds.min.y+C,_.options.pixelRatio!==1?i.setPixelRatio(_,_.options.pixelRatio):(_.canvas.width=S,_.canvas.height=C)},i.lookAt=function(_,S,C,w){w=typeof w<"u"?w:!0,S=l.isArray(S)?S:[S],C=C||{x:0,y:0};for(var T={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},k=0;k<S.length;k+=1){var I=S[k],P=I.bounds?I.bounds.min:I.min||I.position||I,R=I.bounds?I.bounds.max:I.max||I.position||I;P&&R&&(P.x<T.min.x&&(T.min.x=P.x),R.x>T.max.x&&(T.max.x=R.x),P.y<T.min.y&&(T.min.y=P.y),R.y>T.max.y&&(T.max.y=R.y))}var M=T.max.x-T.min.x+2*C.x,L=T.max.y-T.min.y+2*C.y,z=_.canvas.height,b=_.canvas.width,A=b/z,F=M/L,B=1,W=1;F>A?W=F/A:B=A/F,_.options.hasBounds=!0,_.bounds.min.x=T.min.x,_.bounds.max.x=T.min.x+M*B,_.bounds.min.y=T.min.y,_.bounds.max.y=T.min.y+L*W,w&&(_.bounds.min.x+=M*.5-M*B*.5,_.bounds.max.x+=M*.5-M*B*.5,_.bounds.min.y+=L*.5-L*W*.5,_.bounds.max.y+=L*.5-L*W*.5),_.bounds.min.x-=C.x,_.bounds.max.x-=C.x,_.bounds.min.y-=C.y,_.bounds.max.y-=C.y,_.mouse&&(f.setScale(_.mouse,{x:(_.bounds.max.x-_.bounds.min.x)/_.canvas.width,y:(_.bounds.max.y-_.bounds.min.y)/_.canvas.height}),f.setOffset(_.mouse,_.bounds.min))},i.startViewTransform=function(_){var S=_.bounds.max.x-_.bounds.min.x,C=_.bounds.max.y-_.bounds.min.y,w=S/_.options.width,T=C/_.options.height;_.context.setTransform(_.options.pixelRatio/w,0,0,_.options.pixelRatio/T,0,0),_.context.translate(-_.bounds.min.x,-_.bounds.min.y)},i.endViewTransform=function(_){_.context.setTransform(_.options.pixelRatio,0,0,_.options.pixelRatio,0,0)},i.world=function(_,S){var C=l.now(),w=_.engine,T=w.world,k=_.canvas,I=_.context,P=_.options,R=_.timing,M=a.allBodies(T),L=a.allConstraints(T),z=P.wireframes?P.wireframeBackground:P.background,b=[],A=[],F,B={timestamp:w.timing.timestamp};if(d.trigger(_,"beforeRender",B),_.currentBackground!==z&&E(_,z),I.globalCompositeOperation="source-in",I.fillStyle="transparent",I.fillRect(0,0,k.width,k.height),I.globalCompositeOperation="source-over",P.hasBounds){for(F=0;F<M.length;F++){var W=M[F];c.overlaps(W.bounds,_.bounds)&&b.push(W)}for(F=0;F<L.length;F++){var G=L[F],pe=G.bodyA,Re=G.bodyB,Se=G.pointA,H=G.pointB;pe&&(Se=h.add(pe.position,G.pointA)),Re&&(H=h.add(Re.position,G.pointB)),!(!Se||!H)&&(c.contains(_.bounds,Se)||c.contains(_.bounds,H))&&A.push(G)}i.startViewTransform(_),_.mouse&&(f.setScale(_.mouse,{x:(_.bounds.max.x-_.bounds.min.x)/_.options.width,y:(_.bounds.max.y-_.bounds.min.y)/_.options.height}),f.setOffset(_.mouse,_.bounds.min))}else A=L,b=M,_.options.pixelRatio!==1&&_.context.setTransform(_.options.pixelRatio,0,0,_.options.pixelRatio,0,0);!P.wireframes||w.enableSleeping&&P.showSleeping?i.bodies(_,b,I):(P.showConvexHulls&&i.bodyConvexHulls(_,b,I),i.bodyWireframes(_,b,I)),P.showBounds&&i.bodyBounds(_,b,I),(P.showAxes||P.showAngleIndicator)&&i.bodyAxes(_,b,I),P.showPositions&&i.bodyPositions(_,b,I),P.showVelocity&&i.bodyVelocity(_,b,I),P.showIds&&i.bodyIds(_,b,I),P.showSeparations&&i.separations(_,w.pairs.list,I),P.showCollisions&&i.collisions(_,w.pairs.list,I),P.showVertexNumbers&&i.vertexNumbers(_,b,I),P.showMousePosition&&i.mousePosition(_,_.mouse,I),i.constraints(A,I),P.hasBounds&&i.endViewTransform(_),d.trigger(_,"afterRender",B),R.lastElapsed=l.now()-C},i.stats=function(_,S,C){for(var w=_.engine,T=w.world,k=a.allBodies(T),I=0,P=55,R=44,M=0,L=0,z=0;z<k.length;z+=1)I+=k[z].parts.length;var b={Part:I,Body:k.length,Cons:a.allConstraints(T).length,Comp:a.allComposites(T).length,Pair:w.pairs.list.length};S.fillStyle="#0e0f19",S.fillRect(M,L,P*5.5,R),S.font="12px Arial",S.textBaseline="top",S.textAlign="right";for(var A in b){var F=b[A];S.fillStyle="#aaa",S.fillText(A,M+P,L+8),S.fillStyle="#eee",S.fillText(F,M+P,L+26),M+=P}},i.performance=function(_,S){var C=_.engine,w=_.timing,T=w.deltaHistory,k=w.elapsedHistory,I=w.timestampElapsedHistory,P=w.engineDeltaHistory,R=w.engineUpdatesHistory,M=w.engineElapsedHistory,L=C.timing.lastUpdatesPerFrame,z=C.timing.lastDelta,b=y(T),A=y(k),F=y(P),B=y(R),W=y(M),G=y(I),pe=G/b||0,Re=Math.round(b/z),Se=1e3/b||0,H=4,Ce=12,ke=60,V=34,ee=10,Q=69;S.fillStyle="#0e0f19",S.fillRect(0,50,Ce*5+ke*6+22,V),i.status(S,ee,Q,ke,H,T.length,Math.round(Se)+" fps",Se/i._goodFps,function($){return T[$]/b-1}),i.status(S,ee+Ce+ke,Q,ke,H,P.length,z.toFixed(2)+" dt",i._goodDelta/z,function($){return P[$]/F-1}),i.status(S,ee+(Ce+ke)*2,Q,ke,H,R.length,L+" upf",Math.pow(l.clamp(B/Re||1,0,1),4),function($){return R[$]/B-1}),i.status(S,ee+(Ce+ke)*3,Q,ke,H,M.length,W.toFixed(2)+" ut",1-L*W/i._goodFps,function($){return M[$]/W-1}),i.status(S,ee+(Ce+ke)*4,Q,ke,H,k.length,A.toFixed(2)+" rt",1-A/i._goodFps,function($){return k[$]/A-1}),i.status(S,ee+(Ce+ke)*5,Q,ke,H,I.length,pe.toFixed(2)+" x",pe*pe*pe,function($){return(I[$]/T[$]/pe||0)-1})},i.status=function(_,S,C,w,T,k,I,P,R){_.strokeStyle="#888",_.fillStyle="#444",_.lineWidth=1,_.fillRect(S,C+7,w,1),_.beginPath(),_.moveTo(S,C+7-T*l.clamp(.4*R(0),-2,2));for(var M=0;M<w;M+=1)_.lineTo(S+M,C+7-(M<k?T*l.clamp(.4*R(M),-2,2):0));_.stroke(),_.fillStyle="hsl("+l.clamp(25+95*P,0,120)+",100%,60%)",_.fillRect(S,C-7,4,4),_.font="12px Arial",_.textBaseline="middle",_.textAlign="right",_.fillStyle="#eee",_.fillText(I,S+w,C-5)},i.constraints=function(_,S){for(var C=S,w=0;w<_.length;w++){var T=_[w];if(!(!T.render.visible||!T.pointA||!T.pointB)){var k=T.bodyA,I=T.bodyB,P,R;if(k?P=h.add(k.position,T.pointA):P=T.pointA,T.render.type==="pin")C.beginPath(),C.arc(P.x,P.y,3,0,2*Math.PI),C.closePath();else{if(I?R=h.add(I.position,T.pointB):R=T.pointB,C.beginPath(),C.moveTo(P.x,P.y),T.render.type==="spring")for(var M=h.sub(R,P),L=h.perp(h.normalise(M)),z=Math.ceil(l.clamp(T.length/5,12,20)),b,A=1;A<z;A+=1)b=A%2===0?1:-1,C.lineTo(P.x+M.x*(A/z)+L.x*b*4,P.y+M.y*(A/z)+L.y*b*4);C.lineTo(R.x,R.y)}T.render.lineWidth&&(C.lineWidth=T.render.lineWidth,C.strokeStyle=T.render.strokeStyle,C.stroke()),T.render.anchors&&(C.fillStyle=T.render.strokeStyle,C.beginPath(),C.arc(P.x,P.y,3,0,2*Math.PI),C.arc(R.x,R.y,3,0,2*Math.PI),C.closePath(),C.fill())}}},i.bodies=function(_,S,C){var w=C;_.engine;var T=_.options,k=T.showInternalEdges||!T.wireframes,I,P,R,M;for(R=0;R<S.length;R++)if(I=S[R],!!I.render.visible){for(M=I.parts.length>1?1:0;M<I.parts.length;M++)if(P=I.parts[M],!!P.render.visible){if(T.showSleeping&&I.isSleeping?w.globalAlpha=.5*P.render.opacity:P.render.opacity!==1&&(w.globalAlpha=P.render.opacity),P.render.sprite&&P.render.sprite.texture&&!T.wireframes){var L=P.render.sprite,z=x(_,L.texture);w.translate(P.position.x,P.position.y),w.rotate(P.angle),w.drawImage(z,z.width*-L.xOffset*L.xScale,z.height*-L.yOffset*L.yScale,z.width*L.xScale,z.height*L.yScale),w.rotate(-P.angle),w.translate(-P.position.x,-P.position.y)}else{if(P.circleRadius)w.beginPath(),w.arc(P.position.x,P.position.y,P.circleRadius,0,2*Math.PI);else{w.beginPath(),w.moveTo(P.vertices[0].x,P.vertices[0].y);for(var b=1;b<P.vertices.length;b++)!P.vertices[b-1].isInternal||k?w.lineTo(P.vertices[b].x,P.vertices[b].y):w.moveTo(P.vertices[b].x,P.vertices[b].y),P.vertices[b].isInternal&&!k&&w.moveTo(P.vertices[(b+1)%P.vertices.length].x,P.vertices[(b+1)%P.vertices.length].y);w.lineTo(P.vertices[0].x,P.vertices[0].y),w.closePath()}T.wireframes?(w.lineWidth=1,w.strokeStyle=_.options.wireframeStrokeStyle,w.stroke()):(w.fillStyle=P.render.fillStyle,P.render.lineWidth&&(w.lineWidth=P.render.lineWidth,w.strokeStyle=P.render.strokeStyle,w.stroke()),w.fill())}w.globalAlpha=1}}},i.bodyWireframes=function(_,S,C){var w=C,T=_.options.showInternalEdges,k,I,P,R,M;for(w.beginPath(),P=0;P<S.length;P++)if(k=S[P],!!k.render.visible)for(M=k.parts.length>1?1:0;M<k.parts.length;M++){for(I=k.parts[M],w.moveTo(I.vertices[0].x,I.vertices[0].y),R=1;R<I.vertices.length;R++)!I.vertices[R-1].isInternal||T?w.lineTo(I.vertices[R].x,I.vertices[R].y):w.moveTo(I.vertices[R].x,I.vertices[R].y),I.vertices[R].isInternal&&!T&&w.moveTo(I.vertices[(R+1)%I.vertices.length].x,I.vertices[(R+1)%I.vertices.length].y);w.lineTo(I.vertices[0].x,I.vertices[0].y)}w.lineWidth=1,w.strokeStyle=_.options.wireframeStrokeStyle,w.stroke()},i.bodyConvexHulls=function(_,S,C){var w=C,T,k,I;for(w.beginPath(),k=0;k<S.length;k++)if(T=S[k],!(!T.render.visible||T.parts.length===1)){for(w.moveTo(T.vertices[0].x,T.vertices[0].y),I=1;I<T.vertices.length;I++)w.lineTo(T.vertices[I].x,T.vertices[I].y);w.lineTo(T.vertices[0].x,T.vertices[0].y)}w.lineWidth=1,w.strokeStyle="rgba(255,255,255,0.2)",w.stroke()},i.vertexNumbers=function(_,S,C){var w=C,T,k,I;for(T=0;T<S.length;T++){var P=S[T].parts;for(I=P.length>1?1:0;I<P.length;I++){var R=P[I];for(k=0;k<R.vertices.length;k++)w.fillStyle="rgba(255,255,255,0.2)",w.fillText(T+"_"+k,R.position.x+(R.vertices[k].x-R.position.x)*.8,R.position.y+(R.vertices[k].y-R.position.y)*.8)}}},i.mousePosition=function(_,S,C){var w=C;w.fillStyle="rgba(255,255,255,0.8)",w.fillText(S.position.x+"  "+S.position.y,S.position.x+5,S.position.y-5)},i.bodyBounds=function(_,S,C){var w=C;_.engine;var T=_.options;w.beginPath();for(var k=0;k<S.length;k++){var I=S[k];if(I.render.visible)for(var P=S[k].parts,R=P.length>1?1:0;R<P.length;R++){var M=P[R];w.rect(M.bounds.min.x,M.bounds.min.y,M.bounds.max.x-M.bounds.min.x,M.bounds.max.y-M.bounds.min.y)}}T.wireframes?w.strokeStyle="rgba(255,255,255,0.08)":w.strokeStyle="rgba(0,0,0,0.1)",w.lineWidth=1,w.stroke()},i.bodyAxes=function(_,S,C){var w=C;_.engine;var T=_.options,k,I,P,R;for(w.beginPath(),I=0;I<S.length;I++){var M=S[I],L=M.parts;if(M.render.visible)if(T.showAxes)for(P=L.length>1?1:0;P<L.length;P++)for(k=L[P],R=0;R<k.axes.length;R++){var z=k.axes[R];w.moveTo(k.position.x,k.position.y),w.lineTo(k.position.x+z.x*20,k.position.y+z.y*20)}else for(P=L.length>1?1:0;P<L.length;P++)for(k=L[P],R=0;R<k.axes.length;R++)w.moveTo(k.position.x,k.position.y),w.lineTo((k.vertices[0].x+k.vertices[k.vertices.length-1].x)/2,(k.vertices[0].y+k.vertices[k.vertices.length-1].y)/2)}T.wireframes?(w.strokeStyle="indianred",w.lineWidth=1):(w.strokeStyle="rgba(255, 255, 255, 0.4)",w.globalCompositeOperation="overlay",w.lineWidth=2),w.stroke(),w.globalCompositeOperation="source-over"},i.bodyPositions=function(_,S,C){var w=C;_.engine;var T=_.options,k,I,P,R;for(w.beginPath(),P=0;P<S.length;P++)if(k=S[P],!!k.render.visible)for(R=0;R<k.parts.length;R++)I=k.parts[R],w.arc(I.position.x,I.position.y,3,0,2*Math.PI,!1),w.closePath();for(T.wireframes?w.fillStyle="indianred":w.fillStyle="rgba(0,0,0,0.5)",w.fill(),w.beginPath(),P=0;P<S.length;P++)k=S[P],k.render.visible&&(w.arc(k.positionPrev.x,k.positionPrev.y,2,0,2*Math.PI,!1),w.closePath());w.fillStyle="rgba(255,165,0,0.8)",w.fill()},i.bodyVelocity=function(_,S,C){var w=C;w.beginPath();for(var T=0;T<S.length;T++){var k=S[T];if(k.render.visible){var I=o.getVelocity(k);w.moveTo(k.position.x,k.position.y),w.lineTo(k.position.x+I.x,k.position.y+I.y)}}w.lineWidth=3,w.strokeStyle="cornflowerblue",w.stroke()},i.bodyIds=function(_,S,C){var w=C,T,k;for(T=0;T<S.length;T++)if(S[T].render.visible){var I=S[T].parts;for(k=I.length>1?1:0;k<I.length;k++){var P=I[k];w.font="12px Arial",w.fillStyle="rgba(255,255,255,0.5)",w.fillText(P.id,P.position.x+10,P.position.y-10)}}},i.collisions=function(_,S,C){var w=C,T=_.options,k,I,P,R;for(w.beginPath(),P=0;P<S.length;P++)if(k=S[P],!!k.isActive)for(I=k.collision,R=0;R<k.contactCount;R++){var M=k.contacts[R],L=M.vertex;w.rect(L.x-1.5,L.y-1.5,3.5,3.5)}for(T.wireframes?w.fillStyle="rgba(255,255,255,0.7)":w.fillStyle="orange",w.fill(),w.beginPath(),P=0;P<S.length;P++)if(k=S[P],!!k.isActive&&(I=k.collision,k.contactCount>0)){var z=k.contacts[0].vertex.x,b=k.contacts[0].vertex.y;k.contactCount===2&&(z=(k.contacts[0].vertex.x+k.contacts[1].vertex.x)/2,b=(k.contacts[0].vertex.y+k.contacts[1].vertex.y)/2),I.bodyB===I.supports[0].body||I.bodyA.isStatic===!0?w.moveTo(z-I.normal.x*8,b-I.normal.y*8):w.moveTo(z+I.normal.x*8,b+I.normal.y*8),w.lineTo(z,b)}T.wireframes?w.strokeStyle="rgba(255,165,0,0.7)":w.strokeStyle="orange",w.lineWidth=1,w.stroke()},i.separations=function(_,S,C){var w=C,T=_.options,k,I,P,R,M;for(w.beginPath(),M=0;M<S.length;M++)if(k=S[M],!!k.isActive){I=k.collision,P=I.bodyA,R=I.bodyB;var L=1;!R.isStatic&&!P.isStatic&&(L=.5),R.isStatic&&(L=0),w.moveTo(R.position.x,R.position.y),w.lineTo(R.position.x-I.penetration.x*L,R.position.y-I.penetration.y*L),L=1,!R.isStatic&&!P.isStatic&&(L=.5),P.isStatic&&(L=0),w.moveTo(P.position.x,P.position.y),w.lineTo(P.position.x+I.penetration.x*L,P.position.y+I.penetration.y*L)}T.wireframes?w.strokeStyle="rgba(255,165,0,0.5)":w.strokeStyle="orange",w.stroke()},i.inspector=function(_,S){_.engine;var C=_.selected,w=_.render,T=w.options,k;if(T.hasBounds){var I=w.bounds.max.x-w.bounds.min.x,P=w.bounds.max.y-w.bounds.min.y,R=I/w.options.width,M=P/w.options.height;S.scale(1/R,1/M),S.translate(-w.bounds.min.x,-w.bounds.min.y)}for(var L=0;L<C.length;L++){var z=C[L].data;switch(S.translate(.5,.5),S.lineWidth=1,S.strokeStyle="rgba(255,165,0,0.9)",S.setLineDash([1,2]),z.type){case"body":k=z.bounds,S.beginPath(),S.rect(Math.floor(k.min.x-3),Math.floor(k.min.y-3),Math.floor(k.max.x-k.min.x+6),Math.floor(k.max.y-k.min.y+6)),S.closePath(),S.stroke();break;case"constraint":var b=z.pointA;z.bodyA&&(b=z.pointB),S.beginPath(),S.arc(b.x,b.y,10,0,2*Math.PI),S.closePath(),S.stroke();break}S.setLineDash([]),S.translate(-.5,-.5)}_.selectStart!==null&&(S.translate(.5,.5),S.lineWidth=1,S.strokeStyle="rgba(255,165,0,0.6)",S.fillStyle="rgba(255,165,0,0.1)",k=_.selectBounds,S.beginPath(),S.rect(Math.floor(k.min.x),Math.floor(k.min.y),Math.floor(k.max.x-k.min.x),Math.floor(k.max.y-k.min.y)),S.closePath(),S.stroke(),S.fill(),S.translate(-.5,-.5)),T.hasBounds&&S.setTransform(1,0,0,1,0,0)};var m=function(_,S){var C=_.engine,w=_.timing,T=w.historySize,k=C.timing.timestamp;w.delta=S-w.lastTime||i._goodDelta,w.lastTime=S,w.timestampElapsed=k-w.lastTimestamp||0,w.lastTimestamp=k,w.deltaHistory.unshift(w.delta),w.deltaHistory.length=Math.min(w.deltaHistory.length,T),w.engineDeltaHistory.unshift(C.timing.lastDelta),w.engineDeltaHistory.length=Math.min(w.engineDeltaHistory.length,T),w.timestampElapsedHistory.unshift(w.timestampElapsed),w.timestampElapsedHistory.length=Math.min(w.timestampElapsedHistory.length,T),w.engineUpdatesHistory.unshift(C.timing.lastUpdatesPerFrame),w.engineUpdatesHistory.length=Math.min(w.engineUpdatesHistory.length,T),w.engineElapsedHistory.unshift(C.timing.lastElapsed),w.engineElapsedHistory.length=Math.min(w.engineElapsedHistory.length,T),w.elapsedHistory.unshift(w.lastElapsed),w.elapsedHistory.length=Math.min(w.elapsedHistory.length,T)},y=function(_){for(var S=0,C=0;C<_.length;C+=1)S+=_[C];return S/_.length||0},g=function(_,S){var C=document.createElement("canvas");return C.width=_,C.height=S,C.oncontextmenu=function(){return!1},C.onselectstart=function(){return!1},C},v=function(_){var S=_.getContext("2d"),C=window.devicePixelRatio||1,w=S.webkitBackingStorePixelRatio||S.mozBackingStorePixelRatio||S.msBackingStorePixelRatio||S.oBackingStorePixelRatio||S.backingStorePixelRatio||1;return C/w},x=function(_,S){var C=_.textures[S];return C||(C=_.textures[S]=new Image,C.src=S,C)},E=function(_,S){var C=S;/(jpg|gif|png)$/.test(S)&&(C="url("+S+")"),_.canvas.style.background=C,_.canvas.style.backgroundSize="contain",_.currentBackground=S}})()},function(n,r,s){var i={};n.exports=i;var o=s(5),l=s(17),a=s(0);(function(){i._maxFrameDelta=1e3/15,i._frameDeltaFallback=1e3/60,i._timeBufferMargin=1.5,i._elapsedNextEstimate=1,i._smoothingLowerBound=.1,i._smoothingUpperBound=.9,i.create=function(d){var h={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},f=a.extend(h,d);return f.fps=0,f},i.run=function(d,h){return d.timeBuffer=i._frameDeltaFallback,function f(u){d.frameRequestId=i._onNextFrame(d,f),u&&d.enabled&&i.tick(d,h,u)}(),d},i.tick=function(d,h,f){var u=a.now(),p=d.delta,m=0,y=f-d.timeLastTick;if((!y||!d.timeLastTick||y>Math.max(i._maxFrameDelta,d.maxFrameTime))&&(y=d.frameDelta||i._frameDeltaFallback),d.frameDeltaSmoothing){d.frameDeltaHistory.push(y),d.frameDeltaHistory=d.frameDeltaHistory.slice(-d.frameDeltaHistorySize);var g=d.frameDeltaHistory.slice(0).sort(),v=d.frameDeltaHistory.slice(g.length*i._smoothingLowerBound,g.length*i._smoothingUpperBound),x=c(v);y=x||y}d.frameDeltaSnapping&&(y=1e3/Math.round(1e3/y)),d.frameDelta=y,d.timeLastTick=f,d.timeBuffer+=d.frameDelta,d.timeBuffer=a.clamp(d.timeBuffer,0,d.frameDelta+p*i._timeBufferMargin),d.lastUpdatesDeferred=0;var E=d.maxUpdates||Math.ceil(d.maxFrameTime/p),_={timestamp:h.timing.timestamp};o.trigger(d,"beforeTick",_),o.trigger(d,"tick",_);for(var S=a.now();p>0&&d.timeBuffer>=p*i._timeBufferMargin;){o.trigger(d,"beforeUpdate",_),l.update(h,p),o.trigger(d,"afterUpdate",_),d.timeBuffer-=p,m+=1;var C=a.now()-u,w=a.now()-S,T=C+i._elapsedNextEstimate*w/m;if(m>=E||T>d.maxFrameTime){d.lastUpdatesDeferred=Math.round(Math.max(0,d.timeBuffer/p-i._timeBufferMargin));break}}h.timing.lastUpdatesPerFrame=m,o.trigger(d,"afterTick",_),d.frameDeltaHistory.length>=100&&(d.lastUpdatesDeferred&&Math.round(d.frameDelta/p)>E?a.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):d.lastUpdatesDeferred&&a.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof d.isFixed<"u"&&a.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(d.deltaMin||d.deltaMax)&&a.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),d.fps!==0&&a.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},i.stop=function(d){i._cancelNextFrame(d)},i._onNextFrame=function(d,h){if(typeof window<"u"&&window.requestAnimationFrame)d.frameRequestId=window.requestAnimationFrame(h);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return d.frameRequestId},i._cancelNextFrame=function(d){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(d.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var c=function(d){for(var h=0,f=d.length,u=0;u<f;u+=1)h+=d[u];return h/f||0}})()},function(n,r,s){var i={};n.exports=i;var o=s(8),l=s(0),a=l.deprecated;(function(){i.collides=function(c,d){return o.collides(c,d)},a(i,"collides","SAT.collides  replaced by Collision.collides")})()},function(n,r,s){var i={};n.exports=i,s(1);var o=s(0);(function(){i.pathToVertices=function(l,a){typeof window<"u"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,d,h,f,u,p,m,y,g,v,x=[],E,_,S=0,C=0,w=0;a=a||15;var T=function(I,P,R){var M=R%2===1&&R>1;if(!g||I!=g.x||P!=g.y){g&&M?(E=g.x,_=g.y):(E=0,_=0);var L={x:E+I,y:_+P};(M||!g)&&(g=L),x.push(L),C=E+I,w=_+P}},k=function(I){var P=I.pathSegTypeAsLetter.toUpperCase();if(P!=="Z"){switch(P){case"M":case"L":case"T":case"C":case"S":case"Q":C=I.x,w=I.y;break;case"H":C=I.x;break;case"V":w=I.y;break}T(C,w,I.pathSegType)}};for(i._svgPathToAbsolute(l),h=l.getTotalLength(),p=[],c=0;c<l.pathSegList.numberOfItems;c+=1)p.push(l.pathSegList.getItem(c));for(m=p.concat();S<h;){if(v=l.getPathSegAtLength(S),u=p[v],u!=y){for(;m.length&&m[0]!=u;)k(m.shift());y=u}switch(u.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=l.getPointAtLength(S),T(f.x,f.y,0);break}S+=a}for(c=0,d=m.length;c<d;++c)k(m[c]);return x},i._svgPathToAbsolute=function(l){for(var a,c,d,h,f,u,p=l.pathSegList,m=0,y=0,g=p.numberOfItems,v=0;v<g;++v){var x=p.getItem(v),E=x.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(E))"x"in x&&(m=x.x),"y"in x&&(y=x.y);else switch("x1"in x&&(d=m+x.x1),"x2"in x&&(f=m+x.x2),"y1"in x&&(h=y+x.y1),"y2"in x&&(u=y+x.y2),"x"in x&&(m+=x.x),"y"in x&&(y+=x.y),E){case"m":p.replaceItem(l.createSVGPathSegMovetoAbs(m,y),v);break;case"l":p.replaceItem(l.createSVGPathSegLinetoAbs(m,y),v);break;case"h":p.replaceItem(l.createSVGPathSegLinetoHorizontalAbs(m),v);break;case"v":p.replaceItem(l.createSVGPathSegLinetoVerticalAbs(y),v);break;case"c":p.replaceItem(l.createSVGPathSegCurvetoCubicAbs(m,y,d,h,f,u),v);break;case"s":p.replaceItem(l.createSVGPathSegCurvetoCubicSmoothAbs(m,y,f,u),v);break;case"q":p.replaceItem(l.createSVGPathSegCurvetoQuadraticAbs(m,y,d,h),v);break;case"t":p.replaceItem(l.createSVGPathSegCurvetoQuadraticSmoothAbs(m,y),v);break;case"a":p.replaceItem(l.createSVGPathSegArcAbs(m,y,x.r1,x.r2,x.angle,x.largeArcFlag,x.sweepFlag),v);break;case"z":case"Z":m=a,y=c;break}(E=="M"||E=="m")&&(a=m,c=y)}}})()},function(n,r,s){var i={};n.exports=i;var o=s(6);s(0),function(){i.create=o.create,i.add=o.add,i.remove=o.remove,i.clear=o.clear,i.addComposite=o.addComposite,i.addBody=o.addBody,i.addConstraint=o.addConstraint}()}])})})(Im);var q0=Im.exports;const J0=ph(q0),Z0=()=>{};var fd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=function(t,e){if(!t)throw Qr(e)},Qr=function(t){return new Error("Firebase Database ("+Pm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},e_=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],a=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},el={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,a=s+2<t.length,c=a?t[s+2]:0,d=i>>2,h=(i&3)<<4|l>>4;let f=(l&15)<<2|c>>6,u=c&63;a||(u=64,o||(f=64)),r.push(n[d],n[h],n[f],n[u])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Nm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):e_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||c==null||h==null)throw new t_;const f=i<<2|l>>4;if(r.push(f),c!==64){const u=l<<4&240|c>>2;if(r.push(u),h!==64){const p=c<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class t_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Rm=function(t){const e=Nm(t);return el.encodeByteArray(e,!0)},wo=function(t){return Rm(t).replace(/\./g,"")},Ga=function(t){try{return el.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t){return Am(void 0,t)}function Am(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!r_(n)||(t[n]=Am(t[n],e[n]));return t}function r_(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=()=>Mm().__FIREBASE_DEFAULTS__,s_=()=>{if(typeof process>"u"||typeof fd>"u")return;const t=fd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},o_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ga(t[1]);return e&&JSON.parse(e)},Dm=()=>{try{return Z0()||i_()||s_()||o_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},l_=t=>{var e,n;return(n=(e=Dm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},a_=t=>{const e=l_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Lm=()=>{var t;return(t=Dm())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function u_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[wo(JSON.stringify(n)),wo(JSON.stringify(o)),""].join(".")}const ki={};function f_(){const t={prod:[],emulator:[]};for(const e of Object.keys(ki))ki[e]?t.emulator.push(e):t.prod.push(e);return t}function d_(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let dd=!1;function h_(t,e){if(typeof window>"u"||typeof document>"u"||!oc(window.location.host)||ki[t]===e||ki[t]||dd)return;ki[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=f_().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function a(f,u){f.setAttribute("width","24"),f.setAttribute("id",u),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{dd=!0,o()},f}function d(f,u){f.setAttribute("id",u),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=d_(r),u=n("text"),p=document.getElementById(u)||document.createElement("span"),m=n("learnmore"),y=document.getElementById(m)||document.createElement("a"),g=n("preprendIcon"),v=document.getElementById(g)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const x=f.element;l(x),d(y,m);const E=c();a(v,g),x.append(v,p,y,E),document.body.appendChild(x)}i?(p.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",u)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Om(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p_())}function m_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function g_(){return Pm.NODE_ADMIN===!0}function lc(){try{return typeof indexedDB=="object"}catch{return!1}}function v_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="FirebaseError";class us extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=y_,Object.setPrototypeOf(this,us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ac.prototype.create)}}class ac{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?__(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new us(s,l,r)}}function __(t,e){return t.replace(x_,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const x_=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t){return JSON.parse(t)}function Oe(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Qi(Ga(i[0])||""),n=Qi(Ga(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},w_=function(t){const e=Fm(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},S_=function(t){const e=Fm(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Vr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function hd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function So(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Co(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(pd(i)&&pd(o)){if(!Co(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function pd(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],c,d;for(let h=0;h<80;h++){h<40?h<20?(c=l^i&(o^l),d=1518500249):(c=i^o^l,d=1859775393):h<60?(c=i&o|l&(i|o),d=2400959708):(c=i^o^l,d=3395469782);const f=(s<<5|s>>>27)+c+a+d+r[h]&4294967295;a=l,l=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function uc(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,O(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},tl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=1e3,I_=2,P_=4*60*60*1e3,N_=.5;function R_(t,e=T_,n=I_){const r=e*Math.pow(n,t),s=Math.round(N_*r*(Math.random()-.5)*2);return Math.min(P_,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t){return t&&t._delegate?t._delegate:t}class tr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Pn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(D_(e))try{this.getOrInitializeService({instanceIdentifier:jn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=jn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jn){return this.instances.has(e)}getOptions(e=jn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:M_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jn){return this.component?this.component.multipleInstances?e:jn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M_(t){return t===jn?void 0:t}function D_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new A_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const O_={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},F_=oe.INFO,B_={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},b_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=B_[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cc{constructor(e){this.name=e,this._logLevel=F_,this._logHandler=b_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?O_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const j_=(t,e)=>e.some(n=>t instanceof n);let md,gd;function z_(){return md||(md=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V_(){return gd||(gd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bm=new WeakMap,Ka=new WeakMap,bm=new WeakMap,zl=new WeakMap,fc=new WeakMap;function U_(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Cn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Bm.set(n,t)}).catch(()=>{}),fc.set(e,t),e}function H_(t){if(Ka.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ka.set(t,e)}let Qa={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ka.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function W_(t){Qa=t(Qa)}function $_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vl(this),e,...n);return bm.set(r,e.sort?e.sort():[e]),Cn(r)}:V_().includes(t)?function(...e){return t.apply(Vl(this),e),Cn(Bm.get(this))}:function(...e){return Cn(t.apply(Vl(this),e))}}function G_(t){return typeof t=="function"?$_(t):(t instanceof IDBTransaction&&H_(t),j_(t,z_())?new Proxy(t,Qa):t)}function Cn(t){if(t instanceof IDBRequest)return U_(t);if(zl.has(t))return zl.get(t);const e=G_(t);return e!==t&&(zl.set(t,e),fc.set(e,t)),e}const Vl=t=>fc.get(t);function K_(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Cn(o);return r&&o.addEventListener("upgradeneeded",a=>{r(Cn(o.result),a.oldVersion,a.newVersion,Cn(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{i&&a.addEventListener("close",()=>i()),s&&a.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const Q_=["get","getKey","getAll","getAllKeys","count"],Y_=["put","add","delete","clear"],Ul=new Map;function vd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ul.get(e))return Ul.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Y_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Q_.includes(n)))return;const i=async function(o,...l){const a=this.transaction(o,s?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),s&&a.done]))[0]};return Ul.set(e,i),i}W_(t=>({...t,get:(e,n,r)=>vd(e,n)||t.get(e,n,r),has:(e,n)=>!!vd(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(q_(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function q_(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ya="@firebase/app",yd="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en=new cc("@firebase/app"),J_="@firebase/app-compat",Z_="@firebase/analytics-compat",e1="@firebase/analytics",t1="@firebase/app-check-compat",n1="@firebase/app-check",r1="@firebase/auth",i1="@firebase/auth-compat",s1="@firebase/database",o1="@firebase/data-connect",l1="@firebase/database-compat",a1="@firebase/functions",u1="@firebase/functions-compat",c1="@firebase/installations",f1="@firebase/installations-compat",d1="@firebase/messaging",h1="@firebase/messaging-compat",p1="@firebase/performance",m1="@firebase/performance-compat",g1="@firebase/remote-config",v1="@firebase/remote-config-compat",y1="@firebase/storage",_1="@firebase/storage-compat",x1="@firebase/firestore",w1="@firebase/ai",S1="@firebase/firestore-compat",C1="firebase",E1="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="[DEFAULT]",k1={[Ya]:"fire-core",[J_]:"fire-core-compat",[e1]:"fire-analytics",[Z_]:"fire-analytics-compat",[n1]:"fire-app-check",[t1]:"fire-app-check-compat",[r1]:"fire-auth",[i1]:"fire-auth-compat",[s1]:"fire-rtdb",[o1]:"fire-data-connect",[l1]:"fire-rtdb-compat",[a1]:"fire-fn",[u1]:"fire-fn-compat",[c1]:"fire-iid",[f1]:"fire-iid-compat",[d1]:"fire-fcm",[h1]:"fire-fcm-compat",[p1]:"fire-perf",[m1]:"fire-perf-compat",[g1]:"fire-rc",[v1]:"fire-rc-compat",[y1]:"fire-gcs",[_1]:"fire-gcs-compat",[x1]:"fire-fst",[S1]:"fire-fst-compat",[w1]:"fire-vertex","fire-js":"fire-js",[C1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=new Map,T1=new Map,qa=new Map;function _d(t,e){try{t.container.addComponent(e)}catch(n){en.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ur(t){const e=t.name;if(qa.has(e))return en.debug(`There were multiple attempts to register component ${e}.`),!1;qa.set(e,t);for(const n of Eo.values())_d(n,t);for(const n of T1.values())_d(n,t);return!0}function dc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function I1(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},En=new ac("app","Firebase",P1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=E1;function jm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Xa,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw En.create("bad-app-name",{appName:String(s)});if(n||(n=Lm()),!n)throw En.create("no-options");const i=Eo.get(s);if(i){if(Co(n,i.options)&&Co(r,i.config))return i;throw En.create("duplicate-app",{appName:s})}const o=new L_(s);for(const a of qa.values())o.addComponent(a);const l=new N1(n,r,o);return Eo.set(s,l),l}function zm(t=Xa){const e=Eo.get(t);if(!e&&t===Xa&&Lm())return jm();if(!e)throw En.create("no-app",{appName:t});return e}function Qn(t,e,n){let r=k1[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),en.warn(o.join(" "));return}Ur(new tr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="firebase-heartbeat-database",M1=1,Yi="firebase-heartbeat-store";let Hl=null;function Vm(){return Hl||(Hl=K_(A1,M1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yi)}catch(n){console.warn(n)}}}}).catch(t=>{throw En.create("idb-open",{originalErrorMessage:t.message})})),Hl}async function D1(t){try{const n=(await Vm()).transaction(Yi),r=await n.objectStore(Yi).get(Um(t));return await n.done,r}catch(e){if(e instanceof us)en.warn(e.message);else{const n=En.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});en.warn(n.message)}}}async function xd(t,e){try{const r=(await Vm()).transaction(Yi,"readwrite");await r.objectStore(Yi).put(e,Um(t)),await r.done}catch(n){if(n instanceof us)en.warn(n.message);else{const r=En.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});en.warn(r.message)}}}function Um(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=1024,O1=30;class F1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new b1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wd();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>O1){const o=j1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){en.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wd(),{heartbeatsToSend:r,unsentEntries:s}=B1(this._heartbeatsCache.heartbeats),i=wo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return en.warn(n),""}}}function wd(){return new Date().toISOString().substring(0,10)}function B1(t,e=L1){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Sd(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Sd(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class b1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lc()?v_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await D1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return xd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return xd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Sd(t){return wo(JSON.stringify({version:2,heartbeats:t})).length}function j1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t){Ur(new tr("platform-logger",e=>new X_(e),"PRIVATE")),Ur(new tr("heartbeat",e=>new F1(e),"PRIVATE")),Qn(Ya,yd,t),Qn(Ya,yd,"esm2020"),Qn("fire-js","")}z1("");var V1="firebase",U1="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn(V1,U1,"app");var Cd={};const Ed="@firebase/database",kd="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hm="";function H1(t){Hm=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Oe(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Qi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Vt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new W1(e)}}catch{}return new $1},Wn=Wm("localStorage"),G1=Wm("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new cc("@firebase/database"),K1=function(){let t=1;return function(){return t++}}(),$m=function(t){const e=k_(t),n=new E_;n.update(e);const r=n.digest();return el.encodeByteArray(r)},cs=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=cs.apply(null,r):typeof r=="object"?e+=Oe(r):e+=r,e+=" "}return e};let Ti=null,Td=!0;const Q1=function(t,e){O(!0,"Can't turn on custom loggers persistently."),Mr.logLevel=oe.VERBOSE,Ti=Mr.log.bind(Mr)},Ge=function(...t){if(Td===!0&&(Td=!1,Ti===null&&G1.get("logging_enabled")===!0&&Q1()),Ti){const e=cs.apply(null,t);Ti(e)}},fs=function(t){return function(...e){Ge(t,...e)}},Ja=function(...t){const e="FIREBASE INTERNAL ERROR: "+cs(...t);Mr.error(e)},tn=function(...t){const e=`FIREBASE FATAL ERROR: ${cs(...t)}`;throw Mr.error(e),new Error(e)},ot=function(...t){const e="FIREBASE WARNING: "+cs(...t);Mr.warn(e)},Y1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ot("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},hc=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},X1=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},nr="[MIN_NAME]",Nn="[MAX_NAME]",Yr=function(t,e){if(t===e)return 0;if(t===nr||e===Nn)return-1;if(e===nr||t===Nn)return 1;{const n=Id(t),r=Id(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},q1=function(t,e){return t===e?0:t<e?-1:1},li=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Oe(e))},pc=function(t){if(typeof t!="object"||t===null)return Oe(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Oe(e[r]),n+=":",n+=pc(t[e[r]]);return n+="}",n},Gm=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function lt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Km=function(t){O(!hc(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,l,a;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(a=n;a;a-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(s?1:0),c.reverse();const d=c.join("");let h="";for(a=0;a<64;a+=8){let f=parseInt(d.substr(a,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},J1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Z1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ex(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const tx=new RegExp("^-?(0*)\\d{1,10}$"),nx=-2147483648,rx=2147483647,Id=function(t){if(tx.test(t)){const e=Number(t);if(e>=nx&&e<=rx)return e}return null},Xr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ot("Exception was thrown by user callback.",n),e},Math.floor(0))}},ix=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ii=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,I1(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ot(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ge("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ot(e)}}class Ys{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ys.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc="5",Qm="v",Ym="s",Xm="r",qm="f",Jm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Zm="ls",eg="p",Za="ac",tg="websocket",ng="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n,r,s,i=!1,o="",l=!1,a=!1,c=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function lx(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function ig(t,e,n){O(typeof e=="string","typeof type must == string"),O(typeof n=="object","typeof params must == object");let r;if(e===tg)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ng)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);lx(t)&&(n.ns=t.namespace);const s=[];return lt(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.counters_={}}incrementCounter(e,n=1){Vt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return n_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl={},$l={};function gc(t){const e=t.toString();return Wl[e]||(Wl[e]=new ax),Wl[e]}function ux(t,e){const n=t.toString();return $l[n]||($l[n]=e()),$l[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Xr(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="start",fx="close",dx="pLPCommand",hx="pRTLPCB",sg="id",og="pw",lg="ser",px="cb",mx="seg",gx="ts",vx="d",yx="dframe",ag=1870,ug=30,_x=ag-ug,xx=25e3,wx=3e4;class Er{constructor(e,n,r,s,i,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fs(e),this.stats_=gc(n),this.urlFn=a=>(this.appCheckToken&&(a[Za]=this.appCheckToken),ig(n,ng,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new cx(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(wx)),X1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vc((...i)=>{const[o,l,a,c,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Pd)this.id=l,this.password=a;else if(o===fx)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,l]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Pd]="t",r[lg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[px]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Qm]=mc,this.transportSessionId&&(r[Ym]=this.transportSessionId),this.lastSessionId&&(r[Zm]=this.lastSessionId),this.applicationId&&(r[eg]=this.applicationId),this.appCheckToken&&(r[Za]=this.appCheckToken),typeof location<"u"&&location.hostname&&Jm.test(location.hostname)&&(r[Xm]=qm);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Er.forceAllow_=!0}static forceDisallow(){Er.forceDisallow_=!0}static isAvailable(){return Er.forceAllow_?!0:!Er.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!J1()&&!Z1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Oe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Rm(n),s=Gm(r,_x);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[yx]="t",r[sg]=e,r[og]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Oe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class vc{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=K1(),window[dx+this.uniqueCallbackIdentifier]=e,window[hx+this.uniqueCallbackIdentifier]=n,this.myIFrame=vc.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Ge("frame writing exception"),l.stack&&Ge(l.stack),Ge(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ge("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[sg]=this.myID,e[og]=this.myPW,e[lg]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ug+r.length<=ag;){const o=this.pendingSegs.shift();r=r+"&"+mx+s+"="+o.seg+"&"+gx+s+"="+o.ts+"&"+vx+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(xx)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ge("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=16384,Cx=45e3;let ko=null;typeof MozWebSocket<"u"?ko=MozWebSocket:typeof WebSocket<"u"&&(ko=WebSocket);class Pt{constructor(e,n,r,s,i,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fs(this.connId),this.stats_=gc(n),this.connURL=Pt.connectionURL_(n,o,l,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Qm]=mc,typeof location<"u"&&location.hostname&&Jm.test(location.hostname)&&(o[Xm]=qm),n&&(o[Ym]=n),r&&(o[Zm]=r),s&&(o[Za]=s),i&&(o[eg]=i),ig(e,tg,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wn.set("previous_websocket_failure",!0);try{let r;g_(),this.mySock=new ko(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Pt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&ko!==null&&!Pt.forceDisallow_}static previouslyFailed(){return Wn.isInMemoryStorage||Wn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Wn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Qi(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(O(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Oe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Gm(n,Sx);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Cx))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Pt.responsesRequiredToBeHealthy=2;Pt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{static get ALL_TRANSPORTS(){return[Er,Pt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Pt&&Pt.isAvailable();let r=n&&!Pt.previouslyFailed();if(e.webSocketOnly&&(n||ot("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Pt];else{const s=this.transports_=[];for(const i of Xi.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Xi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Xi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=6e4,kx=5e3,Tx=10*1024,Ix=100*1024,Gl="t",Nd="d",Px="s",Rd="r",Nx="e",Ad="o",Md="a",Dd="n",Ld="p",Rx="h";class Ax{constructor(e,n,r,s,i,o,l,a,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fs("c:"+this.id+":"),this.transportManager_=new Xi(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Ii(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Ix?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Tx?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Gl in e){const n=e[Gl];n===Md?this.upgradeIfSecondaryHealthy_():n===Rd?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Ad&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=li("t",e),r=li("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ld,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Md,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Dd,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=li("t",e),r=li("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=li(Gl,e);if(Nd in e){const r=e[Nd];if(n===Rx){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Dd){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Px?this.onConnectionShutdown_(r):n===Rd?this.onReset_(r):n===Nx?Ja("Server Error: "+r):n===Ad?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ja("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),mc!==r&&ot("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ii(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Ex))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ii(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(kx))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ld,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this.allowedEvents_=e,this.listeners_={},O(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){O(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends fg{static getInstance(){return new To}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Om()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return O(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=32,Fd=768;class se{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function re(){return new se("")}function Y(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Rn(t){return t.pieces_.length-t.pieceNum_}function le(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new se(t.pieces_,e)}function dg(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Mx(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function hg(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function pg(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new se(e,0)}function Ie(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof se)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new se(n,0)}function X(t){return t.pieceNum_>=t.pieces_.length}function et(t,e){const n=Y(t),r=Y(e);if(n===null)return e;if(n===r)return et(le(t),le(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function yc(t,e){if(Rn(t)!==Rn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Nt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Rn(t)>Rn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Dx{constructor(e,n){this.errorPrefix_=n,this.parts_=hg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=tl(this.parts_[r]);mg(this)}}function Lx(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=tl(e),mg(t)}function Ox(t){const e=t.parts_.pop();t.byteLength_-=tl(e),t.parts_.length>0&&(t.byteLength_-=1)}function mg(t){if(t.byteLength_>Fd)throw new Error(t.errorPrefix_+"has a key path longer than "+Fd+" bytes ("+t.byteLength_+").");if(t.parts_.length>Od)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Od+") or object contains a cycle "+zn(t))}function zn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends fg{static getInstance(){return new _c}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return O(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=1e3,Fx=60*5*1e3,Bd=30*1e3,Bx=1.3,bx=3e4,jx="server_kill",bd=3;class Yt extends cg{constructor(e,n,r,s,i,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Yt.nextPersistentConnectionId_++,this.log_=fs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ai,this.maxReconnectDelay_=Fx,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_c.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&To.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Oe(i)),O(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Pn,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),O(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),O(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,l=>{const a=l.d,c=l.s;Yt.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",l),c!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(c,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Vt(e,"w")){const r=Vr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();ot(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||S_(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Bd)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=w_(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),O(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Oe(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Ja("Unrecognized action received from server: "+Oe(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){O(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ai,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ai,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>bx&&(this.reconnectDelay_=ai),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Bx)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Yt.nextConnectionId_++,i=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},c=function(h){O(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:a,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?Ge("getToken() completed but was canceled"):(Ge("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,l=new Ax(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,u=>{ot(u+" ("+this.repoInfo_.toString()+")"),this.interrupt(jx)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&ot(h),a())}}}interrupt(e){Ge("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ge("Resuming connection for reason: "+e),delete this.interruptReasons_[e],hd(this.interruptReasons_)&&(this.reconnectDelay_=ai,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>pc(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new se(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Ge("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=bd&&(this.reconnectDelay_=Bd,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ge("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=bd&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Hm.replace(/\./g,"-")]=1,Om()?e["framework.cordova"]=1:m_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=To.getInstance().currentlyOnline();return hd(this.interruptReasons_)&&e}}Yt.nextPersistentConnectionId_=0;Yt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new q(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new q(nr,e),s=new q(nr,n);return this.compare(r,s)!==0}minPost(){return q.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ds;class gg extends nl{static get __EMPTY_NODE(){return Ds}static set __EMPTY_NODE(e){Ds=e}compare(e,n){return Yr(e.name,n.name)}isDefinedOn(e){throw Qr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return q.MIN}maxPost(){return new q(Nn,Ds)}makePost(e,n){return O(typeof e=="string","KeyIndex indexValue must always be a string."),new q(e,Ds)}toString(){return".key"}}const Yn=new gg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Le{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Le.RED,this.left=s??tt.EMPTY_NODE,this.right=i??tt.EMPTY_NODE}copy(e,n,r,s,i){return new Le(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return tt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return tt.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Le.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Le.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Le.RED=!0;Le.BLACK=!1;class zx{copy(e,n,r,s,i){return this}insert(e,n,r){return new Le(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class tt{constructor(e,n=tt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new tt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Le.BLACK,null,null))}remove(e){return new tt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Le.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ls(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ls(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ls(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ls(this.root_,null,this.comparator_,!0,e)}}tt.EMPTY_NODE=new zx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(t,e){return Yr(t.name,e.name)}function xc(t,e){return Yr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu;function Ux(t){eu=t}const vg=function(t){return typeof t=="number"?"number:"+Km(t):"string:"+t},yg=function(t){if(t.isLeafNode()){const e=t.val();O(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Vt(e,".sv"),"Priority must be a string or number.")}else O(t===eu||t.isEmpty(),"priority of unexpected type.");O(t===eu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jd;class Me{static set __childrenNodeConstructor(e){jd=e}static get __childrenNodeConstructor(){return jd}constructor(e,n=Me.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,O(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yg(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Me(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Me.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return X(e)?this:Y(e)===".priority"?this.priorityNode_:Me.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Me.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Y(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(O(r!==".priority"||Rn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Me.__childrenNodeConstructor.EMPTY_NODE.updateChild(le(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+vg(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Km(this.value_):e+=this.value_,this.lazyHash_=$m(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Me.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Me.__childrenNodeConstructor?-1:(O(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Me.VALUE_TYPE_ORDER.indexOf(n),i=Me.VALUE_TYPE_ORDER.indexOf(r);return O(s>=0,"Unknown leaf type: "+n),O(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Me.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _g,xg;function Hx(t){_g=t}function Wx(t){xg=t}class $x extends nl{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Yr(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return q.MIN}maxPost(){return new q(Nn,new Me("[PRIORITY-POST]",xg))}makePost(e,n){const r=_g(e);return new q(n,new Me("[PRIORITY-POST]",r))}toString(){return".priority"}}const ge=new $x;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=Math.log(2);class Kx{constructor(e){const n=i=>parseInt(Math.log(i)/Gx,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Io=function(t,e,n,r){t.sort(e);const s=function(a,c){const d=c-a;let h,f;if(d===0)return null;if(d===1)return h=t[a],f=n?n(h):h,new Le(f,h.node,Le.BLACK,null,null);{const u=parseInt(d/2,10)+a,p=s(a,u),m=s(u+1,c);return h=t[u],f=n?n(h):h,new Le(f,h.node,Le.BLACK,p,m)}},i=function(a){let c=null,d=null,h=t.length;const f=function(p,m){const y=h-p,g=h;h-=p;const v=s(y+1,g),x=t[y],E=n?n(x):x;u(new Le(E,x.node,m,null,v))},u=function(p){c?(c.left=p,c=p):(d=p,c=p)};for(let p=0;p<a.count;++p){const m=a.nextBitIsOne(),y=Math.pow(2,a.count-(p+1));m?f(y,Le.BLACK):(f(y,Le.BLACK),f(y,Le.RED))}return d},o=new Kx(t.length),l=i(o);return new tt(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl;const fr={};class Kt{static get Default(){return O(fr&&ge,"ChildrenNode.ts has not been loaded"),Kl=Kl||new Kt({".priority":fr},{".priority":ge}),Kl}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Vr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof tt?n:null}hasIndex(e){return Vt(this.indexSet_,e.toString())}addIndex(e,n){O(e!==Yn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(q.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let l;s?l=Io(r,e.getCompare()):l=fr;const a=e.toString(),c={...this.indexSet_};c[a]=e;const d={...this.indexes_};return d[a]=l,new Kt(d,c)}addToIndexes(e,n){const r=So(this.indexes_,(s,i)=>{const o=Vr(this.indexSet_,i);if(O(o,"Missing index implementation for "+i),s===fr)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(q.Wrap);let c=a.getNext();for(;c;)c.name!==e.name&&l.push(c),c=a.getNext();return l.push(e),Io(l,o.getCompare())}else return fr;else{const l=n.get(e.name);let a=s;return l&&(a=a.remove(new q(e.name,l))),a.insert(e,e.node)}});return new Kt(r,this.indexSet_)}removeFromIndexes(e,n){const r=So(this.indexes_,s=>{if(s===fr)return s;{const i=n.get(e.name);return i?s.remove(new q(e.name,i)):s}});return new Kt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ui;class U{static get EMPTY_NODE(){return ui||(ui=new U(new tt(xc),null,Kt.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&yg(this.priorityNode_),this.children_.isEmpty()&&O(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ui}updatePriority(e){return this.children_.isEmpty()?this:new U(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ui:n}}getChild(e){const n=Y(e);return n===null?this:this.getImmediateChild(n).getChild(le(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(O(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new q(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?ui:this.priorityNode_;return new U(s,o,i)}}updateChild(e,n){const r=Y(e);if(r===null)return n;{O(Y(e)!==".priority"||Rn(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(le(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(ge,(o,l)=>{n[o]=l.val(e),r++,i&&U.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+vg(this.getPriority().val())+":"),this.forEachChild(ge,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":$m(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new q(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new q(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new q(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,q.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,q.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ds?-1:0}withIndex(e){if(e===Yn||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new U(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Yn||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ge),s=n.getIterator(ge);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Yn?null:this.indexMap_.get(e.toString())}}U.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Qx extends U{constructor(){super(new tt(xc),U.EMPTY_NODE,Kt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return U.EMPTY_NODE}isEmpty(){return!1}}const ds=new Qx;Object.defineProperties(q,{MIN:{value:new q(nr,U.EMPTY_NODE)},MAX:{value:new q(Nn,ds)}});gg.__EMPTY_NODE=U.EMPTY_NODE;Me.__childrenNodeConstructor=U;Ux(ds);Wx(ds);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=!0;function ze(t,e=null){if(t===null)return U.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),O(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Me(n,ze(e))}if(!(t instanceof Array)&&Yx){const n=[];let r=!1;if(lt(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=ze(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new q(o,a)))}}),n.length===0)return U.EMPTY_NODE;const i=Io(n,Vx,o=>o.name,xc);if(r){const o=Io(n,ge.getCompare());return new U(i,ze(e),new Kt({".priority":o},{".priority":ge}))}else return new U(i,ze(e),Kt.Default)}else{let n=U.EMPTY_NODE;return lt(t,(r,s)=>{if(Vt(t,r)&&r.substring(0,1)!=="."){const i=ze(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(ze(e))}}Hx(ze);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends nl{constructor(e){super(),this.indexPath_=e,O(!X(e)&&Y(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Yr(e.name,n.name):i}makePost(e,n){const r=ze(e),s=U.EMPTY_NODE.updateChild(this.indexPath_,r);return new q(n,s)}maxPost(){const e=U.EMPTY_NODE.updateChild(this.indexPath_,ds);return new q(Nn,e)}toString(){return hg(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx extends nl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Yr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return q.MIN}maxPost(){return q.MAX}makePost(e,n){const r=ze(e);return new q(n,r)}toString(){return".value"}}const wg=new Xx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t){return{type:"value",snapshotNode:t}}function Hr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function qi(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ji(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function qx(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){O(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(s).equals(r.getChild(s))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(qi(n,l)):O(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Hr(n,r)):o.trackChildChange(Ji(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ge,(s,i)=>{n.hasChild(s)||r.trackChildChange(qi(s,i))}),n.isLeafNode()||n.forEachChild(ge,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(Ji(s,i,o))}else r.trackChildChange(Hr(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?U.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.indexedFilter_=new Sc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Zi.getStartPost_(e),this.endPost_=Zi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new q(n,r))||(r=U.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=U.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(U.EMPTY_NODE);const i=this;return n.forEachChild(ge,(o,l)=>{i.matches(new q(o,l))||(s=s.updateImmediateChild(o,U.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Zi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new q(n,r))||(r=U.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=U.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=U.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const l=i.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(U.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const l=i.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:s=s.updateImmediateChild(l.name,U.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,u)=>h(u,f)}else o=this.index_.getCompare();const l=e;O(l.numChildren()===this.limit_,"");const a=new q(n,r),c=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),d=this.rangedFilter_.matches(a);if(l.hasChild(n)){const h=l.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const u=f==null?1:o(f,a);if(d&&!r.isEmpty()&&u>=0)return i!=null&&i.trackChildChange(Ji(n,r,h)),l.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(qi(n,h));const m=l.updateImmediateChild(n,U.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(Hr(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}}else return r.isEmpty()?e:d&&o(c,a)>=0?(i!=null&&(i.trackChildChange(qi(c.name,c.node)),i.trackChildChange(Hr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(c.name,U.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ge}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return O(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return O(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:nr}hasEnd(){return this.endSet_}getIndexEndValue(){return O(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return O(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return O(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ge}copy(){const e=new Cc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Zx(t){return t.loadsAllData()?new Sc(t.getIndex()):t.hasLimit()?new Jx(t):new Zi(t)}function ew(t,e){const n=t.copy();return n.index_=e,n}function zd(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ge?n="$priority":t.index_===wg?n="$value":t.index_===Yn?n="$key":(O(t.index_ instanceof wc,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Oe(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Oe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Oe(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Oe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Oe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Vd(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ge&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends cg{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(O(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=fs("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Po.getListenId_(e,r),l={};this.listens_[o]=l;const a=zd(e._queryParams);this.restRequest_(i+".json",a,(c,d)=>{let h=d;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(i,h,!1,r),Vr(this.listens_,o)===l){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(e,n){const r=Po.getListenId_(e,n);delete this.listens_[r]}get(e){const n=zd(e._queryParams),r=e._path.toString(),s=new Pn;return this.restRequest_(r+".json",n,(i,o)=>{let l=o;i===404&&(l=null,i=null),i===null?(this.onDataUpdate_(r,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+C_(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Qi(l.responseText)}catch{ot("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&ot("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.rootNode_=U.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(){return{value:null,children:new Map}}function Cg(t,e,n){if(X(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Y(e);t.children.has(r)||t.children.set(r,No());const s=t.children.get(r);e=le(e),Cg(s,e,n)}}function tu(t,e,n){t.value!==null?n(e,t.value):nw(t,(r,s)=>{const i=new se(e.toString()+"/"+r);tu(s,i,n)})}function nw(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&lt(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=10*1e3,iw=30*1e3,sw=5*60*1e3;class ow{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new rw(e);const r=Ud+(iw-Ud)*Math.random();Ii(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;lt(e,(s,i)=>{i>0&&Vt(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Ii(this.reportStats_.bind(this),Math.floor(Math.random()*2*sw))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Rt||(Rt={}));function Eg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ec(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function kc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Rt.ACK_USER_WRITE,this.source=Eg()}operationForChild(e){if(X(this.path)){if(this.affectedTree.value!=null)return O(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new se(e));return new Ro(re(),n,this.revert)}}else return O(Y(this.path)===e,"operationForChild called for unrelated child."),new Ro(le(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n){this.source=e,this.path=n,this.type=Rt.LISTEN_COMPLETE}operationForChild(e){return X(this.path)?new es(this.source,re()):new es(this.source,le(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Rt.OVERWRITE}operationForChild(e){return X(this.path)?new rr(this.source,re(),this.snap.getImmediateChild(e)):new rr(this.source,le(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Rt.MERGE}operationForChild(e){if(X(this.path)){const n=this.children.subtree(new se(e));return n.isEmpty()?null:n.value?new rr(this.source,re(),n.value):new ts(this.source,re(),n)}else return O(Y(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ts(this.source,le(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(X(e))return this.isFullyInitialized()&&!this.filtered_;const n=Y(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function aw(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(qx(o.childName,o.snapshotNode))}),ci(t,s,"child_removed",e,r,n),ci(t,s,"child_added",e,r,n),ci(t,s,"child_moved",i,r,n),ci(t,s,"child_changed",e,r,n),ci(t,s,"value",e,r,n),s}function ci(t,e,n,r,s,i){const o=r.filter(l=>l.type===n);o.sort((l,a)=>cw(t,l,a)),o.forEach(l=>{const a=uw(t,l,i);s.forEach(c=>{c.respondsTo(l.type)&&e.push(c.createEvent(a,t.query_))})})}function uw(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function cw(t,e,n){if(e.childName==null||n.childName==null)throw Qr("Should only compare child_ events.");const r=new q(e.childName,e.snapshotNode),s=new q(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t,e){return{eventCache:t,serverCache:e}}function Pi(t,e,n,r){return rl(new ir(e,n,r),t.serverCache)}function kg(t,e,n,r){return rl(t.eventCache,new ir(e,n,r))}function nu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function sr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql;const fw=()=>(Ql||(Ql=new tt(q1)),Ql);class ce{static fromObject(e){let n=new ce(null);return lt(e,(r,s)=>{n=n.set(new se(r),s)}),n}constructor(e,n=fw()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:re(),value:this.value};if(X(e))return null;{const r=Y(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(le(e),n);return i!=null?{path:Ie(new se(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(X(e))return this;{const n=Y(e),r=this.children.get(n);return r!==null?r.subtree(le(e)):new ce(null)}}set(e,n){if(X(e))return new ce(n,this.children);{const r=Y(e),i=(this.children.get(r)||new ce(null)).set(le(e),n),o=this.children.insert(r,i);return new ce(this.value,o)}}remove(e){if(X(e))return this.children.isEmpty()?new ce(null):new ce(null,this.children);{const n=Y(e),r=this.children.get(n);if(r){const s=r.remove(le(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new ce(null):new ce(this.value,i)}else return this}}get(e){if(X(e))return this.value;{const n=Y(e),r=this.children.get(n);return r?r.get(le(e)):null}}setTree(e,n){if(X(e))return n;{const r=Y(e),i=(this.children.get(r)||new ce(null)).setTree(le(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new ce(this.value,o)}}fold(e){return this.fold_(re(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Ie(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,re(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(X(e))return null;{const i=Y(e),o=this.children.get(i);return o?o.findOnPath_(le(e),Ie(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,re(),n)}foreachOnPath_(e,n,r){if(X(e))return this;{this.value&&r(n,this.value);const s=Y(e),i=this.children.get(s);return i?i.foreachOnPath_(le(e),Ie(n,s),r):new ce(null)}}foreach(e){this.foreach_(re(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Ie(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.writeTree_=e}static empty(){return new Dt(new ce(null))}}function Ni(t,e,n){if(X(e))return new Dt(new ce(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=et(s,e);return i=i.updateChild(o,n),new Dt(t.writeTree_.set(s,i))}else{const s=new ce(n),i=t.writeTree_.setTree(e,s);return new Dt(i)}}}function Hd(t,e,n){let r=t;return lt(n,(s,i)=>{r=Ni(r,Ie(e,s),i)}),r}function Wd(t,e){if(X(e))return Dt.empty();{const n=t.writeTree_.setTree(e,new ce(null));return new Dt(n)}}function ru(t,e){return ar(t,e)!=null}function ar(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(et(n.path,e)):null}function $d(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ge,(r,s)=>{e.push(new q(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new q(r,s.value))}),e}function kn(t,e){if(X(e))return t;{const n=ar(t,e);return n!=null?new Dt(new ce(n)):new Dt(t.writeTree_.subtree(e))}}function iu(t){return t.writeTree_.isEmpty()}function Wr(t,e){return Tg(re(),t.writeTree_,e)}function Tg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(O(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=Tg(Ie(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ie(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t,e){return Rg(e,t)}function dw(t,e,n,r,s){O(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Ni(t.visibleWrites,e,n)),t.lastWriteId=r}function hw(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function pw(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);O(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&mw(l,r.path)?s=!1:Nt(r.path,l.path)&&(i=!0)),o--}if(s){if(i)return gw(t),!0;if(r.snap)t.visibleWrites=Wd(t.visibleWrites,r.path);else{const l=r.children;lt(l,a=>{t.visibleWrites=Wd(t.visibleWrites,Ie(r.path,a))})}return!0}else return!1}function mw(t,e){if(t.snap)return Nt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Nt(Ie(t.path,n),e))return!0;return!1}function gw(t){t.visibleWrites=Ig(t.allWrites,vw,re()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function vw(t){return t.visible}function Ig(t,e,n){let r=Dt.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let l;if(i.snap)Nt(n,o)?(l=et(n,o),r=Ni(r,l,i.snap)):Nt(o,n)&&(l=et(o,n),r=Ni(r,re(),i.snap.getChild(l)));else if(i.children){if(Nt(n,o))l=et(n,o),r=Hd(r,l,i.children);else if(Nt(o,n))if(l=et(o,n),X(l))r=Hd(r,re(),i.children);else{const a=Vr(i.children,Y(l));if(a){const c=a.getChild(le(l));r=Ni(r,re(),c)}}}else throw Qr("WriteRecord should have .snap or .children")}}return r}function Pg(t,e,n,r,s){if(!r&&!s){const i=ar(t.visibleWrites,e);if(i!=null)return i;{const o=kn(t.visibleWrites,e);if(iu(o))return n;if(n==null&&!ru(o,re()))return null;{const l=n||U.EMPTY_NODE;return Wr(o,l)}}}else{const i=kn(t.visibleWrites,e);if(!s&&iu(i))return n;if(!s&&n==null&&!ru(i,re()))return null;{const o=function(c){return(c.visible||s)&&(!r||!~r.indexOf(c.writeId))&&(Nt(c.path,e)||Nt(e,c.path))},l=Ig(t.allWrites,o,e),a=n||U.EMPTY_NODE;return Wr(l,a)}}}function yw(t,e,n){let r=U.EMPTY_NODE;const s=ar(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(ge,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=kn(t.visibleWrites,e);return n.forEachChild(ge,(o,l)=>{const a=Wr(kn(i,new se(o)),l);r=r.updateImmediateChild(o,a)}),$d(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=kn(t.visibleWrites,e);return $d(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function _w(t,e,n,r,s){O(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Ie(e,n);if(ru(t.visibleWrites,i))return null;{const o=kn(t.visibleWrites,i);return iu(o)?s.getChild(n):Wr(o,s.getChild(n))}}function xw(t,e,n,r){const s=Ie(e,n),i=ar(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=kn(t.visibleWrites,s);return Wr(o,r.getNode().getImmediateChild(n))}else return null}function ww(t,e){return ar(t.visibleWrites,e)}function Sw(t,e,n,r,s,i,o){let l;const a=kn(t.visibleWrites,e),c=ar(a,re());if(c!=null)l=c;else if(n!=null)l=Wr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const d=[],h=o.getCompare(),f=i?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let u=f.getNext();for(;u&&d.length<s;)h(u,r)!==0&&d.push(u),u=f.getNext();return d}else return[]}function Cw(){return{visibleWrites:Dt.empty(),allWrites:[],lastWriteId:-1}}function Ao(t,e,n,r){return Pg(t.writeTree,t.treePath,e,n,r)}function Ic(t,e){return yw(t.writeTree,t.treePath,e)}function Gd(t,e,n,r){return _w(t.writeTree,t.treePath,e,n,r)}function Mo(t,e){return ww(t.writeTree,Ie(t.treePath,e))}function Ew(t,e,n,r,s,i){return Sw(t.writeTree,t.treePath,e,n,r,s,i)}function Pc(t,e,n){return xw(t.writeTree,t.treePath,e,n)}function Ng(t,e){return Rg(Ie(t.treePath,e),t.writeTree)}function Rg(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;O(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),O(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Ji(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,qi(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Hr(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Ji(r,e.snapshotNode,s.oldSnap));else throw Qr("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Ag=new Tw;class Nc{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new ir(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Pc(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:sr(this.viewCache_),i=Ew(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t){return{filter:t}}function Pw(t,e){O(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),O(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Nw(t,e,n,r,s){const i=new kw;let o,l;if(n.type===Rt.OVERWRITE){const c=n;c.source.fromUser?o=su(t,e,c.path,c.snap,r,s,i):(O(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered()&&!X(c.path),o=Do(t,e,c.path,c.snap,r,s,l,i))}else if(n.type===Rt.MERGE){const c=n;c.source.fromUser?o=Aw(t,e,c.path,c.children,r,s,i):(O(c.source.fromServer,"Unknown source."),l=c.source.tagged||e.serverCache.isFiltered(),o=ou(t,e,c.path,c.children,r,s,l,i))}else if(n.type===Rt.ACK_USER_WRITE){const c=n;c.revert?o=Lw(t,e,c.path,r,s,i):o=Mw(t,e,c.path,c.affectedTree,r,s,i)}else if(n.type===Rt.LISTEN_COMPLETE)o=Dw(t,e,n.path,r,i);else throw Qr("Unknown operation type: "+n.type);const a=i.getChanges();return Rw(e,o,a),{viewCache:o,changes:a}}function Rw(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=nu(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(Sg(nu(e)))}}function Mg(t,e,n,r,s,i){const o=e.eventCache;if(Mo(r,n)!=null)return e;{let l,a;if(X(n))if(O(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=sr(e),d=c instanceof U?c:U.EMPTY_NODE,h=Ic(r,d);l=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const c=Ao(r,sr(e));l=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=Y(n);if(c===".priority"){O(Rn(n)===1,"Can't have a priority with additional path components");const d=o.getNode();a=e.serverCache.getNode();const h=Gd(r,n,d,a);h!=null?l=t.filter.updatePriority(d,h):l=o.getNode()}else{const d=le(n);let h;if(o.isCompleteForChild(c)){a=e.serverCache.getNode();const f=Gd(r,n,o.getNode(),a);f!=null?h=o.getNode().getImmediateChild(c).updateChild(d,f):h=o.getNode().getImmediateChild(c)}else h=Pc(r,c,e.serverCache);h!=null?l=t.filter.updateChild(o.getNode(),c,h,d,s,i):l=o.getNode()}}return Pi(e,l,o.isFullyInitialized()||X(n),t.filter.filtersNodes())}}function Do(t,e,n,r,s,i,o,l){const a=e.serverCache;let c;const d=o?t.filter:t.filter.getIndexedFilter();if(X(n))c=d.updateFullNode(a.getNode(),r,null);else if(d.filtersNodes()&&!a.isFiltered()){const u=a.getNode().updateChild(n,r);c=d.updateFullNode(a.getNode(),u,null)}else{const u=Y(n);if(!a.isCompleteForPath(n)&&Rn(n)>1)return e;const p=le(n),y=a.getNode().getImmediateChild(u).updateChild(p,r);u===".priority"?c=d.updatePriority(a.getNode(),y):c=d.updateChild(a.getNode(),u,y,p,Ag,null)}const h=kg(e,c,a.isFullyInitialized()||X(n),d.filtersNodes()),f=new Nc(s,h,i);return Mg(t,h,n,s,f,l)}function su(t,e,n,r,s,i,o){const l=e.eventCache;let a,c;const d=new Nc(s,e,i);if(X(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=Pi(e,c,!0,t.filter.filtersNodes());else{const h=Y(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),a=Pi(e,c,l.isFullyInitialized(),l.isFiltered());else{const f=le(n),u=l.getNode().getImmediateChild(h);let p;if(X(f))p=r;else{const m=d.getCompleteChild(h);m!=null?dg(f)===".priority"&&m.getChild(pg(f)).isEmpty()?p=m:p=m.updateChild(f,r):p=U.EMPTY_NODE}if(u.equals(p))a=e;else{const m=t.filter.updateChild(l.getNode(),h,p,f,d,o);a=Pi(e,m,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function Kd(t,e){return t.eventCache.isCompleteForChild(e)}function Aw(t,e,n,r,s,i,o){let l=e;return r.foreach((a,c)=>{const d=Ie(n,a);Kd(e,Y(d))&&(l=su(t,l,d,c,s,i,o))}),r.foreach((a,c)=>{const d=Ie(n,a);Kd(e,Y(d))||(l=su(t,l,d,c,s,i,o))}),l}function Qd(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function ou(t,e,n,r,s,i,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,c;X(n)?c=r:c=new ce(null).setTree(n,r);const d=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const u=e.serverCache.getNode().getImmediateChild(h),p=Qd(t,u,f);a=Do(t,a,new se(h),p,s,i,o,l)}}),c.children.inorderTraversal((h,f)=>{const u=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!u){const p=e.serverCache.getNode().getImmediateChild(h),m=Qd(t,p,f);a=Do(t,a,new se(h),m,s,i,o,l)}}),a}function Mw(t,e,n,r,s,i,o){if(Mo(s,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(X(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return Do(t,e,n,a.getNode().getChild(n),s,i,l,o);if(X(n)){let c=new ce(null);return a.getNode().forEachChild(Yn,(d,h)=>{c=c.set(new se(d),h)}),ou(t,e,n,c,s,i,l,o)}else return e}else{let c=new ce(null);return r.foreach((d,h)=>{const f=Ie(n,d);a.isCompleteForPath(f)&&(c=c.set(d,a.getNode().getChild(f)))}),ou(t,e,n,c,s,i,l,o)}}function Dw(t,e,n,r,s){const i=e.serverCache,o=kg(e,i.getNode(),i.isFullyInitialized()||X(n),i.isFiltered());return Mg(t,o,n,r,Ag,s)}function Lw(t,e,n,r,s,i){let o;if(Mo(r,n)!=null)return e;{const l=new Nc(r,e,s),a=e.eventCache.getNode();let c;if(X(n)||Y(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Ao(r,sr(e));else{const h=e.serverCache.getNode();O(h instanceof U,"serverChildren would be complete if leaf node"),d=Ic(r,h)}d=d,c=t.filter.updateFullNode(a,d,i)}else{const d=Y(n);let h=Pc(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=a.getImmediateChild(d)),h!=null?c=t.filter.updateChild(a,d,h,le(n),l,i):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(a,d,U.EMPTY_NODE,le(n),l,i):c=a,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ao(r,sr(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||Mo(r,re())!=null,Pi(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Sc(r.getIndex()),i=Zx(r);this.processor_=Iw(i);const o=n.serverCache,l=n.eventCache,a=s.updateFullNode(U.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(U.EMPTY_NODE,l.getNode(),null),d=new ir(a,o.isFullyInitialized(),s.filtersNodes()),h=new ir(c,l.isFullyInitialized(),i.filtersNodes());this.viewCache_=rl(h,d),this.eventGenerator_=new lw(this.query_)}get query(){return this.query_}}function Fw(t){return t.viewCache_.serverCache.getNode()}function Bw(t,e){const n=sr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!X(e)&&!n.getImmediateChild(Y(e)).isEmpty())?n.getChild(e):null}function Yd(t){return t.eventRegistrations_.length===0}function bw(t,e){t.eventRegistrations_.push(e)}function Xd(t,e,n){const r=[];if(n){O(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function qd(t,e,n,r){e.type===Rt.MERGE&&e.source.queryId!==null&&(O(sr(t.viewCache_),"We should always have a full cache before handling merges"),O(nu(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Nw(t.processor_,s,e,n,r);return Pw(t.processor_,i.viewCache),O(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Dg(t,i.changes,i.viewCache.eventCache.getNode(),null)}function jw(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ge,(i,o)=>{r.push(Hr(i,o))}),n.isFullyInitialized()&&r.push(Sg(n.getNode())),Dg(t,r,n.getNode(),e)}function Dg(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return aw(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo;class zw{constructor(){this.views=new Map}}function Vw(t){O(!Lo,"__referenceConstructor has already been defined"),Lo=t}function Uw(){return O(Lo,"Reference.ts has not been loaded"),Lo}function Hw(t){return t.views.size===0}function Rc(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return O(i!=null,"SyncTree gave us an op for an invalid query."),qd(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(qd(o,e,n,r));return i}}function Ww(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let l=Ao(n,s?r:null),a=!1;l?a=!0:r instanceof U?(l=Ic(n,r),a=!1):(l=U.EMPTY_NODE,a=!1);const c=rl(new ir(l,a,!1),new ir(r,s,!1));return new Ow(e,c)}return o}function $w(t,e,n,r,s,i){const o=Ww(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),bw(o,n),jw(o,n)}function Gw(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const l=An(t);if(s==="default")for(const[a,c]of t.views.entries())o=o.concat(Xd(c,n,r)),Yd(c)&&(t.views.delete(a),c.query._queryParams.loadsAllData()||i.push(c.query));else{const a=t.views.get(s);a&&(o=o.concat(Xd(a,n,r)),Yd(a)&&(t.views.delete(s),a.query._queryParams.loadsAllData()||i.push(a.query)))}return l&&!An(t)&&i.push(new(Uw())(e._repo,e._path)),{removed:i,events:o}}function Lg(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Dr(t,e){let n=null;for(const r of t.views.values())n=n||Bw(r,e);return n}function Og(t,e){if(e._queryParams.loadsAllData())return il(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Fg(t,e){return Og(t,e)!=null}function An(t){return il(t)!=null}function il(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo;function Kw(t){O(!Oo,"__referenceConstructor has already been defined"),Oo=t}function Qw(){return O(Oo,"Reference.ts has not been loaded"),Oo}let Yw=1;class Jd{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ce(null),this.pendingWriteTree_=Cw(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Bg(t,e,n,r,s){return dw(t.pendingWriteTree_,e,n,r,s),s?hs(t,new rr(Eg(),e,n)):[]}function $n(t,e,n=!1){const r=hw(t.pendingWriteTree_,e);if(pw(t.pendingWriteTree_,e)){let i=new ce(null);return r.snap!=null?i=i.set(re(),!0):lt(r.children,o=>{i=i.set(new se(o),!0)}),hs(t,new Ro(r.path,i,n))}else return[]}function sl(t,e,n){return hs(t,new rr(Ec(),e,n))}function Xw(t,e,n){const r=ce.fromObject(n);return hs(t,new ts(Ec(),e,r))}function qw(t,e){return hs(t,new es(Ec(),e))}function Jw(t,e,n){const r=Mc(t,n);if(r){const s=Dc(r),i=s.path,o=s.queryId,l=et(i,e),a=new es(kc(o),l);return Lc(t,i,a)}else return[]}function lu(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let l=[];if(o&&(e._queryIdentifier==="default"||Fg(o,e))){const a=Gw(o,e,n,r);Hw(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const c=a.removed;if(l=a.events,!s){const d=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(f,u)=>An(u));if(d&&!h){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const u=tS(f);for(let p=0;p<u.length;++p){const m=u[p],y=m.query,g=zg(t,m);t.listenProvider_.startListening(Ri(y),Fo(t,y),g.hashFn,g.onComplete)}}}!h&&c.length>0&&!r&&(d?t.listenProvider_.stopListening(Ri(e),null):c.forEach(f=>{const u=t.queryToTagMap.get(ol(f));t.listenProvider_.stopListening(Ri(f),u)}))}nS(t,c)}return l}function Zw(t,e,n,r){const s=Mc(t,r);if(s!=null){const i=Dc(s),o=i.path,l=i.queryId,a=et(o,e),c=new rr(kc(l),a,n);return Lc(t,o,c)}else return[]}function eS(t,e,n,r){const s=Mc(t,r);if(s){const i=Dc(s),o=i.path,l=i.queryId,a=et(o,e),c=ce.fromObject(n),d=new ts(kc(l),a,c);return Lc(t,o,d)}else return[]}function Zd(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,u)=>{const p=et(f,s);i=i||Dr(u,p),o=o||An(u)});let l=t.syncPointTree_.get(s);l?(o=o||An(l),i=i||Dr(l,re())):(l=new zw,t.syncPointTree_=t.syncPointTree_.set(s,l));let a;i!=null?a=!0:(a=!1,i=U.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((u,p)=>{const m=Dr(p,re());m&&(i=i.updateImmediateChild(u,m))}));const c=Fg(l,e);if(!c&&!e._queryParams.loadsAllData()){const f=ol(e);O(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const u=rS();t.queryToTagMap.set(f,u),t.tagToQueryMap.set(u,f)}const d=Tc(t.pendingWriteTree_,s);let h=$w(l,e,n,d,i,a);if(!c&&!o&&!r){const f=Og(l,e);h=h.concat(iS(t,e,f))}return h}function Ac(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=et(o,e),c=Dr(l,a);if(c)return c});return Pg(s,e,i,n,!0)}function hs(t,e){return bg(e,t.syncPointTree_,null,Tc(t.pendingWriteTree_,re()))}function bg(t,e,n,r){if(X(t.path))return jg(t,e,n,r);{const s=e.get(re());n==null&&s!=null&&(n=Dr(s,re()));let i=[];const o=Y(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const c=n?n.getImmediateChild(o):null,d=Ng(r,o);i=i.concat(bg(l,a,c,d))}return s&&(i=i.concat(Rc(s,t,r,n))),i}}function jg(t,e,n,r){const s=e.get(re());n==null&&s!=null&&(n=Dr(s,re()));let i=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,c=Ng(r,o),d=t.operationForChild(o);d&&(i=i.concat(jg(d,l,a,c)))}),s&&(i=i.concat(Rc(s,t,r,n))),i}function zg(t,e){const n=e.query,r=Fo(t,n);return{hashFn:()=>(Fw(e)||U.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?Jw(t,n._path,r):qw(t,n._path);{const i=ex(s,n);return lu(t,n,null,i)}}}}function Fo(t,e){const n=ol(e);return t.queryToTagMap.get(n)}function ol(t){return t._path.toString()+"$"+t._queryIdentifier}function Mc(t,e){return t.tagToQueryMap.get(e)}function Dc(t){const e=t.indexOf("$");return O(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new se(t.substr(0,e))}}function Lc(t,e,n){const r=t.syncPointTree_.get(e);O(r,"Missing sync point for query tag that we're tracking");const s=Tc(t.pendingWriteTree_,e);return Rc(r,n,s,null)}function tS(t){return t.fold((e,n,r)=>{if(n&&An(n))return[il(n)];{let s=[];return n&&(s=Lg(n)),lt(r,(i,o)=>{s=s.concat(o)}),s}})}function Ri(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Qw())(t._repo,t._path):t}function nS(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=ol(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function rS(){return Yw++}function iS(t,e,n){const r=e._path,s=Fo(t,e),i=zg(t,n),o=t.listenProvider_.startListening(Ri(e),s,i.hashFn,i.onComplete),l=t.syncPointTree_.subtree(r);if(s)O(!An(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((c,d,h)=>{if(!X(c)&&d&&An(d))return[il(d).query];{let f=[];return d&&(f=f.concat(Lg(d).map(u=>u.query))),lt(h,(u,p)=>{f=f.concat(p)}),f}});for(let c=0;c<a.length;++c){const d=a[c];t.listenProvider_.stopListening(Ri(d),Fo(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Oc(n)}node(){return this.node_}}class Fc{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ie(this.path_,e);return new Fc(this.syncTree_,n)}node(){return Ac(this.syncTree_,this.path_)}}const sS=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},eh=function(t,e,n){if(!t||typeof t!="object")return t;if(O(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return oS(t[".sv"],e,n);if(typeof t[".sv"]=="object")return lS(t[".sv"],e);O(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},oS=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:O(!1,"Unexpected server value: "+t)}},lS=function(t,e,n){t.hasOwnProperty("increment")||O(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&O(!1,"Unexpected increment value: "+r);const s=e.node();if(O(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},aS=function(t,e,n,r){return Bc(e,new Fc(n,t),r)},Vg=function(t,e,n){return Bc(t,new Oc(e),n)};function Bc(t,e,n){const r=t.getPriority().val(),s=eh(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,l=eh(o.getValue(),e,n);return l!==o.getValue()||s!==o.getPriority().val()?new Me(l,ze(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Me(s))),o.forEachChild(ge,(l,a)=>{const c=Bc(a,e.getImmediateChild(l),n);c!==a&&(i=i.updateImmediateChild(l,c))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function jc(t,e){let n=e instanceof se?e:new se(e),r=t,s=Y(n);for(;s!==null;){const i=Vr(r.node.children,s)||{children:{},childCount:0};r=new bc(s,r,i),n=le(n),s=Y(n)}return r}function qr(t){return t.node.value}function Ug(t,e){t.node.value=e,au(t)}function Hg(t){return t.node.childCount>0}function uS(t){return qr(t)===void 0&&!Hg(t)}function ll(t,e){lt(t.node.children,(n,r)=>{e(new bc(n,t,r))})}function Wg(t,e,n,r){n&&e(t),ll(t,s=>{Wg(s,e,!0)})}function cS(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ps(t){return new se(t.parent===null?t.name:ps(t.parent)+"/"+t.name)}function au(t){t.parent!==null&&fS(t.parent,t.name,t)}function fS(t,e,n){const r=uS(n),s=Vt(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,au(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,au(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=/[\[\].#$\/\u0000-\u001F\u007F]/,hS=/[\[\].#$\u0000-\u001F\u007F]/,Yl=10*1024*1024,$g=function(t){return typeof t=="string"&&t.length!==0&&!dS.test(t)},Gg=function(t){return typeof t=="string"&&t.length!==0&&!hS.test(t)},pS=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Gg(t)},th=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!hc(t)||t&&typeof t=="object"&&Vt(t,".sv")},Kg=function(t,e,n,r){r&&e===void 0||zc(uc(t,"value"),e,n)},zc=function(t,e,n){const r=n instanceof se?new Dx(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+zn(r));if(typeof e=="function")throw new Error(t+"contains a function "+zn(r)+" with contents = "+e.toString());if(hc(e))throw new Error(t+"contains "+e.toString()+" "+zn(r));if(typeof e=="string"&&e.length>Yl/3&&tl(e)>Yl)throw new Error(t+"contains a string greater than "+Yl+" utf8 bytes "+zn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(lt(e,(o,l)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!$g(o)))throw new Error(t+" contains an invalid key ("+o+") "+zn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Lx(r,o),zc(t,l,r),Ox(r)}),s&&i)throw new Error(t+' contains ".value" child '+zn(r)+" in addition to actual children.")}},Vc=function(t,e,n,r){if(!Gg(n))throw new Error(uc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},mS=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vc(t,e,n)},Qg=function(t,e){if(Y(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},gS=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!$g(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!pS(n))throw new Error(uc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Uc(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!yc(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function Yg(t,e,n){Uc(t,n),Xg(t,r=>yc(r,e))}function nn(t,e,n){Uc(t,n),Xg(t,r=>Nt(r,e)||Nt(e,r))}function Xg(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(yS(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function yS(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ti&&Ge("event: "+n.toString()),Xr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="repo_interrupt",xS=25;class wS{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=No(),this.transactionQueueTree_=new bc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function SS(t,e,n){if(t.stats_=gc(t.repoInfo_),t.forceRestClient_||ix())t.server_=new Po(t.repoInfo_,(r,s,i,o)=>{nh(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>rh(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Oe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Yt(t.repoInfo_,e,(r,s,i,o)=>{nh(t,r,s,i,o)},r=>{rh(t,r)},r=>{CS(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=ux(t.repoInfo_,()=>new ow(t.stats_,t.server_)),t.infoData_=new tw,t.infoSyncTree_=new Jd({startListening:(r,s,i,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=sl(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Wc(t,"connected",!1),t.serverSyncTree_=new Jd({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(l,a)=>{const c=o(l,a);nn(t.eventQueue_,r._path,c)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function qg(t){const n=t.infoData_.getNode(new se(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Hc(t){return sS({timestamp:qg(t)})}function nh(t,e,n,r,s){t.dataUpdateCount++;const i=new se(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const a=So(n,c=>ze(c));o=eS(t.serverSyncTree_,i,a,s)}else{const a=ze(n);o=Zw(t.serverSyncTree_,i,a,s)}else if(r){const a=So(n,c=>ze(c));o=Xw(t.serverSyncTree_,i,a)}else{const a=ze(n);o=sl(t.serverSyncTree_,i,a)}let l=i;o.length>0&&(l=al(t,i)),nn(t.eventQueue_,l,o)}function rh(t,e){Wc(t,"connected",e),e===!1&&kS(t)}function CS(t,e){lt(e,(n,r)=>{Wc(t,n,r)})}function Wc(t,e,n){const r=new se("/.info/"+e),s=ze(n);t.infoData_.updateSnapshot(r,s);const i=sl(t.infoSyncTree_,r,s);nn(t.eventQueue_,r,i)}function Jg(t){return t.nextWriteId_++}function ES(t,e,n,r,s){$c(t,"set",{path:e.toString(),value:n,priority:r});const i=Hc(t),o=ze(n,r),l=Ac(t.serverSyncTree_,e),a=Vg(o,l,i),c=Jg(t),d=Bg(t.serverSyncTree_,e,a,c,!0);Uc(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,u)=>{const p=f==="ok";p||ot("set at "+e+" failed: "+f);const m=$n(t.serverSyncTree_,c,!p);nn(t.eventQueue_,e,m),NS(t,s,f,u)});const h=rv(t,e);al(t,h),nn(t.eventQueue_,h,[])}function kS(t){$c(t,"onDisconnectEvents");const e=Hc(t),n=No();tu(t.onDisconnect_,re(),(s,i)=>{const o=aS(s,i,t.serverSyncTree_,e);Cg(n,s,o)});let r=[];tu(n,re(),(s,i)=>{r=r.concat(sl(t.serverSyncTree_,s,i));const o=rv(t,s);al(t,o)}),t.onDisconnect_=No(),nn(t.eventQueue_,re(),r)}function TS(t,e,n){let r;Y(e._path)===".info"?r=Zd(t.infoSyncTree_,e,n):r=Zd(t.serverSyncTree_,e,n),Yg(t.eventQueue_,e._path,r)}function IS(t,e,n){let r;Y(e._path)===".info"?r=lu(t.infoSyncTree_,e,n):r=lu(t.serverSyncTree_,e,n),Yg(t.eventQueue_,e._path,r)}function PS(t){t.persistentConnection_&&t.persistentConnection_.interrupt(_S)}function $c(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ge(n,...e)}function NS(t,e,n,r){e&&Xr(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function Zg(t,e,n){return Ac(t.serverSyncTree_,e,n)||U.EMPTY_NODE}function Gc(t,e=t.transactionQueueTree_){if(e||ul(t,e),qr(e)){const n=tv(t,e);O(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&RS(t,ps(e),n)}else Hg(e)&&ll(e,n=>{Gc(t,n)})}function RS(t,e,n){const r=n.map(c=>c.currentWriteId),s=Zg(t,e,r);let i=s;const o=s.hash();for(let c=0;c<n.length;c++){const d=n[c];O(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=et(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const l=i.val(!0),a=e;t.server_.put(a.toString(),l,c=>{$c(t,"transaction put response",{path:a.toString(),status:c});let d=[];if(c==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat($n(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();ul(t,jc(t.transactionQueueTree_,e)),Gc(t,t.transactionQueueTree_),nn(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)Xr(h[f])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{ot("transaction at "+a.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}al(t,e)}},o)}function al(t,e){const n=ev(t,e),r=ps(n),s=tv(t,n);return AS(t,s,r),r}function AS(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],c=et(n,a.path);let d=!1,h;if(O(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)d=!0,h=a.abortReason,s=s.concat($n(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=xS)d=!0,h="maxretry",s=s.concat($n(t.serverSyncTree_,a.currentWriteId,!0));else{const f=Zg(t,a.path,o);a.currentInputSnapshot=f;const u=e[l].update(f.val());if(u!==void 0){zc("transaction failed: Data returned ",u,a.path);let p=ze(u);typeof u=="object"&&u!=null&&Vt(u,".priority")||(p=p.updatePriority(f.getPriority()));const y=a.currentWriteId,g=Hc(t),v=Vg(p,f,g);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=v,a.currentWriteId=Jg(t),o.splice(o.indexOf(y),1),s=s.concat(Bg(t.serverSyncTree_,a.path,v,a.currentWriteId,a.applyLocally)),s=s.concat($n(t.serverSyncTree_,y,!0))}else d=!0,h="nodata",s=s.concat($n(t.serverSyncTree_,a.currentWriteId,!0))}nn(t.eventQueue_,n,s),s=[],d&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(h==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(h),!1,null))))}ul(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Xr(r[l]);Gc(t,t.transactionQueueTree_)}function ev(t,e){let n,r=t.transactionQueueTree_;for(n=Y(e);n!==null&&qr(r)===void 0;)r=jc(r,n),e=le(e),n=Y(e);return r}function tv(t,e){const n=[];return nv(t,e,n),n.sort((r,s)=>r.order-s.order),n}function nv(t,e,n){const r=qr(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);ll(e,s=>{nv(t,s,n)})}function ul(t,e){const n=qr(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,Ug(e,n.length>0?n:void 0)}ll(e,r=>{ul(t,r)})}function rv(t,e){const n=ps(ev(t,e)),r=jc(t.transactionQueueTree_,e);return cS(r,s=>{Xl(t,s)}),Xl(t,r),Wg(r,s=>{Xl(t,s)}),n}function Xl(t,e){const n=qr(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(O(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(O(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat($n(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Ug(e,void 0):n.length=i+1,nn(t.eventQueue_,ps(e),s);for(let o=0;o<r.length;o++)Xr(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function DS(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ot(`Invalid query segment '${n}' in query '${t}'`)}return e}const ih=function(t,e){const n=LS(t),r=n.namespace;n.domain==="firebase.com"&&tn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&tn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Y1();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new rg(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new se(n.pathString)}},LS=function(t){let e="",n="",r="",s="",i="",o=!0,l="https",a=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(l=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=MS(t.substring(d,h)));const f=DS(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(c+1),10)):c=e.length;const u=e.slice(0,c);if(u.toLowerCase()==="localhost")n="localhost";else if(u.split(".").length<=2)n=u;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",OS=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=sh.charAt(n%64),n=Math.floor(n/64);O(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=sh.charAt(e[s]);return O(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Oe(this.snapshot.exportVal())}}class BS{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return O(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return X(this._path)?null:dg(this._path)}get ref(){return new Fn(this._repo,this._path)}get _queryIdentifier(){const e=Vd(this._queryParams),n=pc(e);return n==="{}"?"default":n}get _queryObject(){return Vd(this._queryParams)}isEqual(e){if(e=On(e),!(e instanceof cl))return!1;const n=this._repo===e._repo,r=yc(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Mx(this._path)}}function jS(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function zS(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Yn){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==nr)throw new Error(r);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==Nn)throw new Error(r);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===ge){if(e!=null&&!th(e)||n!=null&&!th(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(O(t.getIndex()instanceof wc||t.getIndex()===wg,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class Fn extends cl{constructor(e,n){super(e,n,new Cc,!1)}get parent(){const e=pg(this._path);return e===null?null:new Fn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Bo{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new se(e),r=ns(this.ref,e);return new Bo(this._node.getChild(n),r,ge)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Bo(s,ns(this.ref,r),ge)))}hasChild(e){const n=new se(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function oh(t,e){return t=On(t),t._checkNotDeleted("ref"),ns(t._root,e)}function ns(t,e){return t=On(t),Y(t._path)===null?mS("child","path",e):Vc("child","path",e),new Fn(t._repo,Ie(t._path,e))}function VS(t,e){t=On(t),Qg("push",t._path),Kg("push",e,t._path,!0);const n=qg(t._repo),r=OS(n),s=ns(t,r),i=ns(t,r);let o;return e!=null?o=US(i,e).then(()=>i):o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function US(t,e){t=On(t),Qg("set",t._path),Kg("set",e,t._path,!1);const n=new Pn;return ES(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class Kc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new FS("value",this,new Bo(e.snapshotNode,new Fn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new BS(this,e,n):null}matches(e){return e instanceof Kc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function HS(t,e,n,r,s){const i=new bS(n,void 0),o=new Kc(i);return TS(t._repo,t,o),()=>IS(t._repo,t,o)}function WS(t,e,n,r){return HS(t,"value",e)}class $S{}class GS extends $S{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){jS(e,"orderByChild");const n=new se(this._path);if(X(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new wc(n),s=ew(e._queryParams,r);return zS(s),new cl(e._repo,e._path,s,!0)}}function KS(t){return Vc("orderByChild","path",t),new GS(t)}function QS(t,...e){let n=On(t);for(const r of e)n=r._apply(n);return n}Vw(Fn);Kw(Fn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="FIREBASE_DATABASE_EMULATOR_HOST",uu={};let XS=!1;function qS(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),o=oc(i);t.repoInfo_=new rg(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function JS(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||tn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ge("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=ih(i,s),l=o.repoInfo,a;typeof process<"u"&&Cd&&(a=Cd[YS]),a?(i=`http://${a}?ns=${l.namespace}`,o=ih(i,s),l=o.repoInfo):o.repoInfo.secure;const c=new ox(t.name,t.options,e);gS("Invalid Firebase Database URL",o),X(o.path)||tn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=eC(l,t,c,new sx(t,n));return new tC(d,t)}function ZS(t,e){const n=uu[e];(!n||n[t.key]!==t)&&tn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),PS(t),delete n[t.key]}function eC(t,e,n,r){let s=uu[e.name];s||(s={},uu[e.name]=s);let i=s[t.toURLString()];return i&&tn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new wS(t,XS,n,r),s[t.toURLString()]=i,i}class tC{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(SS(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fn(this._repo,re())),this._rootInternal}_delete(){return this._rootInternal!==null&&(ZS(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&tn("Cannot call "+e+" on a deleted database.")}}function nC(t=zm(),e){const n=dc(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=a_("database");r&&rC(n,...r)}return n}function rC(t,e,n,r={}){t=On(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Co(r,i.repoInfo_.emulatorOptions))return;tn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&tn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ys(Ys.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:c_(r.mockUserToken,t.app.options.projectId);o=new Ys(l)}oc(e)&&(u_(e),h_("Database",!0)),qS(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){H1(R1),Ur(new tr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return JS(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Qn(Ed,kd,t),Qn(Ed,kd,"esm2020")}Yt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Yt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};iC();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new Map,iv={activated:!1,tokenObservers:[]},sC={initialized:!1,enabled:!1};function Ne(t){return cu.get(t)||{...iv}}function oC(t,e){return cu.set(t,e),cu.get(t)}function fl(){return sC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="https://content-firebaseappcheck.googleapis.com/v1",lC="exchangeRecaptchaV3Token",aC="exchangeDebugToken",lh={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},uC=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Pn,this.pending.promise.catch(n=>{}),await fC(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Pn,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function fC(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},nt=new ac("appCheck","AppCheck",dC);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(t=!1){var e;return t?(e=self.grecaptcha)==null?void 0:e.enterprise:self.grecaptcha}function Qc(t){if(!Ne(t).activated)throw nt.create("use-before-activation",{appName:t.name})}function ov(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),s=Math.floor((e-n*3600*24-r*3600)/60),i=e-n*3600*24-r*3600-s*60;let o="";return n&&(o+=Os(n)+"d:"),r&&(o+=Os(r)+"h:"),o+=Os(s)+"m:"+Os(i)+"s",o}function Os(t){return t===0?"00":t>=10?t.toString():"0"+t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&(r["X-Firebase-Client"]=h)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(h){throw nt.create("fetch-network-error",{originalErrorMessage:h==null?void 0:h.message})}if(o.status!==200)throw nt.create("fetch-status-error",{httpStatus:o.status});let l;try{l=await o.json()}catch(h){throw nt.create("fetch-parse-error",{originalErrorMessage:h==null?void 0:h.message})}const a=l.ttl.match(/^([\d.]+)(s)$/);if(!a||!a[2]||isNaN(Number(a[1])))throw nt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});const c=Number(a[1])*1e3,d=Date.now();return{token:l.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}}function hC(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${sv}/projects/${n}/apps/${r}:${lC}?key=${s}`,body:{recaptcha_v3_token:e}}}function lv(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${sv}/projects/${n}/apps/${r}:${aC}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="firebase-app-check-database",mC=1,rs="firebase-app-check-store",av="debug-token";let Fs=null;function uv(){return Fs||(Fs=new Promise((t,e)=>{try{const n=indexedDB.open(pC,mC);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(nt.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(rs,{keyPath:"compositeKey"})}}}catch(n){e(nt.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Fs)}function gC(t){return fv(dv(t))}function vC(t,e){return cv(dv(t),e)}function yC(t){return cv(av,t)}function _C(){return fv(av)}async function cv(t,e){const r=(await uv()).transaction(rs,"readwrite"),i=r.objectStore(rs).put({compositeKey:t,value:e});return new Promise((o,l)=>{i.onsuccess=a=>{o()},r.onerror=a=>{var c;l(nt.create("storage-set",{originalErrorMessage:(c=a.target.error)==null?void 0:c.message}))}})}async function fv(t){const n=(await uv()).transaction(rs,"readonly"),s=n.objectStore(rs).get(t);return new Promise((i,o)=>{s.onsuccess=l=>{const a=l.target.result;i(a?a.value:void 0)},n.onerror=l=>{var a;o(nt.create("storage-get",{originalErrorMessage:(a=l.target.error)==null?void 0:a.message}))}})}function dv(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=new cc("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(t){if(lc()){let e;try{e=await gC(t)}catch(n){pn.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function ql(t,e){return lc()?vC(t,e).catch(n=>{pn.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function wC(){let t;try{t=await _C()}catch{}if(t)return t;{const e=crypto.randomUUID();return yC(e).catch(n=>pn.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(){return fl().enabled}async function qc(){const t=fl();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function SC(){const t=Mm(),e=fl();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new Pn;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(wC())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={error:"UNKNOWN_ERROR"};function EC(t){return el.encodeString(JSON.stringify(t),!1)}async function fu(t,e=!1,n=!1){const r=t.app;Qc(r);const s=Ne(r);let i=s.token,o;if(i&&!kr(i)&&(s.token=void 0,i=void 0),!i){const c=await s.cachedTokenPromise;c&&(kr(c)?i=c:await ql(r,void 0))}if(!e&&i&&kr(i))return{token:i.token};let l=!1;if(Xc())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=Yc(lv(r,await qc()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),l=!0);const c=await s.exchangeTokenPromise;return await ql(r,c),s.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?pn.warn(c.message):n&&pn.error(c),Jl(c)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),l=!0),i=await Ne(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?pn.warn(c.message):n&&pn.error(c),o=c}let a;return i?o?kr(i)?a={token:i.token,internalError:o}:a=Jl(o):(a={token:i.token},s.token=i,await ql(r,i)):a=Jl(o),l&&mv(r,a),a}async function kC(t){const e=t.app;Qc(e);const{provider:n}=Ne(e);if(Xc()){const r=await qc(),{token:s}=await Yc(lv(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function hv(t,e,n,r){const{app:s}=t,i=Ne(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&kr(i.token)){const l=i.token;Promise.resolve().then(()=>{n({token:l.token}),uh(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>uh(t))}function pv(t,e){const n=Ne(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function uh(t){const{app:e}=t,n=Ne(e);let r=n.tokenRefresher;r||(r=TC(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function TC(t){const{app:e}=t;return new cC(async()=>{const n=Ne(e);let r;if(n.token?r=await fu(t,!0):r=await fu(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ne(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},lh.RETRIAL_MIN_WAIT,lh.RETRIAL_MAX_WAIT)}function mv(t,e){const n=Ne(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function kr(t){return t.expireTimeMillis-Date.now()>0}function Jl(t){return{token:EC(CC),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Ne(this.app);for(const n of e)pv(this.app,n.next);return Promise.resolve()}}function PC(t,e){return new IC(t,e)}function NC(t){return{getToken:e=>fu(t,e),getLimitedUseToken:()=>kC(t),addTokenListener:e=>hv(t,"INTERNAL",e),removeTokenListener:e=>pv(t.app,e)}}const RC="@firebase/app-check",AC="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="https://www.google.com/recaptcha/api.js";function DC(t,e){const n=new Pn,r=Ne(t);r.reCAPTCHAState={initialized:n};const s=LC(t),i=ah(!1);return i?ch(t,e,i,s,n):BC(()=>{const o=ah(!1);if(!o)throw new Error("no recaptcha");ch(t,e,o,s,n)}),n.promise}function ch(t,e,n,r,s){n.ready(()=>{FC(t,e,n,r),s.resolve(n)})}function LC(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function OC(t){Qc(t);const n=await Ne(t).reCAPTCHAState.initialized.promise;return new Promise((r,s)=>{const i=Ne(t).reCAPTCHAState;n.ready(()=>{r(n.execute(i.widgetId,{action:"fire_app_check"}))})})}function FC(t,e,n,r){const s=n.render(r,{sitekey:e,size:"invisible",callback:()=>{Ne(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Ne(t).reCAPTCHAState.succeeded=!1}}),i=Ne(t);i.reCAPTCHAState={...i.reCAPTCHAState,widgetId:s}}function BC(t){const e=document.createElement("script");e.src=MC,e.onload=t,document.head.appendChild(e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var r,s,i;jC(this._throttleData);const e=await OC(this._app).catch(o=>{throw nt.create("recaptcha-error")});if(!((r=Ne(this._app).reCAPTCHAState)!=null&&r.succeeded))throw nt.create("recaptcha-error");let n;try{n=await Yc(hC(this._app,e),this._heartbeatServiceProvider)}catch(o){throw(s=o.code)!=null&&s.includes("fetch-status-error")?(this._throttleData=bC(Number((i=o.customData)==null?void 0:i.httpStatus),this._throttleData),nt.create("initial-throttle",{time:ov(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,n}initialize(e){this._app=e,this._heartbeatServiceProvider=dc(e,"heartbeat"),DC(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof Jc?this._siteKey===e._siteKey:!1}}function bC(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+uC,httpStatus:t};{const n=e?e.backoffCount:0,r=R_(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function jC(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw nt.create("throttled",{time:ov(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t=zm(),e){t=On(t);const n=dc(t,"app-check");if(fl().initialized||SC(),Xc()&&qc().then(s=>console.log(`App Check debug token: ${s}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(i.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&i.provider.isEqual(e.provider))return s;throw nt.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return VC(t,e.provider,e.isTokenAutoRefreshEnabled),Ne(t).isTokenAutoRefreshEnabled&&hv(r,"INTERNAL",()=>{}),r}function VC(t,e,n=!1){const r=oC(t,{...iv});r.activated=!0,r.provider=e,r.cachedTokenPromise=xC(t).then(s=>(s&&kr(s)&&(r.token=s,mv(t,{token:s.token})),s)),r.isTokenAutoRefreshEnabled=n&&t.automaticDataCollectionEnabled,!t.automaticDataCollectionEnabled&&n&&pn.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),r.provider.initialize(t)}const UC="app-check",fh="app-check-internal";function HC(){Ur(new tr(UC,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return PC(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(fh).initialize()})),Ur(new tr(fh,t=>{const e=t.getProvider("app-check").getImmediate();return NC(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Qn(RC,AC)}HC();const WC={apiKey:"AIzaSyBf_vr8RieHVtMoWWWQvqsYBjzIQZyLgyk",authDomain:"interactivecv-d04a7.firebaseapp.com",databaseURL:"https://interactivecv-d04a7-default-rtdb.europe-west1.firebasedatabase.app",projectId:"interactivecv-d04a7",storageBucket:"interactivecv-d04a7.firebasestorage.app",messagingSenderId:"435864758678",appId:"1:435864758678:web:5b803f762fed8ed22755b7"},gv=jm(WC),dh=nC(gv);let hh=!1;const $C=()=>{hh||(zC(gv,{provider:new Jc("6LeXPCIsAAAAAPKnzdjhU1zxzpRFApe_1x0J6rNe"),isTokenAutoRefreshEnabled:!0}),hh=!0,console.log(" App Check activ pour le jeu"))},GC=({currentScore:t,onClose:e,onRestart:n})=>{const[r,s]=Z.useState(""),[i,o]=Z.useState(""),[l,a]=Z.useState(!1),[c,d]=Z.useState([]),[h,f]=Z.useState([]),[u,p]=Z.useState(null),[m,y]=Z.useState(null),[g,v]=Z.useState(!1),[x,E]=Z.useState(!0);Z.useEffect(()=>{fetch("https://ipapi.co/json/").then(C=>C.json()).then(C=>{C.country_code&&o(C.country_code)}).catch(()=>{o("")})},[]),Z.useEffect(()=>{const C=oh(dh,"scores"),w=QS(C,KS("distance")),T=WS(w,k=>{const I=[];k.forEach(M=>{I.push({id:M.key,...M.val()})});const P=I.sort((M,L)=>L.distance-M.distance);f(P),d(P.slice(0,10)),P.length>0&&p({...P[P.length-1],rank:P.length});const R=P.filter(M=>M.distance>t).length+1;y(R),E(!1)});return()=>T()},[t]);const _=async C=>{if(C.preventDefault(),!r.trim())return;const w=oh(dh,"scores"),T={pseudo:r.trim().substring(0,25),distance:Math.floor(t),country:l?"":i,timestamp:Date.now()};try{await VS(w,T),v(!0)}catch(k){console.error("Error saving score:",k),k.code==="PERMISSION_DENIED"?alert("Score validation failed. Please make sure your score is legitimate."):alert("Failed to save score. Please try again.")}},S=C=>{if(!C)return"";const w=C.toUpperCase().split("").map(T=>127397+T.charCodeAt());return String.fromCodePoint(...w)};return N.jsx("div",{className:"leaderboard-overlay",children:N.jsxs("div",{className:"leaderboard-container",children:[N.jsx("button",{className:"leaderboard-close",onClick:e,children:""}),N.jsx("h2",{children:" Leaderboard "}),g?N.jsxs("div",{className:"submitted-message",children:[N.jsx("p",{children:" Score submitted successfully!"}),m&&N.jsxs("p",{className:"user-rank",children:[" Your rank: ",N.jsxs("strong",{children:["#",m]})," / ",h.length]})]}):N.jsxs("div",{className:"score-submit",children:[N.jsx("div",{className:"your-score",children:N.jsxs("h3",{children:["Your Score: ",t,"m "]})}),N.jsxs("form",{onSubmit:_,children:[N.jsx("div",{className:"form-group",children:N.jsx("input",{type:"text",placeholder:"Enter your name",value:r,onChange:C=>s(C.target.value),maxLength:25,required:!0,autoFocus:!0})}),N.jsx("div",{className:"country-option",children:N.jsxs("label",{children:[N.jsx("input",{type:"checkbox",checked:!l,onChange:C=>a(!C.target.checked)}),i&&S(i)," Show my country flag"]})}),N.jsx("div",{className:"form-buttons",children:N.jsx("button",{type:"submit",className:"submit-btn",children:"Submit Score "})})]})]}),N.jsxs("div",{className:"leaderboard-list",children:[N.jsx("h3",{children:"Top 10 Players"}),x?N.jsx("p",{className:"loading",children:"Loading..."}):c.length===0?N.jsx("p",{className:"empty",children:"No scores yet. Be the first!"}):N.jsxs("table",{children:[N.jsx("thead",{children:N.jsxs("tr",{children:[N.jsx("th",{children:"Rank"}),N.jsx("th",{children:"Player"}),N.jsx("th",{children:"Distance"})]})}),N.jsx("tbody",{children:c.map((C,w)=>N.jsxs("tr",{className:w<3?`rank-${w+1}`:"",children:[N.jsxs("td",{className:"rank",children:[w===0&&"",w===1&&"",w===2&&"",w>2&&`#${w+1}`]}),N.jsxs("td",{className:"player",children:[C.country&&S(C.country)," ",C.pseudo.length>15?C.pseudo.substring(0,15)+"...":C.pseudo]}),N.jsxs("td",{className:"distance",children:[C.distance,"m"]})]},C.id))})]}),u&&h.length>10&&N.jsxs("div",{className:"last-place-info",children:[N.jsx("p",{className:"separator",children:"..."}),N.jsxs("div",{className:"last-place",children:[N.jsxs("span",{className:"rank",children:["#",u.rank]}),N.jsxs("span",{className:"player",children:[u.country&&S(u.country)," ",u.pseudo.length>15?u.pseudo.substring(0,15)+"...":u.pseudo]}),N.jsxs("span",{className:"distance",children:[u.distance,"m"]})]})]})]}),N.jsxs("div",{className:"leaderboard-actions",children:[N.jsx("button",{className:"action-btn restart-btn",onClick:n,children:"Play Again "}),N.jsx("button",{className:"action-btn back-btn",onClick:e,children:"Back to CV "})]})]})})},KC=({onClose:t})=>{const e=Z.useRef(null),n=Z.useRef(null),r=Z.useRef(null),s=Z.useRef(null),[i,o]=Z.useState(0),[l,a]=Z.useState(!1),[c,d]=Z.useState(!1),[h,f]=Z.useState(0),u=Z.useRef(0);return Z.useEffect(()=>{$C();const p=()=>{d("ontouchstart"in window||window.innerWidth<768)};p(),window.addEventListener("resize",p);const{Engine:m,Render:y,World:g,Bodies:v,Body:x,Events:E,Runner:_}=J0,S=m.create({gravity:{x:0,y:1.5}}),C=y.create({element:e.current,engine:S,options:{width:window.innerWidth,height:window.innerHeight,wireframes:!1,background:"transparent",hasBounds:!0}}),w=y.create({element:n.current,engine:S,options:{width:window.innerWidth,height:window.innerHeight,wireframes:!1,background:"transparent",hasBounds:!0}}),T=document.querySelector(".sledding-trigger"),k=T?T.getBoundingClientRect():null,I=k?k.left+k.width/2:300,P=k?k.top+k.height/2:100,R=v.rectangle(I,P,50,35,{restitution:.5,friction:.001,frictionAir:.005,density:.004,collisionFilter:{category:1,mask:1},render:{sprite:{texture:"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(`
            <svg width="50" height="35" xmlns="http://www.w3.org/2000/svg">
              <ellipse cx="25" cy="17" rx="23" ry="15" fill="#8B4513"/>
              <circle cx="18" cy="13" r="2.5" fill="#FFD700"/>
              <circle cx="32" cy="13" r="2.5" fill="#FFD700"/>
              <path d="M 18 21 Q 25 25 32 21" stroke="#FFD700" stroke-width="2" fill="none"/>
            </svg>
          `))),xScale:1,yScale:1},zIndex:1e4},plugin:{isSleddingGuy:!0}}),M=[],L={lastX:-200,lastY:window.innerHeight-150,generate(V,ee){const Q=[];let $=ee||this.lastX,Ae=this.lastY;for(let Ut=0;Ut<V;Ut++){const sn=Math.random();let Be,vt,at,xe,ut,ct,Ot,K,de;sn<.35?(Be=150+Math.random()*200,vt=20,at=0,xe=$+Be/2+100+Math.random()*150,ut=Ae+(Math.random()-.5)*100,ct="#34495E",Ot=.3,K=.4,de="normal"):sn<.55?(Be=180,vt=20,at=-.3,xe=$+Be/2+120+Math.random()*100,ut=Ae+Math.random()*80,ct="#E74C3C",Ot=.3,K=.7,de="ramp"):sn<.7?(Be=150,vt=20,at=.25,xe=$+Be/2+100+Math.random()*120,ut=Ae+50+Math.random()*50,ct="#3498DB",Ot=.3,K=.4,de="upward"):sn<.85?(Be=150+Math.random()*150,vt=20,at=Math.random()>.5?-.15:.15,xe=$+Be/2+100+Math.random()*120,ut=Ae+(Math.random()-.5)*100,ct="#D5F4FF",Ot=0,K=.4,de="icy"):(Be=120+Math.random()*80,vt=25,at=0,xe=$+Be/2+100+Math.random()*120,ut=Ae+(Math.random()-.5)*120,ct="#9B59B6",Ot=.4,K=1.5,de="bouncy");const be=v.rectangle(xe,ut,Be,vt,{isStatic:!0,angle:at,friction:Ot,restitution:K,collisionFilter:{category:1,mask:3},render:{fillStyle:ct},plugin:{platformKind:de}});Q.push(be),$=xe+Be/2,Ae=ut}return this.lastX=$,this.lastY=Ae,Q}},z=L.generate(30);M.push(...z);const b=v.rectangle(I,P+80,250,20,{isStatic:!0,angle:0,friction:.8,restitution:.3,collisionFilter:{category:1,mask:3},render:{fillStyle:"#2ECC71"}});M.push(b);const A=document.querySelectorAll(".cv-section, .experience-item-wrapper, .skill-item-wrapper, .hobby-item, .cv-name, .cv-title"),F=[];A.forEach((V,ee)=>{const Q=V.getBoundingClientRect(),$=V.cloneNode(!0);$.style.position="absolute",$.style.width=Q.width+"px",$.style.height=Q.height+"px",$.style.pointerEvents="none",$.style.zIndex="10",$.style.opacity="1",$.classList.add("chaos-element");const Ae=v.rectangle(Q.left+Q.width/2,Q.top+Q.height/2,Q.width,Q.height,{isStatic:!1,restitution:.3,friction:.6,density:8e-4,frictionAir:.01,angle:(Math.random()-.5)*.1,isSensor:!1,collisionFilter:{category:2,mask:3},render:{visible:!1},plugin:{domElement:$,originalElement:V,isCVElement:!0}});F.push(Ae),r.current.appendChild($),setTimeout(()=>{V.style.transition="opacity 0.5s",V.style.opacity="0"},ee*100)});const B={left:!1,right:!1,up:!1},W=[["#FF6B6B","#FFE66D"],["#4ECDC4","#44A7C4"],["#A8E6CF","#DCEDC1"],["#FFD93D","#6BCF7F"],["#FF8ED4","#C779D0"],["#4FACFE","#00F2FE"],["#FA709A","#FEE140"],["#30CFD0","#330867"],["#A8EDEA","#FED6E3"],["#FF9A9E","#FAD0C4"]];E.on(S,"collisionStart",V=>{V.pairs.forEach(ee=>{const Q=ee.bodyA.plugin.isSleddingGuy?ee.bodyA:ee.bodyB.plugin.isSleddingGuy?ee.bodyB:null,$=ee.bodyA.isStatic?ee.bodyA:ee.bodyB.isStatic?ee.bodyB:null;if(Q&&$){const Ae=W[Math.floor(Math.random()*W.length)];if(s.current&&(s.current.style.background=`linear-gradient(135deg, ${Ae[0]} 0%, ${Ae[1]} 100%)`),$.plugin.platformKind==="icy"?x.set(Q,{friction:0}):x.set(Q,{friction:.05}),$.plugin.platformKind==="bouncy"){const Ut=Q.velocity.y;Ut>2?x.setVelocity(Q,{x:Q.velocity.x*1.1,y:-Math.abs(Ut)*1.8-5}):x.setVelocity(Q,{x:Q.velocity.x*1.2,y:Q.velocity.y*1.5})}else $.plugin.platformKind==="icy"&&x.setVelocity(Q,{x:Q.velocity.x*1.15,y:Q.velocity.y})}})});const G=V=>{(V.key==="ArrowLeft"||V.key==="a"||V.key==="q")&&(B.left=!0),(V.key==="ArrowRight"||V.key==="d")&&(B.right=!0),(V.key==="ArrowUp"||V.key===" "||V.key==="w"||V.key==="z")&&(B.up=!0)},pe=V=>{(V.key==="ArrowLeft"||V.key==="a"||V.key==="q")&&(B.left=!1),(V.key==="ArrowRight"||V.key==="d")&&(B.right=!1),(V.key==="ArrowUp"||V.key===" "||V.key==="w"||V.key==="z")&&(B.up=!1)};window.addEventListener("keydown",G),window.addEventListener("keyup",pe);const Re=(V,ee)=>{V==="left"&&(B.left=ee),V==="right"&&(B.right=ee),V==="up"&&(B.up=ee)};window.sleddingTouchControl=Re;let Se=!1,H=!1;E.on(S,"beforeUpdate",()=>{const V=R.position,ee=S.world.bodies.some(K=>{if(K===R||!K.isStatic)return!1;const de=K.position.y>V.y,be=Math.abs(K.position.y-V.y)<40,on=Math.abs(K.position.x-V.x)<80,Jr=R.velocity.y>-2&&R.velocity.y<5;return de&&be&&on&&Jr});ee?(Se=!0,H=!1):R.velocity.y>2&&(Se=!1);const Q=ee?.004:.008;if(B.left&&(x.applyForce(R,V,{x:-Q,y:0}),ee&&x.setAngularVelocity(R,-.05)),B.right&&(x.applyForce(R,V,{x:Q,y:0}),ee&&x.setAngularVelocity(R,.05)),!B.left&&!B.right&&ee&&x.setAngularVelocity(R,R.angularVelocity*.9),B.up&&Se&&!H&&(x.setVelocity(R,{x:R.velocity.x,y:-15}),Se=!1,H=!0),V.x>L.lastX-window.innerWidth*2){const K=L.generate(15);g.add(S.world,K),M.push(...K)}const $=M.filter(K=>K.position.x<V.x-window.innerWidth*2);$.length>0&&(g.remove(S.world,$),$.forEach(K=>{const de=M.indexOf(K);de>-1&&M.splice(de,1)}));const Ae=F.filter(K=>K.position.y>V.y+window.innerHeight*2);Ae.length>0&&(Ae.forEach(K=>{K.plugin.domElement&&K.plugin.domElement.remove();const de=F.indexOf(K);de>-1&&F.splice(de,1)}),g.remove(S.world,Ae));const Ut=M.reduce((K,de)=>Math.max(K,de.position.y),0);if(V.y>Ut+800){const K=Math.floor(V.x/10);u.current=K,o(K),a(!0),_.stop(Ce);return}l||o(Math.max(0,Math.floor(V.x/10)));const sn=V.x-window.innerWidth/3,Be=Math.max(0,V.y-window.innerHeight/2),vt=C.bounds.min.x,at=C.bounds.min.y,xe=vt+(sn-vt)*.1,ut=at+(Be-at)*.08,ct={min:{x:xe,y:ut},max:{x:xe+window.innerWidth,y:ut+window.innerHeight}};y.lookAt(C,ct),y.lookAt(w,ct),document.querySelectorAll(".mountain-layer").forEach((K,de)=>{const be=.1+de*.05;K.style.transform=`translateX(${-xe*be}px)`}),F.forEach(K=>{const de=K.plugin.domElement;if(de){const be=K.bounds,on=(be.min.x+be.max.x)/2,Jr=(be.min.y+be.max.y)/2,dl=be.max.x-be.min.x,ur=be.max.y-be.min.y;de.style.transform=`translate(${on-dl/2}px, ${Jr-ur/2}px) rotate(${K.angle}rad)`}})}),g.add(S.world,[...F,...M,R]);const Ce=_.create();_.run(Ce,S),y.run(w),y.run(C);const ke={min:{x:0,y:0},max:{x:window.innerWidth,y:window.innerHeight}};return y.lookAt(C,ke),y.lookAt(w,ke),()=>{y.stop(C),y.stop(w),_.stop(Ce),g.clear(S.world),m.clear(S),C.canvas.remove(),w.canvas.remove(),C.textures={},w.textures={},window.removeEventListener("keydown",G),window.removeEventListener("keyup",pe),window.sleddingTouchControl=null,A.forEach(V=>V.style.opacity="1"),F.forEach(V=>{V.plugin.domElement&&V.plugin.domElement.remove()})}},[h]),N.jsxs("div",{className:"sledding-chaos-overlay",children:[N.jsx("div",{ref:s,className:"dynamic-background",style:{background:"linear-gradient(135deg, #87CEEB 0%, #E0F6FF 100%)"}}),N.jsxs("div",{className:"mountains-container",children:[N.jsx("div",{className:"mountain-layer mountain-layer-1"}),N.jsx("div",{className:"mountain-layer mountain-layer-2"}),N.jsx("div",{className:"mountain-layer mountain-layer-3"})]}),N.jsx("button",{className:"close-chaos",onClick:t,children:""}),l?N.jsx(GC,{currentScore:u.current||i,onClose:t,onRestart:()=>{a(!1),o(0),u.current=0,f(p=>p+1)}}):N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"chaos-instructions",children:c?"Use buttons to move and jump! ":"Use arrows  or A/D to move,  or Space to jump! "}),N.jsxs("div",{className:"chaos-distance",children:["Distance: ",i,"m"]}),c&&N.jsxs("div",{className:"touch-controls",children:[N.jsx("button",{className:"touch-btn touch-left",onTouchStart:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"left",!0)},onTouchEnd:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"left",!1)},onMouseDown:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"left",!0)},onMouseUp:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"left",!1)},onMouseLeave:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"left",!1)},children:""}),N.jsx("button",{className:"touch-btn touch-jump",onTouchStart:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"up",!0)},onTouchEnd:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"up",!1)},onMouseDown:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"up",!0)},onMouseUp:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"up",!1)},onMouseLeave:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"up",!1)},children:""}),N.jsx("button",{className:"touch-btn touch-right",onTouchStart:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"right",!0)},onTouchEnd:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"right",!1)},onMouseDown:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"right",!0)},onMouseUp:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"right",!1)},onMouseLeave:()=>{var p;return(p=window.sleddingTouchControl)==null?void 0:p.call(window,"right",!1)},children:""})]})]}),N.jsx("div",{ref:n,className:"cv-canvas-layer"}),N.jsx("div",{ref:e,className:"game-canvas-layer"}),N.jsx("div",{ref:r,className:"clones-container"})]})};class QC{constructor(e){this.content=e,this.data={name:"",title:"",contact:{},hobbies:[],skills:[],experiences:[],education:[],languages:[],projects:[]}}parse(){return this.extractPersonalInfo(),this.extractSummary(),this.extractSections(),this.data}extractSummary(){const e=this.extractSection("summary|rsum|about");e&&(this.data.summary=this.cleanLatex(e).trim())}extractPersonalInfo(){const e=[/\\name\{([^}]+)\}\{([^}]+)\}/,/\\firstname\{([^}]+)\}/,/\\familyname\{([^}]+)\}/,/\\author\{([^}]+)\}/];let n="",r="";for(const h of e){const f=this.content.match(h);if(f)if(h.source.includes("\\\\name")){n=f[1].trim(),r=f[2].trim(),this.data.name=`${n} ${r}`;break}else if(h.source.includes("firstname"))n=f[1].trim();else if(h.source.includes("familyname"))r=f[1].trim();else{this.data.name=f[1].trim();break}}n&&r&&(this.data.name=`${n} ${r}`);const s=[/\\title\{([^}]+)\}/,/\\subtitle\{([^}]+)\}/];for(const h of s){const f=this.content.match(h);if(f){this.data.title=f[1].trim();break}}const i=this.content.match(/\\email\{([^}]+)\}/);i&&(this.data.contact.email=i[1].trim());const o=this.content.match(/\\phone(?:\[mobile\])?\{([^}]+)\}/);o&&(this.data.contact.phone=o[1].trim());const l=this.content.match(/\\address\{([^}]+)\}/);l&&(this.data.contact.location=l[1].trim());const a=this.content.match(/\\homepage\{([^}]+)\}/);a&&(this.data.contact.website=a[1].trim());const c=this.content.match(/\\social\[linkedin\]\{([^}]+)\}/);c&&(this.data.contact.linkedin=c[1].trim());const d=this.content.match(/\\social\[github\]\{([^}]+)\}/);d&&(this.data.contact.github=d[1].trim())}extractSections(){this.extractExperience(),this.extractEducation(),this.extractSkills(),this.extractLanguages(),this.extractHobbies(),this.extractProjects()}extractExperience(){const e=this.extractSection("experience|exprience professionnelle|professional experience");e&&this.parseCvEntries(e).forEach(r=>{if(r.length>=5){const i=r[4]===""?5:4,o={period:r[0].trim(),role:r[1].trim(),company:r[2].trim(),location:r[3].trim(),description:this.cleanLatex(r[i]),achievements:this.extractItemize(r[i])};(o.role||o.company)&&this.data.experiences.push(o)}})}extractEducation(){const e=this.extractSection("education|formation|tudes");e&&this.parseCvEntries(e).forEach(r=>{if(r.length>=5){const i=r[4]===""?5:4,o=this.extractItemize(r[i]),l={period:r[0].trim(),degree:r[1].trim(),school:r[2].trim(),location:r[3].trim(),description:this.cleanLatex(r[i]),details:o.length>0?o:[]};(l.degree||l.school)&&this.data.education.push(l)}})}extractSkills(){const e=this.extractSection("comptences|skills|technical skills|competences");if(e){const n=/\\cvitem\{([^}]*)\}\{([^}]*)\}/g;let r;for(;(r=n.exec(e))!==null;){const s=r[1].trim(),i=this.cleanLatex(r[2].trim());if(s.toLowerCase().includes("language"))continue;i.split(",").map(l=>l.trim()).filter(l=>l.length>0).forEach(l=>{this.data.skills.push({name:l,category:s,level:70})})}}}extractLanguages(){const e=this.extractSection("langues|languages|idiomas");if(e){const n=/\\cvitem\{([^}]*)\}\{([^}]*)\}/g;let r;for(;(r=n.exec(e))!==null;)this.data.languages.push({name:r[1].trim(),level:r[2].trim()})}}extractHobbies(){const e=this.extractSection("centres d'intrt|hobbies|loisirs|interests|extracurricular activities|extracurricular");if(e){const n=this.parseCvEntries(e);let r=!1;n.forEach(s=>{if(s.length>=5){const i=s[0].trim(),o=s[1].trim(),l=s[4]===""?5:4,a=this.extractItemize(s[l]);o&&(r=!0,this.data.hobbies.push({name:o,period:i||null,icon:this.getHobbyIcon(o),details:a,videos:[]}))}}),r||this.cleanLatex(e).split(/[,;]|\\item/).filter(o=>o.trim()).forEach(o=>{const l=o.trim();l&&l.length>2&&this.data.hobbies.push({name:l,icon:this.getHobbyIcon(l),videos:[]})})}}extractProjects(){const e=this.extractSection("projets|projects");if(e){const n=/\\cventry\{([^}]*)\}\{([^}]*)\}\{([^}]*)\}\{([^}]*)\}\{([^}]*)\}\{([^}]*)\}/g;let r;for(;(r=n.exec(e))!==null;)this.data.projects.push({period:r[1].trim(),name:r[2].trim(),tech:r[3].trim(),description:this.cleanLatex(r[6])})}}extractSection(e){const n=e.split("|").map(r=>new RegExp(`\\\\section\\{\\s*${r}\\s*\\}([\\s\\S]*?)(?=\\\\section|\\\\end\\{document\\}|$)`,"i"));for(const r of n){const s=this.content.match(r);if(s)return s[1]}return null}parseCvEntries(e){const n=[];let r=0;for(;r<e.length;){const s=e.indexOf("\\cventry",r);if(s===-1)break;r=s+8;const i=[];for(let o=0;o<6;o++){for(;r<e.length&&e[r]!=="{"&&!(e[r]==="\\"||e[r]>="a"&&e[r]<="z"||e[r]>="A"&&e[r]<="Z");)r++;if(r>=e.length||e[r]!=="{")break;r++;const l=this.extractBalancedBraces(e,r);i.push(l.content),r=l.endIndex}if(i.length>=5){for(;i.length<6;)i.push("");n.push(i)}}return n}extractBalancedBraces(e,n){let r=1,s=n,i="";for(;s<e.length&&r>0;){if(e[s]==="\\"&&s+1<e.length){i+=e[s]+e[s+1],s+=2;continue}e[s]==="{"?(r++,i+=e[s]):e[s]==="}"?(r--,r>0&&(i+=e[s])):i+=e[s],s++}return{content:i,endIndex:s}}extractItemize(e){const n=/\\item\s+([^\n\\]+)/g,r=[];let s;for(;(s=n.exec(e))!==null;)r.push(this.cleanLatex(s[1].trim()));return r}splitSkills(e){return this.cleanLatex(e).split(/[,;]|\\item/).map(s=>s.trim()).filter(s=>s.length>0)}parseExperienceSection(e){const n=[],r=e.split(`
`).filter(o=>o.trim()),s=/(\d{4})\s*[-]\s*(\d{4}|present|aujourd'hui)/gi;let i=null;return r.forEach(o=>{const l=o.match(s);if(l)i&&n.push(i),i={period:l[0],role:"",company:"",description:"",achievements:[]};else if(i){const a=this.cleanLatex(o);a&&(i.role?i.company?i.description+=" "+a:i.company=a:i.role=a)}}),i&&n.push(i),n}cleanLatex(e){return e?e.replace(/%.*$/gm,"").replace(/\\textbf\{([^}]+)\}/g,"$1").replace(/\\textit\{([^}]+)\}/g,"$1").replace(/\\emph\{([^}]+)\}/g,"$1").replace(/\\underline\{([^}]+)\}/g,"$1").replace(/\\href\{[^}]+\}\{([^}]+)\}/g,"$1").replace(/\\url\{([^}]+)\}/g,"$1").replace(/\\,/g," ").replace(/~/g," ").replace(/\\quad/g," ").replace(/\\[a-zA-Z]+\{([^}]+)\}/g,"$1").replace(/\\[a-zA-Z]+/g,"").replace(/\s+/g," ").trim():""}getHobbyIcon(e){const n=e.toLowerCase(),r={escalade:"",climbing:"",skydiving:"",parachutisme:"",parachute:"",traveling:"",voyage:"",travel:"",photo:"",photographie:"",photography:"",musique:"",music:"",sport:"",lecture:"",reading:"",cinma:"",cinema:"",cuisine:"",cooking:"",gaming:"",jeux:"",vlo:"",cycling:"",course:"",running:"",natation:"",swimming:"",ski:"",dessin:"",drawing:"",art:""};for(const[s,i]of Object.entries(r))if(n.includes(s))return i;return""}}async function YC(t){try{const n=await(await fetch(t)).text();return new QC(n).parse()}catch(e){return console.error("Erreur lors du parsing du CV LaTeX:",e),null}}const fi={skills:{Java:{level:95,demo:"Spring Boot 17/21, Maven, Clean Architecture",priority:1},"Spring Boot":{level:92,demo:"Backend services & API development",priority:1},Spring:{level:92,demo:"REST APIs, microservices, Spring Boot",priority:1},Kafka:{level:78,demo:"Event streaming & messaging",priority:1},Kubernetes:{level:85,demo:"Container orchestration on OpenShift",priority:1},Docker:{level:87,demo:"Containerization & deployment",priority:1},React:{level:85,demo:"Modern UI with hooks and MERN stack",priority:1},Kotlin:{level:85,demo:"Android development & backend",priority:1},Python:{level:86,demo:"AI/ML (YOLOv7), Selenium, automation",priority:1},"Node.js":{level:83,demo:"Backend services & MERN development",priority:1},"Azure DevOps":{level:83,demo:"CI/CD pipelines & deployment",priority:2},OpenShift:{level:82,demo:"Red Hat Kubernetes platform",priority:2},ElasticSearch:{level:80,demo:"Search & analytics with Kibana",priority:2},Maven:{level:88,demo:"Build automation & dependency management",priority:2},Git:{level:90,demo:"Version control & collaboration",priority:2},REST:{level:90,demo:"RESTful APIs with OpenAPI/Swagger",priority:2},SOAP:{level:82,demo:"WSDL services & integration",priority:2},TDD:{level:88,demo:"Test-driven development practices",priority:2},JavaScript:{level:88,demo:"ES6+, TypeScript, modern web dev",priority:3},TypeScript:{level:85,demo:"Type-safe development",priority:3},C:{level:78,demo:"Embedded systems & real-time",priority:3},"C++":{level:80,demo:"Systems programming",priority:3},"C#":{level:75,demo:"Application development",priority:3},PHP:{level:72,demo:"Web backend development",priority:3},SQL:{level:84,demo:"Database queries & optimization",priority:3},VBA:{level:76,demo:"Test automation & macros",priority:3},MERN:{level:83,demo:"MongoDB, Express, React, Node.js",priority:3},OpenAPI:{level:85,demo:"API documentation & design",priority:3},Swagger:{level:85,demo:"API documentation",priority:3},Selenium:{level:80,demo:"Web automation testing",priority:3},Sonar:{level:82,demo:"Code quality & security analysis",priority:3},"Clean Architecture":{level:87,demo:"Software craftsmanship principles",priority:3},YOLOv7:{level:78,demo:"Object detection & video processing",priority:3},"Machine Learning":{level:75,demo:"Model training & evaluation",priority:3},Blockchain:{level:76,demo:"NFT platforms & decentralized systems",priority:3}},experiences:{"Backend Java Developer":{achievements:["Backend services avec Java Spring Boot 17/21","Orchestration d'APIs REST (OpenAPI) et SOAP (WSDL)","Dploiement Kubernetes sur OpenShift via Azure DevOps","Projet KYC avec Kafka pour streaming de donnes","Pipelines CI/CD avec Sonar et ElasticSearch/Kibana"],technologies:["Java 21","Spring Boot","Kubernetes","OpenShift","Kafka","Azure DevOps","ElasticSearch","Maven","Git"]},"Test Automation Intern":{achievements:["Automatisation des tests fonctionnels en VBA","Tests API avec Selenium (Python), Ready API et SOAP UI","Intgration avec Adobe Campaign"],technologies:["VBA","Python","Selenium","Ready API","SOAP UI"]},"Polytech Angers / Universit du Mans":{achievements:["Cration dataset personnalis pour YOLOv7","Entranement modle de dtection de parties du corps","Analyse de prcision et performance en Python","Traitement vido mdical"],technologies:["Python","YOLOv7","Machine Learning","Computer Vision"]},"University of Bradford / xHumanity":{achievements:["Dveloppement plateforme xHumanity (MERN Stack)","Dveloppement et recherche blockchain","Plateforme NFT dcentralise","React & Node.js full-stack"],technologies:["React","Node.js","MongoDB","Express","Blockchain","NFT"]},"French Ministry of Ecology (DREAL Pays de la Loire)":{achievements:["Scurisation environnements rseau","Prparation d'images systme","Sanitization de donnes sensibles","Support technique utilisateurs"],technologies:["IT Support","Network Security","System Administration"]}}};function XC(t){const e={...t},n=G0();return e.hobbies&&(e.hobbies=e.hobbies.map(r=>{const s=K0(n,r.name);return{...r,videos:s}})),e.skills&&(e.skills=e.skills.map(r=>{const s=fi.skills[r.name];return s?{...r,...s}:{...r,level:r.level||70,priority:3}}).filter(r=>r.priority<=2).sort((r,s)=>r.priority-s.priority)),e.experiences&&(e.experiences=e.experiences.map(r=>{let s=fi.experiences[r.role];if(!s){const i=Object.keys(fi.experiences).find(o=>r.role.toLowerCase().includes(o.toLowerCase()));s=i?fi.experiences[i]:null}return s||(s=fi.experiences[r.company]),s?{...r,achievements:s.achievements||r.achievements||[],technologies:s.technologies||[]}:r})),e}const qC=({latexFile:t=null,manualData:e=null})=>{const[n,r]=Z.useState({x:0,y:0}),[s,i]=Z.useState(null),[o,l]=Z.useState(null),[a,c]=Z.useState(!1),[d,h]=Z.useState(!1),f=Z.useRef(null),u=Z.useRef(null),p=Z.useRef([]);Z.useEffect(()=>{(async()=>{if(t){c(!0);try{const v=await YC(t),x=XC(v);l(x)}catch(v){console.error("Erreur lors du chargement du CV:",v),l(y())}finally{c(!1)}}else l(e||y())})()},[t,e]);const m=g=>{if(!f.current)return;const v=f.current.getBoundingClientRect(),x=g.clientX-v.left,E=g.clientY-v.top;r({x,y:E})},y=()=>({name:"Votre Nom",title:"Dveloppeur Full Stack",contact:{email:"contact@maceparis.dev",phone:"+33 X XX XX XX XX",location:"Paris, France"},hobbies:[],skills:[],experiences:[],education:[]});return a?N.jsx("div",{className:"cv-card-container",children:N.jsx("div",{className:"cv-card loading",children:N.jsx("div",{className:"loading-spinner",children:"Chargement du CV..."})})}):o?N.jsxs("div",{className:"cv-card-container",ref:f,onMouseMove:m,onMouseLeave:()=>r({x:0,y:0}),children:[d&&N.jsx(KC,{onClose:()=>h(!1)}),N.jsxs("div",{className:"cv-card",children:[N.jsxs("header",{className:"cv-header",children:[N.jsx("h1",{className:"cv-name",children:o.name.includes(" ")?N.jsxs(N.Fragment,{children:[N.jsx("span",{className:"cv-name-first",children:o.name.split(" ")[0]})," ",N.jsx("span",{className:"cv-name-last",children:o.name.split(" ").slice(1).join(" ")}),N.jsx("button",{className:"sledding-trigger",onClick:()=>h(!0),title:" Launch the chaos!",children:""})]}):o.name}),N.jsx("h2",{className:"cv-title",children:o.title}),N.jsxs("a",{href:"/CV_Nicolas_Mace.pdf",download:!0,className:"cv-download-link",children:[N.jsx("span",{className:"download-icon",children:""}),"Download PDF Version"]}),N.jsxs("div",{className:"cv-contact",children:[o.contact.email&&N.jsxs("span",{children:[" ",o.contact.email]}),o.contact.location&&N.jsxs("span",{children:[" ",o.contact.location]}),o.contact.linkedin&&N.jsxs("span",{children:[" LinkedIn: ",o.contact.linkedin]}),o.contact.github&&N.jsxs("span",{children:[" GitHub: ",o.contact.github]})]})]}),o.summary&&N.jsxs("section",{className:"cv-section summary-section",children:[N.jsx("h3",{className:"section-title",children:"Summary"}),N.jsx("p",{className:"summary-text",children:o.summary})]}),o.education&&o.education.length>0&&N.jsxs("section",{className:"cv-section education-section",children:[N.jsx("h3",{className:"section-title",children:"Education"}),N.jsx("div",{className:"education-list",children:o.education.map((g,v)=>N.jsxs("div",{className:"education-item",children:[N.jsxs("div",{className:"education-header",children:[N.jsxs("div",{children:[N.jsx("h4",{className:"education-degree",children:g.degree}),N.jsx("p",{className:"education-school",children:g.school}),g.location&&N.jsx("p",{className:"education-location",children:g.location})]}),N.jsx("span",{className:"education-period",children:g.period})]}),g.details&&g.details.length>0&&N.jsx("ul",{className:"education-details",children:g.details.map((x,E)=>N.jsx("li",{children:x},E))})]},v))})]}),o.experiences&&o.experiences.length>0&&N.jsxs("section",{className:"cv-section experience-section",children:[N.jsx("h3",{className:"section-title",children:"Experience"}),N.jsx("div",{className:"experience-list",children:o.experiences.map((g,v)=>N.jsx("div",{className:"experience-item-wrapper",onMouseEnter:()=>i({type:"experience",index:v}),onMouseLeave:()=>i(null),children:N.jsxs("div",{className:`experience-item flip-card ${(s==null?void 0:s.type)==="experience"&&s.index===v?"flipped":""}`,children:[N.jsxs("div",{className:"flip-card-front",children:[N.jsxs("div",{className:"experience-header",children:[N.jsx("h4",{className:"experience-role",children:g.role}),N.jsx("span",{className:"experience-period",children:g.period})]}),N.jsx("p",{className:"experience-company",children:g.company}),g.location&&N.jsx("p",{className:"experience-location",children:g.location}),g.description&&N.jsx("p",{className:"experience-description",children:g.description}),g.achievements&&g.achievements.length>0&&N.jsx("ul",{className:"experience-achievements",children:g.achievements.map((x,E)=>N.jsx("li",{children:x},E))})]}),N.jsx("div",{className:"flip-card-back",children:N.jsx(X0,{experience:g})})]})},v))})]}),o.skills&&o.skills.length>0&&N.jsxs("section",{className:"cv-section skills-section",children:[N.jsx("h3",{className:"section-title",children:"Skills"}),N.jsx("div",{className:"skills-grid",children:o.skills.map((g,v)=>N.jsx("div",{className:"skill-item-wrapper",onMouseEnter:()=>i({type:"skill",data:g}),onMouseLeave:()=>i(null),children:N.jsxs("div",{className:`skill-item flip-card ${(s==null?void 0:s.type)==="skill"&&s.data.name===g.name?"flipped":""}`,children:[N.jsx("div",{className:"flip-card-front",children:N.jsx("div",{className:"skill-header",children:N.jsx("span",{className:"skill-name",children:g.name})})}),N.jsx("div",{className:"flip-card-back",children:N.jsx(Y0,{skill:g})})]})},v))})]}),o.hobbies&&o.hobbies.length>0&&N.jsxs("section",{className:"cv-section hobbies-section",children:[N.jsx("h3",{className:"section-title",children:"Interests"}),N.jsx("div",{className:"hobbies-grid",children:o.hobbies.map((g,v)=>N.jsxs("div",{className:"hobby-item",onMouseEnter:()=>{u.current&&clearTimeout(u.current),i({type:"hobby",data:g})},onMouseLeave:()=>{u.current=setTimeout(()=>{i(null)},300)},children:[N.jsx("span",{className:"hobby-icon",children:g.icon}),N.jsxs("div",{style:{flex:1},children:[N.jsx("span",{className:"hobby-name",children:g.name}),g.period&&N.jsxs("span",{className:"hobby-period",children:["  ",g.period]})]}),(s==null?void 0:s.type)==="hobby"&&s.data.name===g.name&&N.jsx(Q0,{videos:g.videos||[],hobbyName:g.name,videoHistoryRef:p,onMouseEnter:()=>{u.current&&clearTimeout(u.current)},onMouseLeave:()=>{u.current=setTimeout(()=>{i(null)},300)}})]},v))})]})]})]}):null};function JC(){return N.jsx("div",{className:"app",children:N.jsx(qC,{latexFile:"/CV.tex"})})}Zl.createRoot(document.getElementById("root")).render(N.jsx(Mv.StrictMode,{children:N.jsx(JC,{})}));
